{"version":3,"file":"lib.js","sources":["../../src/locales/index.js","../../src/components/ItemSelector/widgets/ItemIcon.js","../../src/components/ItemSelector/widgets/styles/UnselectedItem.style.js","../../src/components/ItemSelector/widgets/UnselectedItem.js","../../src/components/ItemSelector/widgets/styles/ArrowButton.style.js","../../src/components/ItemSelector/widgets/ArrowButton.js","../../src/components/ItemSelector/modules/toggler.js","../../src/components/ItemSelector/UnselectedItems.js","../../src/components/ItemSelector/widgets/DeselectIconButton.js","../../src/components/ItemSelector/widgets/styles/SelectedItem.style.js","../../src/components/ItemSelector/widgets/SelectedItem.js","../../src/components/ItemSelector/modules/reorderList.js","../../src/components/ItemSelector/styles/SelectedItems.style.js","../../src/components/ItemSelector/SelectedItems.js","../../src/components/ItemSelector/styles/ItemSelector.style.js","../../src/components/ItemSelector/ItemSelector.js","../../src/modules/dataSets.js","../../src/modules/dataTypes.js","../../src/components/DataDimension/DataTypesSelector.js","../../src/components/DataDimension/Detail.js","../../src/components/DataDimension/styles/Groups.style.js","../../src/components/DataDimension/Groups.js","../../src/components/Filter/Filter.js","../../src/components/styles/FilterField.style.js","../../src/components/FilterField.js","../../src/api/index.js","../../src/api/dimensions.js","../../src/assets/DataIcon.js","../../src/assets/PeriodIcon.js","../../src/assets/OrgUnitIcon.js","../../src/assets/AssignedCategoriesIcon.js","../../src/modules/predefinedDimensions.js","../../src/components/DataDimension/DataDimension.js","../../src/components/PeriodDimension/utils/fixedPeriods.js","../../src/components/PeriodDimension/styles/PeriodFilter.style.js","../../src/components/PeriodDimension/FixedPeriodFilter.js","../../src/components/PeriodDimension/utils/relativePeriods.js","../../src/components/PeriodDimension/RelativePeriodFilter.js","../../src/components/styles/DimensionSelector.style.js","../../src/components/styles/TransferOption.style.js","../../src/components/TransferOption.js","../../src/assets/DimensionItemIcons/PeriodIcon.js","../../src/modules/dimensionSelectorHelper.js","../../src/components/PeriodDimension/PeriodSelector.js","../../src/components/PeriodDimension/PeriodDimension.js","../../src/api/organisationUnits.js","../../src/modules/ouIdHelper/index.js","../../src/components/OrgUnitDimension/OrgUnitDimension.js","../../src/assets/DimensionItemIcons/GenericIcon.js","../../src/components/DynamicDimension/ItemSelector.js","../../src/components/DynamicDimension/DynamicDimension.js","../../src/components/DimensionsPanel/List/styles/DimensionLabel.style.js","../../src/components/DimensionsPanel/List/DimensionLabel.js","../../src/components/DimensionsPanel/List/styles/RecommendedIcon.style.js","../../src/components/DimensionsPanel/List/RecommendedIcon.js","../../src/assets/MoreHorizontalIcon.js","../../src/components/DimensionsPanel/List/OptionsButton.js","../../src/assets/DynamicDimensionIcon.js","../../src/components/DimensionsPanel/List/styles/DimensionItem.style.js","../../src/components/DimensionsPanel/List/DimensionItem.js","../../src/components/DimensionsPanel/List/styles/DimensionList.style.js","../../src/components/DimensionsPanel/List/DimensionList.js","../../src/components/DimensionsPanel/styles/DimensionsPanel.style.js","../../src/components/DimensionsPanel/DimensionsPanel.js","../../src/modules/layout/axis.js","../../src/assets/BarIcon.js","../../src/assets/StackedBarIcon.js","../../src/assets/ColumnIcon.js","../../src/assets/StackedColumnIcon.js","../../src/assets/LineIcon.js","../../src/assets/AreaIcon.js","../../src/assets/PieIcon.js","../../src/assets/RadarIcon.js","../../src/assets/GaugeIcon.js","../../src/assets/YearOverYearLineIcon.js","../../src/assets/YearOverYearColumnIcon.js","../../src/assets/SingleValueIcon.js","../../src/assets/PivotTableIcon.js","../../src/modules/visTypes.js","../../src/modules/layoutUiRules/rules.js","../../src/modules/layoutUiRules/rulesHelper.js","../../src/modules/layoutUiRules/rulesUtils.js","../../src/modules/layoutTypes.js","../../src/modules/axis.js","../../src/modules/visTypeToLayoutType.js","../../src/components/DimensionMenu.js","../../src/modules/pivotTable/parseValue.js","../../src/modules/pivotTable/pivotTableConstants.js","../../src/modules/pivotTable/renderValue.js","../../src/modules/pivotTable/measureText.js","../../src/modules/pivotTable/PivotTableEngine.js","../../src/modules/pivotTable/useParentSize.js","../../src/modules/pivotTable/useScrollPosition.js","../../src/modules/pivotTable/clipAxis.js","../../src/modules/pivotTable/clipPartitionedAxis.js","../../src/modules/pivotTable/useTableClipping.js","../../src/components/PivotTable/PivotTableEngineContext.js","../../src/components/PivotTable/styles/PivotTable.style.js","../../src/components/PivotTable/PivotTableContainer.js","../../src/components/PivotTable/PivotTableClippedAxis.js","../../src/modules/pivotTable/getHeaderForDisplay.js","../../src/components/PivotTable/PivotTableHeaderCell.js","../../src/components/PivotTable/PivotTableCell.js","../../src/components/PivotTable/icons/SortIconAscending.js","../../src/components/PivotTable/icons/SortIconDescending.js","../../src/components/PivotTable/icons/SortIconIdle.js","../../src/components/PivotTable/PivotTableSortIcon.js","../../src/components/PivotTable/PivotTableColumnHeaderCell.js","../../src/components/PivotTable/PivotTableDimensionLabelCell.js","../../src/components/PivotTable/PivotTableEmptyCell.js","../../src/components/PivotTable/PivotTableColumnHeaders.js","../../src/components/PivotTable/PivotTableTitleRow.js","../../src/modules/layout/dimension.js","../../src/modules/layout/dimensionIs.js","../../src/modules/layout/dimensionIsEmpty.js","../../src/modules/layout/dimensionIsValid.js","../../src/modules/layout/dimensionGetItems.js","../../src/modules/getOuLevelAndGroupText.js","../../src/visualizations/util/getFilterText.js","../../src/components/PivotTable/PivotTableTitleRows.js","../../src/components/PivotTable/PivotTableHead.js","../../src/components/PivotTable/PivotTableEmptyRow.js","../../src/components/PivotTable/PivotTableRowHeaderCell.js","../../src/modules/pivotTable/isColorBright.js","../../src/modules/legends.js","../../src/modules/pivotTable/applyLegendSet.js","../../src/components/PivotTable/PivotTableValueCell.js","../../src/components/PivotTable/PivotTableRow.js","../../src/components/PivotTable/PivotTableBody.js","../../src/modules/pivotTable/useSortableColumns.js","../../src/components/PivotTable/PivotTable.js","../../src/modules/layout/layout.js","../../src/modules/layout/dimensionGetId.js","../../src/modules/layout/layoutFilterDimensions.js","../../src/modules/layout/layoutGetAllAxes.js","../../src/modules/layout/layoutGetAllDimensions.js","../../src/modules/layout/axisGetAllItems.js","../../src/modules/layout/layoutGetAllItems.js","../../src/modules/layout/item.js","../../src/modules/layout/itemGetId.js","../../src/modules/layout/layoutGetAllItemIds.js","../../src/modules/layout/axisGetDimensionIds.js","../../src/modules/layout/layoutGetAxisIdDimensionIdsObject.js","../../src/modules/layout/layoutGetDimension.js","../../src/modules/layout/layoutGetDimensionItems.js","../../src/modules/layout/axisGetDimension.js","../../src/modules/layout/axisHasDimension.js","../../src/modules/layout/layoutReplaceDimension.js","../../src/modules/layout/dimensionGetItemIds.js","../../src/modules/layout/layoutGetDimensionIdItemIdsObject.js","../../src/modules/layout/axisHasDataDimension.js","../../src/modules/layout/layoutHasDataDimension.js","../../src/modules/layout/layoutHasDimension.js","../../src/modules/layout/layoutHasDynamicDimension.js","../../src/modules/layout/axisHasPeriodDimension.js","../../src/modules/layout/layoutHasPeriodDimension.js","../../src/modules/layout/axisHasOuDimension.js","../../src/modules/layout/axisIsEmpty.js","../../src/modules/layout/dimensionCreate.js","../../src/modules/layout/itemIsValid.js","../../src/visualizations/store/validators/dhis/index.js","../../src/visualizations/store/validators/index.js","../../src/visualizations/store/adapters/dhis_highcharts/yearOnYear.js","../../src/visualizations/store/adapters/dhis_highcharts/pie.js","../../src/visualizations/store/adapters/dhis_highcharts/gauge.js","../../src/visualizations/store/adapters/dhis_highcharts/index.js","../../src/visualizations/store/adapters/dhis_dhis/singleValue.js","../../src/visualizations/store/adapters/dhis_dhis/index.js","../../src/visualizations/store/adapters/index.js","../../src/visualizations/store/index.js","../../src/visualizations/config/validators/dhis/index.js","../../src/visualizations/config/validators/index.js","../../src/visualizations/config/adapters/dhis_highcharts/type.js","../../src/visualizations/config/adapters/dhis_highcharts/chart.js","../../src/visualizations/config/adapters/dhis_highcharts/getAxisTitle.js","../../src/visualizations/config/adapters/dhis_highcharts/getCategories.js","../../src/visualizations/config/adapters/dhis_highcharts/xAxis/yearOnYear.js","../../src/visualizations/config/adapters/dhis_highcharts/xAxis/index.js","../../src/visualizations/config/adapters/dhis_highcharts/yAxis/gauge.js","../../src/visualizations/config/adapters/dhis_highcharts/optionalAxes.js","../../src/visualizations/config/adapters/dhis_highcharts/yAxis/index.js","../../src/visualizations/config/adapters/dhis_highcharts/getCumulativeData.js","../../src/visualizations/config/adapters/dhis_highcharts/series/pie.js","../../src/visualizations/config/adapters/dhis_highcharts/series/gauge.js","../../src/visualizations/util/colors/gradientColorGenerator.js","../../src/visualizations/config/adapters/dhis_highcharts/series/index.js","../../src/visualizations/config/adapters/dhis_highcharts/title/yearOverYear.js","../../src/visualizations/config/adapters/dhis_highcharts/title/index.js","../../src/visualizations/config/adapters/dhis_highcharts/subtitle/index.js","../../src/visualizations/config/adapters/dhis_highcharts/legend.js","../../src/visualizations/config/adapters/dhis_highcharts/pane/gauge.js","../../src/visualizations/config/adapters/dhis_highcharts/pane/index.js","../../src/visualizations/config/adapters/dhis_highcharts/noData.js","../../src/visualizations/config/adapters/dhis_highcharts/getStackedData.js","../../src/visualizations/config/adapters/dhis_highcharts/getSortedConfig.js","../../src/visualizations/config/adapters/dhis_highcharts/getTrimmedConfig.js","../../src/visualizations/config/adapters/dhis_highcharts/addTrendLines.js","../../src/visualizations/util/colors/themes.js","../../src/visualizations/config/adapters/dhis_highcharts/index.js","../../src/visualizations/config/adapters/dhis_dhis/title/singleValue.js","../../src/visualizations/config/adapters/dhis_dhis/title/index.js","../../src/visualizations/config/adapters/dhis_dhis/subtitle/singleValue.js","../../src/visualizations/config/adapters/dhis_dhis/subtitle/index.js","../../src/visualizations/config/adapters/dhis_dhis/index.js","../../src/visualizations/config/adapters/index.js","../../src/visualizations/config/generators/highcharts/index.js","../../src/visualizations/config/generators/dhis/singleValue.js","../../src/visualizations/config/generators/dhis/index.js","../../src/visualizations/config/generators/index.js","../../src/visualizations/config/index.js","../../src/visualizations/index.js"],"sourcesContent":["//------------------------------------------------------------------------------\n// <auto-generated>\n  // This code was generated by d2-i18n-generate.\n  //\n  // Changes to this file may cause incorrect behavior and will be lost if\n  // the code is regenerated.\n  // </auto-generated>\n//------------------------------------------------------------------------------\nimport i18n from '@dhis2/d2-i18n';\n\nimport arTranslations from './ar/translations.json';\nimport ar_IQTranslations from './ar_IQ/translations.json';\nimport daTranslations from './da/translations.json';\nimport enTranslations from './en/translations.json';\nimport esTranslations from './es/translations.json';\nimport frTranslations from './fr/translations.json';\nimport idTranslations from './id/translations.json';\nimport kmTranslations from './km/translations.json';\nimport loTranslations from './lo/translations.json';\nimport myTranslations from './my/translations.json';\nimport nbTranslations from './nb/translations.json';\nimport prsTranslations from './prs/translations.json';\nimport psTranslations from './ps/translations.json';\nimport ptTranslations from './pt/translations.json';\nimport pt_BRTranslations from './pt_BR/translations.json';\nimport ruTranslations from './ru/translations.json';\nimport svTranslations from './sv/translations.json';\nimport tetTranslations from './tet/translations.json';\nimport tgTranslations from './tg/translations.json';\nimport ukTranslations from './uk/translations.json';\nimport urTranslations from './ur/translations.json';\nimport viTranslations from './vi/translations.json';\nimport zhTranslations from './zh/translations.json';\nimport zh_CNTranslations from './zh_CN/translations.json';\n\nconst namespace = 'default';\ni18n.addResources('ar', namespace, arTranslations);\ni18n.addResources('ar_IQ', namespace, ar_IQTranslations);\ni18n.addResources('da', namespace, daTranslations);\ni18n.addResources('en', namespace, enTranslations);\ni18n.addResources('es', namespace, esTranslations);\ni18n.addResources('fr', namespace, frTranslations);\ni18n.addResources('id', namespace, idTranslations);\ni18n.addResources('km', namespace, kmTranslations);\ni18n.addResources('lo', namespace, loTranslations);\ni18n.addResources('my', namespace, myTranslations);\ni18n.addResources('nb', namespace, nbTranslations);\ni18n.addResources('prs', namespace, prsTranslations);\ni18n.addResources('ps', namespace, psTranslations);\ni18n.addResources('pt', namespace, ptTranslations);\ni18n.addResources('pt_BR', namespace, pt_BRTranslations);\ni18n.addResources('ru', namespace, ruTranslations);\ni18n.addResources('sv', namespace, svTranslations);\ni18n.addResources('tet', namespace, tetTranslations);\ni18n.addResources('tg', namespace, tgTranslations);\ni18n.addResources('uk', namespace, ukTranslations);\ni18n.addResources('ur', namespace, urTranslations);\ni18n.addResources('vi', namespace, viTranslations);\ni18n.addResources('zh', namespace, zhTranslations);\ni18n.addResources('zh_CN', namespace, zh_CNTranslations);\n\nexport default i18n;\n","import React from 'react'\nimport PropTypes from 'prop-types'\n\nconst ItemIcon = ({ backgroundColor }) => {\n    return (\n        <div>\n            <style jsx>{`\n                div {\n                    background-color: ${backgroundColor};\n                    min-height: 6px;\n                    min-width: 6px;\n                    margin: 0px 5px;\n                }\n            `}</style>\n        </div>\n    )\n}\n\nItemIcon.propTypes = {\n    backgroundColor: PropTypes.string,\n}\n\nexport default ItemIcon\n","import { colors, theme } from '@dhis2/ui-core'\nimport css from 'styled-jsx/css'\n\nexport default css`\n    .highlighted-text {\n        color: ${colors.white};\n    }\n\n    .item {\n        align-items: center;\n        border-radius: 4px;\n        cursor: pointer;\n        display: flex;\n        padding: 3px;\n    }\n\n    .unselected-item:hover {\n        background-color: #e0e0e0;\n    }\n\n    .highlighted-item {\n        background-color: ${theme.secondary800};\n    }\n\n    .item-label {\n        font-size: 14px;\n        padding: 2px 5px 2px 2px;\n    }\n`\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport cx from 'classnames'\n\nimport ItemIcon from './ItemIcon'\nimport { colors } from '@dhis2/ui-core'\nimport styles from './styles/UnselectedItem.style'\n\nconst onClickWrapper = ({ id, index, onClick }) => event =>\n    onClick({\n        isCtrlPressed: event.metaKey || event.ctrlKey,\n        isShiftPressed: event.shiftKey,\n        index,\n        id,\n    })\n\nexport const Item = ({ name, highlighted, ...rest }) => {\n    return (\n        <div\n            className={cx('item', {\n                'highlighted-item': highlighted,\n                'unselected-item': !highlighted,\n            })}\n            onClick={onClickWrapper(rest)}\n            data-test={`dimension-item-${rest.id}`}\n        >\n            <ItemIcon backgroundColor={colors.grey500} />\n            <span\n                className={cx('item-label', {\n                    'highlighted-text': highlighted,\n                })}\n            >\n                {name}\n            </span>\n            <style jsx>{styles}</style>\n        </div>\n    )\n}\n\nItem.defualtProps = {\n    onClick: () => null,\n}\n\nItem.propTypes = {\n    highlighted: PropTypes.bool.isRequired,\n    id: PropTypes.string.isRequired,\n    index: PropTypes.number.isRequired,\n    name: PropTypes.string.isRequired,\n    onClick: PropTypes.func,\n}\n\nexport default Item\n","import { colors } from '@dhis2/ui-core'\nimport css from 'styled-jsx/css'\n\nexport default css`\n    .arrow-button {\n        background-color: transparent;\n        border: 1px solid #d5dde5;\n        border-radius: 4px;\n        height: 36px;\n        min-height: 36px;\n        min-width: 40px;\n        padding: 0;\n        width: 40px;\n    }\n\n    .arrow-button:focus {\n        outline: none;\n    }\n\n    .arrow-button:active:focus {\n        background-color: rgba(158, 158, 158, 0.18);\n    }\n\n    .arrow-button:hover {\n        cursor: pointer;\n        background-color: rgba(158, 158, 158, 0.07);\n    }\n\n    .arrow-icon {\n        fill: ${colors.grey700};\n        height: 20px;\n        width: 24px;\n    }\n`\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport ArrowForward from '@material-ui/icons/ArrowForward'\nimport ArrowBack from '@material-ui/icons/ArrowBack'\n\nimport styles from './styles/ArrowButton.style'\n\nexport const ArrowButton = ({ onClick, iconType }) => (\n    <button className=\"arrow-button\" onClick={onClick}>\n        <span className=\"arrow-icon\">\n            {iconType === 'arrowForward' ? <ArrowForward /> : <ArrowBack />}\n        </span>\n        <style jsx>{styles}</style>\n    </button>\n)\n\nArrowButton.propTypes = {\n    iconType: PropTypes.string,\n    onClick: PropTypes.func,\n}\n\nexport default ArrowButton\n","export const toggler = ({\n    id,\n    isCtrlPressed,\n    isShiftPressed,\n    index,\n    lastClickedIndex,\n    highlightedIds,\n    items,\n}) => {\n    let ids\n    let newIndex = lastClickedIndex\n\n    if (!isCtrlPressed && !isShiftPressed) {\n        ids = [id]\n        newIndex = index\n    } else if (isShiftPressed) {\n        const minIndex = getMinIndex(lastClickedIndex, index)\n        const maxIndex = getMaxIndex(lastClickedIndex, index)\n\n        ids = mergeIds({ highlightedIds, items, minIndex, maxIndex })\n    } else {\n        const newArr = updateArray({\n            highlightedIds,\n            id,\n            lastClickedIndex,\n            index,\n        })\n        ids = newArr.ids\n        newIndex = newArr.newIndex\n    }\n\n    const orderedIds = items.filter(item => ids.includes(item))\n\n    return {\n        ids: orderedIds,\n        lastClickedIndex: newIndex,\n    }\n}\n\nconst getMinIndex = (lastClickedIndex, index) =>\n    lastClickedIndex > index ? index : lastClickedIndex\n\nconst getMaxIndex = (lastClickedIndex, index) =>\n    lastClickedIndex < index ? index : lastClickedIndex\n\nconst mergeIds = ({ highlightedIds, items, minIndex, maxIndex }) =>\n    highlightedIds.length\n        ? items\n              .slice(minIndex, maxIndex + 1)\n              .filter(id => !highlightedIds.includes(id))\n              .concat(highlightedIds)\n        : items.slice(minIndex, maxIndex + 1)\n\nconst updateArray = ({ highlightedIds, id, lastClickedIndex, index }) => {\n    let ids\n    let newIndex = lastClickedIndex\n\n    const idIndex = highlightedIds.findIndex(\n        highlightedId => highlightedId === id\n    )\n\n    if (idIndex >= 0) {\n        ids = highlightedIds\n            .slice(0, idIndex)\n            .concat(highlightedIds.slice(idIndex + 1))\n    } else {\n        ids = [...highlightedIds, id]\n        newIndex = index\n    }\n\n    return {\n        ids,\n        newIndex,\n    }\n}\n","import React, { Component, Fragment } from 'react'\nimport PropTypes from 'prop-types'\nimport i18n from '@dhis2/d2-i18n'\nimport { Button } from '@dhis2/ui-core'\nimport throttle from 'lodash/throttle'\n\nimport Item from './widgets/UnselectedItem'\nimport { ArrowButton as AssignButton } from './widgets/ArrowButton'\nimport { toggler } from './modules/toggler'\nimport styles from './styles/UnselectedItems.style'\n\nexport class UnselectedItems extends Component {\n    constructor(props) {\n        super(props)\n        this.scrolElRef = React.createRef()\n    }\n\n    state = { highlighted: [], lastClickedIndex: 0 }\n\n    onSelectClick = () => {\n        this.props.onSelect(this.state.highlighted)\n        this.setState({ highlighted: [] })\n    }\n\n    onSelectAllClick = () => {\n        this.props.onSelect(this.props.items.map(i => i.id))\n        this.setState({ highlighted: [] })\n    }\n\n    onDoubleClickItem = id => {\n        const highlighted = this.state.highlighted.filter(\n            dataDimId => dataDimId !== id\n        )\n\n        this.setState({ highlighted })\n        this.props.onSelect([id])\n    }\n\n    filterTextContains = displayName =>\n        displayName.toLowerCase().includes(this.props.filterText.toLowerCase())\n\n    filterItems = (item, index) =>\n        this.filterTextContains(item.name)\n            ? this.renderListItem(item, index)\n            : null\n\n    toggleHighlight = ({ isCtrlPressed, isShiftPressed, index, id }) => {\n        const newState = toggler({\n            id,\n            isCtrlPressed,\n            isShiftPressed,\n            index,\n            lastClickedIndex: this.state.lastClickedIndex,\n            highlightedIds: this.state.highlighted,\n            items: this.props.items.map(item => item.id),\n        })\n\n        this.setState({\n            highlighted: newState.ids,\n            lastClickedIndex: newState.lastClickedIndex,\n        })\n    }\n\n    renderListItem = (dataDim, index) => (\n        <li\n            className=\"unselected-list-item\"\n            key={dataDim.id}\n            onDoubleClick={() => this.onDoubleClickItem(dataDim.id)}\n        >\n            <Item\n                id={dataDim.id}\n                index={index}\n                name={dataDim.name}\n                highlighted={!!this.state.highlighted.includes(dataDim.id)}\n                onClick={this.toggleHighlight}\n            />\n            <style jsx>{styles}</style>\n        </li>\n    )\n\n    requestMoreItems = throttle(() => {\n        const node = this.scrolElRef.current\n\n        if (node) {\n            const bottom =\n                node.scrollHeight - node.scrollTop === node.clientHeight\n            if (bottom) {\n                this.props.requestMoreItems()\n            }\n        }\n    }, 1000)\n\n    render = () => {\n        const listItems = this.props.items.map((item, index) =>\n            this.props.filterText.length\n                ? this.filterItems(item, index)\n                : this.renderListItem(item, index)\n        )\n\n        return (\n            <Fragment>\n                <div\n                    ref={this.scrolElRef}\n                    onScroll={this.requestMoreItems}\n                    className=\"unselected-list-container\"\n                >\n                    <ul className=\"unselected-list\">{listItems}</ul>\n                </div>\n                <div className=\"select-all-button\">\n                    <Button onClick={this.onSelectAllClick}>\n                        {i18n.t('Select all')}\n                    </Button>\n                </div>\n                <div className=\"select-highlighted-button\">\n                    <AssignButton\n                        onClick={this.onSelectClick}\n                        iconType={'arrowForward'}\n                    />\n                </div>\n                <style jsx>{styles}</style>\n            </Fragment>\n        )\n    }\n}\n\nUnselectedItems.propTypes = {\n    items: PropTypes.arrayOf(\n        PropTypes.shape({\n            id: PropTypes.string.isRequired,\n            name: PropTypes.string.isRequired,\n        })\n    ).isRequired,\n    onSelect: PropTypes.func.isRequired,\n    filterText: PropTypes.string,\n    requestMoreItems: PropTypes.func,\n}\n\nUnselectedItems.defaultProps = {\n    requestMoreItems: () => null,\n    filterText: '',\n}\n\nexport default UnselectedItems\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport DeselectIcon from '@material-ui/icons/Close'\nimport styles from './styles/DeselectIconButton.style'\n\nexport const DeselectIconButton = ({ fill, onClick }) => {\n    const iconStyle = {\n        height: '13px',\n        width: '10px',\n        fill,\n    }\n\n    return (\n        <button\n            className=\"deselect-icon-button\"\n            onClick={e => {\n                e.stopPropagation()\n                onClick()\n            }}\n        >\n            <span>\n                <DeselectIcon style={iconStyle} />\n            </span>\n            <style jsx>{styles}</style>\n        </button>\n    )\n}\n\nDeselectIconButton.propTypes = {\n    fill: PropTypes.string.isRequired,\n    onClick: PropTypes.func.isRequired,\n}\n\nexport default DeselectIconButton\n","import { colors, theme } from '@dhis2/ui-core'\nimport css from 'styled-jsx/css'\n\nexport default css`\n    .highlighted-text {\n        color: ${colors.white};\n    }\n\n    .icon {\n        background-color: ${theme.secondary600};\n    }\n\n    .item {\n        align-items: center;\n        border-radius: 4px;\n        cursor: pointer;\n        display: flex;\n        padding: 3px;\n    }\n\n    .ghost {\n        opacity: 0.2;\n        transition: opacity 0.2s ease;\n    }\n\n    .selected-item {\n        background-color: ${theme.secondary200};\n    }\n\n    .selected-item:hover {\n        background-color: #86c4bf;\n    }\n\n    .highlighted-item {\n        background-color: ${theme.secondary800};\n    }\n\n    .inactive-item {\n        opacity: 0.3;\n    }\n\n    .item-label {\n        font-size: 14px;\n        padding: 2px;\n    }\n`\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport cx from 'classnames'\n\nimport ItemIcon from './ItemIcon'\nimport DeselectIconButton from './DeselectIconButton'\nimport { colors, theme } from '@dhis2/ui-core'\nimport styles from './styles/SelectedItem.style'\n\nconst onClickWrapper = ({ id, index, onClick }) => event =>\n    onClick({\n        isCtrlPressed: event.metaKey || event.ctrlKey,\n        isShiftPressed: event.shiftKey,\n        index,\n        id,\n    })\n\nexport const Item = ({\n    name,\n    highlighted,\n    ghost,\n    active,\n    onRemoveItem,\n    ...rest\n}) => {\n    return (\n        <div\n            className={cx('item', {\n                'highlighted-item': highlighted,\n                ghost,\n                'selected-item': !highlighted,\n                'inactive-item': !active,\n            })}\n            onClick={onClickWrapper(rest)}\n            data-test={`dimension-item-${rest.id}`}\n        >\n            <ItemIcon\n                backgroundColor={\n                    highlighted ? colors.white : theme.secondary600\n                }\n            />\n            <span\n                className={cx('item-label', {\n                    'highlighted-text': highlighted,\n                })}\n            >\n                {name}\n            </span>\n            <DeselectIconButton\n                fill={highlighted ? colors.white : theme.secondary600}\n                onClick={() => onRemoveItem(rest.id)}\n            />\n            <style jsx>{styles}</style>\n        </div>\n    )\n}\n\nItem.defaultProps = {\n    active: true,\n    onRemoveItem: () => null,\n    onClick: () => null,\n}\n\nItem.propTypes = {\n    highlighted: PropTypes.bool.isRequired,\n    id: PropTypes.string.isRequired,\n    index: PropTypes.number.isRequired,\n    name: PropTypes.string.isRequired,\n    active: PropTypes.bool,\n    ghost: PropTypes.bool,\n    onClick: PropTypes.func,\n    onRemoveItem: PropTypes.func,\n}\n\nexport default Item\n","import sortBy from 'lodash/sortBy'\n\nexport const reorderList = ({\n    items,\n    highlightedItemIds,\n    destinationIndex,\n    sourceIndex,\n    draggableId,\n    isMultiDrag,\n}) => {\n    const list = Array.from(items.map(item => item.id))\n\n    if (isMultiDrag) {\n        const indexedItemsToMove = sortBy(\n            highlightedItemIds.map(highlightedItemId => ({\n                item: highlightedItemId,\n                idx: items.map(item => item.id).indexOf(highlightedItemId),\n            })),\n            'idx'\n        )\n\n        const highlightedAboveDestination = indexedItemsToMove.filter(\n            item => item.idx < destinationIndex\n        )\n\n        const newDestinationIndex =\n            destinationIndex - highlightedAboveDestination.length\n\n        indexedItemsToMove.forEach(indexed => {\n            const idx = list.indexOf(indexed.item)\n            list.splice(idx, 1)\n        })\n\n        indexedItemsToMove.forEach((indexed, i) => {\n            list.splice(newDestinationIndex + i, 0, indexed.item)\n        })\n    } else {\n        list.splice(sourceIndex, 1)\n        list.splice(destinationIndex, 0, draggableId)\n    }\n\n    return list\n}\n","import { colors } from '@dhis2/ui-core'\nimport css from 'styled-jsx/css'\n\nexport default css`\n    .selected-list {\n        flex: 1;\n        list-style: none;\n        margin: 0 6px;\n        overflow-y: auto;\n        padding-left: 0px;\n        user-select: none;\n    }\n\n    .selected-list-item {\n        display: flex;\n        margin: 2px;\n    }\n\n    .selected-list-item:focus {\n        outline: none;\n    }\n\n    .subtitle-container {\n        border-bottom: 1px solid ${colors.grey300};\n        height: 42px;\n    }\n\n    .subtitle-text {\n        color: ${colors.grey900};\n        height: 20px;\n        font-family: Roboto;\n        font-size: 15px;\n        font-weight: 500;\n        left: 8px;\n        position: relative;\n        top: 12px;\n    }\n\n    .info-container {\n        display: flex;\n        margin: 8px;\n        padding: 8px;\n        background-color: #e8edf2;\n        border-radius: 4px;\n    }\n\n    .info-text {\n        padding-left: 6px;\n        color: #4a5768;\n        font-size: 12px;\n        line-height: 17px;\n    }\n\n    .info-icon {\n        font-size: 16px;\n        color: #4a5768;\n    }\n\n    .deselect-all-button {\n        display: block;\n        margin: 0 auto;\n        padding: 5px;\n    }\n\n    .deselect-highlighted-button {\n        left: -48px;\n        position: absolute;\n        top: 291px;\n    }\n`\n","import React, { Component, Fragment } from 'react'\nimport PropTypes from 'prop-types'\nimport i18n from '@dhis2/d2-i18n'\nimport InfoIcon from '@material-ui/icons/InfoOutlined'\nimport { DragDropContext, Droppable, Draggable } from 'react-beautiful-dnd'\nimport { colors, Button } from '@dhis2/ui-core'\n\nimport Item from './widgets/SelectedItem'\nimport { ArrowButton as UnAssignButton } from './widgets/ArrowButton'\nimport { toggler } from './modules/toggler'\nimport { reorderList } from './modules/reorderList'\nimport styles from './styles/SelectedItems.style'\n\nconst Subtitle = () => (\n    <div className=\"subtitle-container\">\n        <span className=\"subtitle-text\">{i18n.t('Selected Data')}</span>\n        <style jsx>{styles}</style>\n    </div>\n)\n\nconst InfoBox = ({ message }) => (\n    <div className=\"info-container\">\n        <InfoIcon style={{ fontSize: 16, color: colors.grey600 }} />\n        <span className=\"info-text\">{message}</span>\n        <style jsx>{styles}</style>\n    </div>\n)\n\nconst ItemsList = ({ innerRef, children }) => (\n    <ul className=\"selected-list\" ref={innerRef}>\n        {children}\n        <style jsx>{styles}</style>\n    </ul>\n)\n\nconst CLONE_INDEX = 9999 // a high number to not influence the actual item list\n\nexport class SelectedItems extends Component {\n    state = { highlighted: [], lastClickedIndex: 0, draggingId: null }\n\n    onDeselectHighlighted = () => {\n        this.props.onDeselect(this.state.highlighted)\n        this.setState({ highlighted: [] })\n    }\n\n    onDeselectOne = id => {\n        const highlighted = this.state.highlighted.filter(\n            highlightedId => highlightedId !== id\n        )\n\n        this.props.onDeselect([id])\n        this.setState({ highlighted })\n    }\n\n    onDeselectAll = () => {\n        this.props.onDeselect(this.props.items.map(item => item.id))\n        this.setState({ highlighted: [] })\n    }\n\n    toggleHighlight = ({ isCtrlPressed, isShiftPressed, index, id }) => {\n        const newState = toggler({\n            id,\n            isCtrlPressed,\n            isShiftPressed,\n            index,\n            lastClickedIndex: this.state.lastClickedIndex,\n            highlightedIds: this.state.highlighted,\n            items: this.props.items.map(item => item.id),\n        })\n\n        this.setState({\n            highlighted: newState.ids,\n            lastClickedIndex: newState.lastClickedIndex,\n        })\n    }\n\n    isMultiDrag = draggableId => {\n        return (\n            this.state.highlighted.includes(draggableId) &&\n            this.state.highlighted.length > 1\n        )\n    }\n\n    onDragStart = start => {\n        const id = start.draggableId\n        const selected = this.state.highlighted.find(itemId => itemId === id)\n\n        // if dragging an item that is not highlighted, unhighlight all items\n        if (!selected) {\n            this.setState({ highlighted: [] })\n        }\n\n        this.setState({ draggingId: start.draggableId })\n    }\n\n    onDragEnd = ({ destination, source, draggableId }) => {\n        this.setState({ draggingId: null })\n\n        if (destination === null) {\n            return\n        }\n\n        if (\n            destination.draggableId === source.draggableId &&\n            destination.index === source.index\n        ) {\n            return\n        }\n\n        const newList = reorderList({\n            destinationIndex: destination.index,\n            sourceIndex: source.index,\n            draggableId,\n            isMultiDrag: this.isMultiDrag(draggableId),\n            items: this.props.items,\n            highlightedItemIds: this.state.highlighted,\n        })\n\n        this.props.onReorder(newList)\n    }\n\n    renderListItem = ({ id, name, isActive }, index) => (\n        <Draggable draggableId={id} index={index} key={id}>\n            {(provided, snapshot) => {\n                const isDraggedItem =\n                    snapshot.isDragging &&\n                    this.state.highlighted.length > 1 &&\n                    this.state.highlighted.includes(this.state.draggingId)\n\n                const ghost =\n                    this.state.highlighted.includes(id) &&\n                    Boolean(this.state.draggingId) &&\n                    this.state.draggingId !== id\n\n                const itemText = isDraggedItem\n                    ? `${this.state.highlighted.length} items`\n                    : name\n\n                return (\n                    <li\n                        className=\"selected-list-item\"\n                        id={id}\n                        onDoubleClick={() => this.onDeselectOne(id)}\n                        {...provided.draggableProps}\n                        {...provided.dragHandleProps}\n                        ref={provided.innerRef}\n                    >\n                        <Item\n                            id={id}\n                            index={index}\n                            name={itemText}\n                            highlighted={!!this.state.highlighted.includes(id)}\n                            active={isActive}\n                            onRemoveItem={this.onDeselectOne}\n                            onClick={this.toggleHighlight}\n                            ghost={ghost}\n                        />\n                        <style jsx>{styles}</style>\n                    </li>\n                )\n            }}\n        </Draggable>\n    )\n\n    renderCloneItem = ({ id, name }, index) => {\n        const cloneId = `${id}-clone`\n        return (\n            <Draggable draggableId={cloneId} index={index} key={cloneId}>\n                {provided => (\n                    <li\n                        className=\"selected-list-item\"\n                        id={cloneId}\n                        {...provided.draggableProps}\n                        {...provided.dragHandleProps}\n                        ref={provided.innerRef}\n                    >\n                        <Item\n                            id={cloneId}\n                            index={CLONE_INDEX}\n                            name={name}\n                            highlighted={!!this.state.highlighted.includes(id)}\n                            selected\n                            ghost\n                        />\n                        <style jsx>{styles}</style>\n                    </li>\n                )}\n            </Draggable>\n        )\n    }\n\n    getItemListWithClone = () => {\n        const list = []\n\n        this.props.items.forEach(item => {\n            list.push(item)\n\n            const isDraggedItem =\n                this.isMultiDrag(this.state.draggingId) &&\n                this.state.draggingId === item.id\n\n            if (isDraggedItem) {\n                list.push({\n                    id: item.id,\n                    name: item.name,\n                    isActive: item.isActive,\n                    clone: true,\n                })\n            }\n        })\n\n        return list\n    }\n\n    render = () => {\n        const itemList = this.getItemListWithClone().map((item, i) =>\n            item.clone\n                ? this.renderCloneItem(item, i)\n                : this.renderListItem(item, i)\n        )\n\n        return (\n            <Fragment>\n                <Subtitle />\n                {this.props.infoBoxMessage ? (\n                    <InfoBox message={this.props.infoBoxMessage} />\n                ) : null}\n                <DragDropContext\n                    onDragStart={this.onDragStart}\n                    onDragEnd={this.onDragEnd}\n                >\n                    <Droppable droppableId=\"selected-items-droppable\">\n                        {provided => (\n                            <ItemsList\n                                innerRef={provided.innerRef}\n                                {...provided.droppableProps}\n                            >\n                                {itemList}\n                                {provided.placeholder}\n                            </ItemsList>\n                        )}\n                    </Droppable>\n                </DragDropContext>\n                <div className=\"deselect-all-button\">\n                    <Button onClick={this.onDeselectAll}>\n                        {i18n.t('Deselect All')}\n                    </Button>\n                </div>\n                <div className=\"deselect-highlighted-button\">\n                    <UnAssignButton\n                        onClick={this.onDeselectHighlighted}\n                        iconType={'arrowBack'}\n                    />\n                </div>\n                <style jsx>{styles}</style>\n            </Fragment>\n        )\n    }\n}\n\nInfoBox.propTypes = {\n    message: PropTypes.string,\n}\n\nItemsList.propTypes = {\n    children: PropTypes.array,\n    innerRef: PropTypes.func,\n}\n\nSelectedItems.propTypes = {\n    items: PropTypes.array.isRequired,\n    onDeselect: PropTypes.func.isRequired,\n    onReorder: PropTypes.func.isRequired,\n    infoBoxMessage: PropTypes.string,\n}\n\nexport default SelectedItems\n","import { colors } from '@dhis2/ui-core'\nimport css from 'styled-jsx/css'\n\nexport default css`\n    .item-selector-container {\n        box-sizing: border-box;\n        display: flex;\n        flex: 1 1 auto;\n        font-family: Roboto, sans-serif;\n    }\n    .section {\n        border: 1px solid ${colors.grey300};\n        display: flex;\n        flex-direction: column;\n        height: 480px;\n        position: relative;\n    }\n    .unselected {\n        margin-right: 55px;\n        width: 418px;\n    }\n    .selected {\n        width: 276px;\n    }\n`\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport cx from 'classnames'\n\nimport UnselectedItems from './UnselectedItems'\nimport SelectedItems from './SelectedItems'\nimport styles from './styles/ItemSelector.style'\n\nclass ItemSelector extends Component {\n    render() {\n        const { unselected, selected, children: filterZone } = this.props\n\n        return (\n            <div className=\"item-selector-container\">\n                <div className={cx('section', 'unselected')}>\n                    {filterZone}\n                    <UnselectedItems {...unselected} />\n                </div>\n                <div className={cx('section', 'selected')}>\n                    <SelectedItems {...selected} />\n                </div>\n                <style jsx>{styles}</style>\n            </div>\n        )\n    }\n}\n\nItemSelector.propTypes = {\n    children: PropTypes.object,\n    selected: PropTypes.shape({\n        items: PropTypes.arrayOf(\n            PropTypes.shape({\n                id: PropTypes.string.isRequired,\n                name: PropTypes.string.isRequired,\n                isActive: PropTypes.bool,\n            })\n        ).isRequired,\n        onDeselect: PropTypes.func.isRequired,\n        onReorder: PropTypes.func.isRequired,\n        dialogId: PropTypes.string,\n        infoBoxMessage: PropTypes.string,\n    }),\n    unselected: PropTypes.shape({\n        items: PropTypes.arrayOf(\n            PropTypes.shape({\n                id: PropTypes.string.isRequired,\n                name: PropTypes.string.isRequired,\n            })\n        ).isRequired,\n        onSelect: PropTypes.func.isRequired,\n        filterText: PropTypes.string,\n        requestMoreItems: PropTypes.func,\n    }),\n}\n\nexport default ItemSelector\n","import i18n from '@dhis2/d2-i18n'\n\nexport const REPORTING_RATE = 'REPORTING_RATE'\nexport const REPORTING_RATE_ON_TIME = 'REPORTING_RATE_ON_TIME'\nexport const ACTUAL_REPORTS = 'ACTUAL_REPORTS'\nexport const ACTUAL_REPORTS_ON_TIME = 'ACTUAL_REPORTS_ON_TIME'\nexport const EXPECTED_REPORTS = 'EXPECTED_REPORTS'\n\nexport const DATA_SETS_CONSTANTS = [\n    {\n        id: REPORTING_RATE,\n        getName: () => i18n.t('Reporting rate'),\n    },\n    {\n        id: REPORTING_RATE_ON_TIME,\n        getName: () => i18n.t('Reporting rate on time'),\n    },\n    {\n        id: ACTUAL_REPORTS,\n        getName: () => i18n.t('Actual reports'),\n    },\n    {\n        id: ACTUAL_REPORTS_ON_TIME,\n        getName: () => i18n.t('Actual reports on time'),\n    },\n    {\n        id: EXPECTED_REPORTS,\n        getName: () => i18n.t('Expected reports'),\n    },\n]\n","import i18n from '@dhis2/d2-i18n'\n\nimport { DATA_SETS_CONSTANTS } from '../modules/dataSets'\n\nexport const CHART_AGGREGATE_AGGREGATABLE_TYPES = [\n    'BOOLEAN',\n    'TRUE_ONLY',\n    'INTEGER',\n    'INTEGER_POSITIVE',\n    'INTEGER_NEGATIVE',\n    'INTEGER_ZERO_OR_POSITIVE',\n    'NUMBER',\n    'UNIT_INTERVAL',\n    'PERCENTAGE',\n]\n\nexport const ALL_ID = 'ALL'\n\nconst INDICATORS = 'indicators'\nconst DATA_ELEMENTS = 'dataElements'\nconst DATA_SETS = 'dataSets'\nconst EVENT_DATA_ITEMS = 'eventDataItems'\nconst PROGRAM_INDICATORS = 'programIndicators'\n\nexport const TOTALS = 'totals'\nexport const DETAIL = 'detail'\n\nconst getProgramText = () => i18n.t('Program')\nconst getSelectProgramText = () => i18n.t('Select a program')\n\nexport const dataTypes = {\n    [INDICATORS]: {\n        id: INDICATORS,\n        getName: () => i18n.t('Indicators'),\n        getGroupLabel: () => i18n.t('Select indicator group'),\n        defaultGroup: { id: ALL_ID, getName: () => i18n.t('[ All groups ]') },\n        groupDetail: false,\n    },\n    [DATA_ELEMENTS]: {\n        id: DATA_ELEMENTS,\n        getName: () => i18n.t('Data elements'),\n        getGroupLabel: () => i18n.t('Select data element group'),\n        defaultGroup: {\n            id: ALL_ID,\n            getName: () => i18n.t('[ All data elements ]'),\n        },\n        groupDetail: { default: TOTALS },\n    },\n    [DATA_SETS]: {\n        id: DATA_SETS,\n        getName: () => i18n.t('Data sets'),\n        getGroupLabel: () => i18n.t('Select data sets'),\n        defaultGroup: { id: ALL_ID, getName: () => i18n.t('[ All metrics ]') },\n        groupDetail: false,\n        augmentAlternatives: (alternatives, groupId) =>\n            getReportingRates(alternatives, groupId),\n    },\n    [EVENT_DATA_ITEMS]: {\n        id: EVENT_DATA_ITEMS,\n        getName: () => i18n.t('Event data items'),\n        getGroupLabel: getProgramText,\n        getPlaceholder: getSelectProgramText,\n        defaultGroup: null,\n        groupDetail: false,\n    },\n    [PROGRAM_INDICATORS]: {\n        id: PROGRAM_INDICATORS,\n        getName: () => i18n.t('Program indicators'),\n        getGroupLabel: getProgramText,\n        getPlaceholder: getSelectProgramText,\n        defaultGroup: null,\n        groupDetail: false,\n    },\n}\n\nexport function defaultGroupId(dataType) {\n    return dataTypes[dataType].defaultGroup\n        ? dataTypes[dataType].defaultGroup.id\n        : ''\n}\n\nexport function defaultGroupDetail(dataType) {\n    return dataTypes[dataType].groupDetail\n        ? dataTypes[dataType].groupDetail.default\n        : ''\n}\n\nexport const DEFAULT_DATATYPE_ID = INDICATORS\n\nconst getReportingRates = (contents, groupSetId) => {\n    let dataSets = []\n\n    if (groupSetId === ALL_ID) {\n        DATA_SETS_CONSTANTS.forEach(\n            reportingRate =>\n                (dataSets = [\n                    ...dataSets,\n                    ...contents.map(dataSet =>\n                        concatReportingRate(dataSet, reportingRate)\n                    ),\n                ])\n        )\n    } else {\n        const reportingRateIndex = DATA_SETS_CONSTANTS.find(\n            item => item.id === groupSetId\n        )\n\n        dataSets = contents.map(dataSet =>\n            concatReportingRate(dataSet, reportingRateIndex)\n        )\n    }\n\n    return dataSets\n}\n\nconst concatReportingRate = (dataSet, reportingRate) => {\n    return {\n        id: `${dataSet.id}.${reportingRate.id}`,\n        name: `${dataSet.name} (${reportingRate.getName()})`,\n    }\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport i18n from '@dhis2/d2-i18n'\nimport { SingleSelectField, SingleSelectOption } from '@dhis2/ui-core'\n\nimport { dataTypes } from '../../modules/dataTypes'\nimport styles from './styles/DataTypesSelector.style'\n\nexport const DataTypes = ({ currentDataType, onChange }) => (\n    <div className=\"container\">\n        <SingleSelectField\n            label={i18n.t('Data Type')}\n            selected={{\n                value: dataTypes[currentDataType]?.id,\n                label: dataTypes[currentDataType]?.getName(),\n            }}\n            onChange={ref => onChange(ref.selected.value)}\n            dense\n        >\n            {Object.values(dataTypes).map(type => (\n                <SingleSelectOption\n                    value={type.id}\n                    key={type.id}\n                    label={type.getName()}\n                />\n            ))}\n        </SingleSelectField>\n        <style jsx>{styles}</style>\n    </div>\n)\n\nDataTypes.propTypes = {\n    currentDataType: PropTypes.string.isRequired,\n    onChange: PropTypes.func.isRequired,\n}\n\nexport default DataTypes\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport i18n from '@dhis2/d2-i18n'\nimport { SingleSelectField, SingleSelectOption } from '@dhis2/ui-core'\nimport { TOTALS, DETAIL } from '../../modules/dataTypes'\n\nimport styles from './styles/Detail.style'\n\nconst getOptions = () => ({\n    [TOTALS]: i18n.t('Totals'),\n    [DETAIL]: i18n.t('Details'),\n})\n\nexport const Detail = ({ currentValue, onChange }) => {\n    const options = getOptions()\n    const currentLabel = options[currentValue]\n    return (\n        <div className=\"detail-container\">\n            <SingleSelectField\n                label={i18n.t('Detail')}\n                selected={\n                    currentLabel\n                        ? {\n                              value: currentValue,\n                              label: currentLabel,\n                          }\n                        : null\n                }\n                onChange={ref => onChange(ref.selected.value)}\n                dense\n            >\n                {Object.entries(options).map(option => (\n                    <SingleSelectOption\n                        value={option[0]}\n                        key={option[0]}\n                        label={option[1]}\n                    />\n                ))}\n            </SingleSelectField>\n            <style jsx>{styles}</style>\n        </div>\n    )\n}\n\nDetail.propTypes = {\n    currentValue: PropTypes.string.isRequired,\n    onChange: PropTypes.func.isRequired,\n}\n\nexport default Detail\n","import css from 'styled-jsx/css'\nimport { colors } from '@dhis2/ui-core'\n\nexport default css`\n    .container {\n        border: 1px solid ${colors.grey300};\n        display: flex;\n        min-height: 53px;\n        border-right: 0;\n        border-left: 0;\n        padding-top: 5px;\n        padding-left: 10px;\n    }\n    .group-container {\n        display: flex;\n        flex-direction: column;\n        width: inherit;\n        min-width: 294px;\n        flex-grow: 1;\n        padding-right: 5px;\n    }\n`\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { SingleSelectField, SingleSelectOption } from '@dhis2/ui-core'\n\nimport { Detail } from './Detail'\nimport { dataTypes } from '../../modules/dataTypes'\nimport styles from './styles/Groups.style'\n\nexport const Groups = ({\n    dataType,\n    detailValue,\n    groupId,\n    groups,\n    onDetailChange,\n    onGroupChange,\n}) => {\n    let optionItems = groups\n\n    if (dataTypes[dataType].defaultGroup) {\n        const { id, getName } = dataTypes[dataType].defaultGroup\n        optionItems = [{ id, name: getName() }, ...optionItems]\n    }\n\n    const groupDetail = dataTypes[dataType].groupDetail\n\n    const selected = optionItems.find(item => item.id === groupId) || {}\n\n    return (\n        <div className=\"container\">\n            <style jsx>{styles}</style>\n            <div className=\"group-container\">\n                <SingleSelectField\n                    label={dataTypes[dataType].getGroupLabel()}\n                    selected={\n                        selected.id && selected.name\n                            ? { value: selected.id, label: selected.name }\n                            : {}\n                    }\n                    placeholder={\n                        !groupId && dataTypes[dataType].getPlaceholder\n                            ? dataTypes[dataType].getPlaceholder()\n                            : null\n                    }\n                    onChange={ref => onGroupChange(ref.selected.value)}\n                    dense\n                >\n                    {optionItems.map(item => (\n                        <SingleSelectOption\n                            value={item.id}\n                            key={item.id}\n                            label={item.name}\n                        />\n                    ))}\n                </SingleSelectField>\n            </div>\n            {groupDetail && (\n                <Detail currentValue={detailValue} onChange={onDetailChange} />\n            )}\n        </div>\n    )\n}\n\nGroups.propTypes = {\n    dataType: PropTypes.string.isRequired,\n    detailValue: PropTypes.string.isRequired,\n    groupId: PropTypes.string.isRequired,\n    groups: PropTypes.array.isRequired,\n    onDetailChange: PropTypes.func.isRequired,\n    onGroupChange: PropTypes.func.isRequired,\n}\n\nexport default Groups\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { InputField } from '@dhis2/ui-core'\n\nexport const Filter = ({ text, onChange, onClear, placeholder, type }) => (\n    <InputField\n        placeholder={placeholder}\n        onChange={ref => (ref.value.length ? onChange(ref.value) : onClear())}\n        value={text}\n        dense\n        type={type}\n    />\n)\n\nFilter.propTypes = {\n    placeholder: PropTypes.string.isRequired,\n    type: PropTypes.string.isRequired,\n    onChange: PropTypes.func.isRequired,\n    onClear: PropTypes.func.isRequired,\n    text: PropTypes.string,\n}\n\nFilter.defaultProps = {\n    type: 'text',\n}\n\nexport default Filter\n","import css from 'styled-jsx/css'\nimport { colors } from '@dhis2/ui-core'\n\nexport default css`\n    .container {\n        border: 1px solid ${colors.grey300};\n        background-color: ${colors.white};\n        height: 53px;\n        border-right: 0;\n        border-left: 0;\n        border-top: 0;\n        padding: 10px 5px 10px 10px;\n    }\n`\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport i18n from '@dhis2/d2-i18n'\n\nimport Filter from './Filter/Filter'\nimport styles from './styles/FilterField.style'\n\nexport const FilterField = ({ text, onFilterTextChange, onClearFilter }) => (\n    <div className=\"container\">\n        <Filter\n            placeholder={i18n.t('Search')}\n            text={text}\n            onChange={onFilterTextChange}\n            onClear={onClearFilter}\n        />\n        <style jsx>{styles}</style>\n    </div>\n)\n\nFilterField.propTypes = {\n    text: PropTypes.string.isRequired,\n    onClearFilter: PropTypes.func.isRequired,\n    onFilterTextChange: PropTypes.func.isRequired,\n}\n\nexport default FilterField\n","// Helper functions\n\nexport const onError = error => console.log('Error: ', error)\n","import sortBy from 'lodash/sortBy'\n\nimport { onError } from './index'\nimport { DATA_SETS_CONSTANTS } from '../modules/dataSets'\nimport { CHART_AGGREGATE_AGGREGATABLE_TYPES } from '../modules/dataTypes'\n\n// Request util functions\nconst selectFromResponse = (response, entity, selectorFn) =>\n    typeof selectorFn === 'function' ? selectorFn(response) : response[entity]\n\n// Request functions\nconst request = (d2, entity, { paramString, selectorFn } = {}) => {\n    const url = `/${entity}?${paramString}&paging=false`\n\n    return d2.Api.getApi()\n        .get(url)\n        .then(response => selectFromResponse(response, entity, selectorFn))\n        .catch(onError)\n}\n\nconst requestWithPaging = (\n    d2,\n    entity,\n    { page, paramString, selectorFn } = {}\n) => {\n    const paging = `&paging=true&page=${page}`\n    const url = `/${entity}?${paramString}${paging}`\n\n    return d2.Api.getApi()\n        .get(url)\n        .then(response => ({\n            dimensionItems: selectFromResponse(response, entity, selectorFn),\n            nextPage: response.pager.nextPage ? response.pager.page + 1 : null,\n        }))\n        .catch(onError)\n}\n\n// Fetch functions\nexport const apiFetchDimensions = (d2, nameProp) => {\n    const fields = `fields=id,${nameProp}~rename(name),dimensionType,dataDimensionType`\n    const order = `order=${nameProp}:asc`\n\n    const params = `${fields}&${order}`\n\n    return request(d2, 'dimensions', { paramString: params })\n}\n\nexport const apiFetchRecommendedIds = (d2, dxIds, ouIds) => {\n    let dimensions = 'dimension='\n\n    if (dxIds.length) {\n        dimensions = dimensions.concat(`dx:${dxIds.join(';')}`)\n\n        if (ouIds.length)\n            dimensions = dimensions.concat(`&dimension=ou:${ouIds.join(';')}`)\n    } else if (ouIds.length) {\n        dimensions = dimensions.concat(`ou:${ouIds.join(';')}`)\n    } else {\n        return Promise.resolve([])\n    }\n\n    const url = `/dimensions/recommendations?${dimensions}&fields=id`\n    return d2.Api.getApi()\n        .get(url)\n        .then(response => response.dimensions.map(item => item.id))\n        .catch(onError)\n}\n\nexport const apiFetchItemsByDimension = (d2, dimensionId) => {\n    const fields = `fields=id,displayName~rename(name)`\n    const order = `order=displayName:asc`\n\n    const url = `dimensions/${dimensionId}/items?${fields}&${order}`\n\n    return d2.Api.getApi()\n        .get(url)\n        .then(response => response.items)\n}\n\nexport const apiFetchGroups = (d2, dataType, nameProp) => {\n    // indicatorGroups does not support shortName\n    const name = dataType === 'indicators' ? 'displayName' : nameProp\n    const fields = `fields=id,${name}~rename(name)`\n    const order = `order=${name}:asc`\n\n    const params = `${fields}&${order}`\n\n    switch (dataType) {\n        case 'indicators': {\n            return request(d2, 'indicatorGroups', { paramString: params })\n        }\n        case 'dataElements': {\n            return request(d2, 'dataElementGroups', { paramString: params })\n        }\n        case 'dataSets': {\n            const dataSetGroups = DATA_SETS_CONSTANTS.map(\n                ({ id, getName }) => ({\n                    id,\n                    name: getName(),\n                })\n            )\n            return Promise.resolve(dataSetGroups)\n        }\n        case 'eventDataItems':\n        case 'programIndicators': {\n            return request(d2, 'programs', { paramString: params })\n        }\n        default:\n            return null\n    }\n}\n\nexport const apiFetchAlternatives = args => {\n    const { d2, dataType, groupDetail, ...queryParams } = args\n\n    switch (dataType) {\n        case 'indicators': {\n            return fetchIndicators({ d2, ...queryParams })\n        }\n        case 'dataElements': {\n            if (groupDetail === 'detail') {\n                return fetchDataElementOperands({ d2, ...queryParams })\n            } else {\n                return fetchDataElements({ d2, ...queryParams })\n            }\n        }\n        case 'dataSets': {\n            return fetchDataSets({ d2, ...queryParams })\n        }\n        case 'eventDataItems': {\n            return queryParams.groupId\n                ? getEventDataItems({ d2, ...queryParams })\n                : null\n        }\n        case 'programIndicators': {\n            return queryParams.groupId\n                ? fetchProgramIndicators({ d2, ...queryParams })\n                : null\n        }\n        default:\n            return null\n    }\n}\n\nconst fetchIndicators = ({ d2, nameProp, groupId, filterText, page }) => {\n    const fields = `fields=id,${nameProp}~rename(name),dimensionItemType&order=${nameProp}:asc`\n    const order = `order=${nameProp}:asc`\n    let filter =\n        groupId !== 'ALL' ? `&filter=indicatorGroups.id:eq:${groupId}` : ''\n\n    if (filterText) {\n        filter = filter.concat(`&filter=${nameProp}:ilike:${filterText}`)\n    }\n\n    const paramString = `${fields}&${order}${filter}`\n\n    return requestWithPaging(d2, 'indicators', { paramString, page })\n}\n\nconst fetchDataElements = ({ d2, groupId, page, filterText, nameProp }) => {\n    const idField = groupId === 'ALL' ? 'id' : 'dimensionItem~rename(id)'\n    const fields = `fields=${idField},${nameProp}~rename(name)`\n    const order = `order=${nameProp}:asc`\n\n    let filter = '&filter=domainType:eq:AGGREGATE'\n    if (groupId !== 'ALL') {\n        filter = filter.concat(`&filter=dataElementGroups.id:eq:${groupId}`)\n    }\n\n    if (filterText) {\n        filter = filter.concat(`&filter=${nameProp}:ilike:${filterText}`)\n    }\n\n    const paramString = `${fields}&${order}${filter}`\n\n    return requestWithPaging(d2, 'dataElements', { paramString, page })\n}\n\nconst fetchDataElementOperands = ({\n    d2,\n    groupId,\n    page,\n    filterText,\n    nameProp,\n}) => {\n    const idField = groupId === 'ALL' ? 'id' : 'dimensionItem~rename(id)'\n    const fields = `fields=${idField},${nameProp}~rename(name)`\n    const order = `order=${nameProp}:asc`\n\n    let filter = ''\n    if (groupId !== 'ALL') {\n        filter = `&filter=dataElement.dataElementGroups.id:eq:${groupId}`\n    }\n\n    if (filterText) {\n        const textFilter = `&filter=${nameProp}:ilike:${filterText}`\n        filter = filter.length ? filter.concat(textFilter) : textFilter\n    }\n\n    return requestWithPaging(d2, 'dataElementOperands', {\n        paramString: `${fields}&${order}${filter}`,\n        page,\n    })\n}\n\nconst fetchDataSets = ({ d2, page, filterText, nameProp }) => {\n    const fields = `fields=dimensionItem~rename(id),${nameProp}~rename(name)`\n    const order = `order=${nameProp}:asc`\n    const filter = filterText ? `&filter=${nameProp}:ilike:${filterText}` : ''\n\n    const paramString = `${fields}&${order}${filter}`\n\n    return requestWithPaging(d2, 'dataSets', { paramString, page })\n}\n\nconst fetchProgramDataElements = ({\n    d2,\n    groupId,\n    page,\n    filterText,\n    nameProp,\n}) => {\n    const fields = `fields=dimensionItem~rename(id),${nameProp}~rename(name),valueType`\n    const order = `order=${nameProp}:asc`\n    const program = `program=${groupId}`\n    const filter = filterText ? `&filter=${nameProp}:ilike:${filterText}` : ''\n\n    const paramString = `${fields}&${order}&${program}${filter}`\n\n    return requestWithPaging(d2, 'programDataElements', { paramString, page })\n}\n\nconst fetchTrackedEntityAttributes = ({\n    d2,\n    groupId,\n    filterText,\n    nameProp,\n}) => {\n    const fields = `fields=${nameProp}~rename(name),programTrackedEntityAttributes[trackedEntityAttribute[id,${nameProp}~rename(name),valueType]]`\n    const filter = filterText ? `&filter=${nameProp}:ilike:${filterText}` : ''\n\n    const paramString = `${fields}${filter}`\n\n    return request(d2, `programs/${groupId}`, {\n        paramString,\n        selectorFn: r =>\n            Array.isArray(r.programTrackedEntityAttributes)\n                ? r.programTrackedEntityAttributes\n                      .map(a => a.trackedEntityAttribute)\n                      .map(a => ({\n                          ...a,\n                          id: `${groupId}.${a.id}`,\n                          name: `${r.name} ${a.name}`,\n                      }))\n                : [],\n    })\n}\n\nconst getEventDataItems = async (d2, queryParams) => {\n    const [dataElementsObj, attributes] = await Promise.all([\n        fetchProgramDataElements(d2, queryParams),\n        fetchTrackedEntityAttributes(d2, queryParams),\n    ])\n\n    const filterInvalidTypes = item =>\n        Boolean(CHART_AGGREGATE_AGGREGATABLE_TYPES.includes(item.valueType))\n\n    return {\n        ...dataElementsObj,\n        dimensionItems: sortBy(\n            [...dataElementsObj.dimensionItems, ...attributes].filter(\n                filterInvalidTypes\n            ),\n            'name'\n        ),\n    }\n}\n\nconst fetchProgramIndicators = ({\n    d2,\n    groupId,\n    page,\n    filterText,\n    nameProp,\n}) => {\n    const fields = `fields=dimensionItem~rename(id),${nameProp}~rename(name)`\n    const order = `order=${nameProp}:asc`\n    const programFilter = `filter=program.id:eq:${groupId}`\n    const filter = filterText ? `&filter=${nameProp}:ilike:${filterText}` : ''\n\n    const paramString = `${fields}&${order}&${programFilter}${filter}`\n\n    return requestWithPaging(d2, 'programIndicators', { paramString, page })\n}\n","import React from 'react'\n\nconst DataIcon = () => {\n    return (\n        <svg\n            width=\"16px\"\n            height=\"16px\"\n            viewBox=\"0 0 16 16\"\n            version=\"1.1\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n        >\n            <g\n                id=\"Exp\"\n                stroke=\"none\"\n                strokeWidth=\"1\"\n                fill=\"none\"\n                fillRule=\"evenodd\"\n            >\n                <g id=\"Artboard\" transform=\"translate(-7.000000, -9.000000)\">\n                    <g\n                        id=\"icon_data_new\"\n                        transform=\"translate(7.000000, 9.000000)\"\n                    >\n                        <rect id=\"frame\" x=\"0\" y=\"0\" width=\"16\" height=\"16\" />\n                        <g\n                            id=\"database-2\"\n                            transform=\"translate(2.000000, 2.000000)\"\n                            stroke=\"#000000\"\n                            strokeLinecap=\"round\"\n                            strokeLinejoin=\"round\"\n                        >\n                            <ellipse\n                                id=\"Oval\"\n                                cx=\"5.5\"\n                                cy=\"2.5\"\n                                rx=\"5.5\"\n                                ry=\"2.5\"\n                            />\n                            <path\n                                d=\"M0,3 L0,5.59978665 C0,6.9252378 2.46253333,8 5.5,8 C8.53746667,8 11,6.92577118 11,5.59978665 L11,3\"\n                                id=\"Shape\"\n                            />\n                            <path\n                                d=\"M0,5 L0,8.6 C0,9.92533333 2.46253333,11 5.5,11 C8.53746667,11 11,9.92533333 11,8.6 L11,5\"\n                                id=\"Shape\"\n                            />\n                        </g>\n                    </g>\n                </g>\n            </g>\n        </svg>\n    )\n}\n\nexport default DataIcon\n","import React from 'react'\n\nconst PeriodIcon = () => {\n    return (\n        <svg\n            width=\"16px\"\n            height=\"16px\"\n            viewBox=\"0 0 16 16\"\n            version=\"1.1\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n        >\n            <g\n                id=\"Exp\"\n                stroke=\"none\"\n                strokeWidth=\"1\"\n                fill=\"none\"\n                fillRule=\"evenodd\"\n            >\n                <g id=\"Artboard\" transform=\"translate(-32.000000, -9.000000)\">\n                    <g\n                        id=\"icon_period_new\"\n                        transform=\"translate(32.000000, 9.000000)\"\n                    >\n                        <rect\n                            id=\"frame\"\n                            fill=\"#D8D8D8\"\n                            opacity=\"0\"\n                            x=\"0\"\n                            y=\"0\"\n                            width=\"16\"\n                            height=\"16\"\n                        />\n                        <g\n                            id=\"time-clock-circle\"\n                            transform=\"translate(2.000000, 2.000000)\"\n                        >\n                            <circle\n                                id=\"Oval\"\n                                stroke=\"#000000\"\n                                strokeLinecap=\"round\"\n                                strokeLinejoin=\"round\"\n                                cx=\"5.5\"\n                                cy=\"5.5\"\n                                r=\"5.5\"\n                            />\n                            <path\n                                d=\"M6,5.29289322 L8.18198052,7.47487373 C8.37724266,7.67013588 8.37724266,7.98671837 8.18198052,8.18198052 C7.98671837,8.37724266 7.67013588,8.37724266 7.47487373,8.18198052 L5.01023174,5.71733852 L5,5.7144165 L5,3.5 C5,3.22385763 5.22385763,3 5.5,3 C5.77614237,3 6,3.22385763 6,3.5 L6,5.29289322 Z\"\n                                id=\"Combined-Shape\"\n                                fill=\"#000000\"\n                            />\n                        </g>\n                    </g>\n                </g>\n            </g>\n        </svg>\n    )\n}\n\nexport default PeriodIcon\n","import React from 'react'\n\nconst OrgUnitIcon = () => {\n    return (\n        <svg height=\"16\" viewBox=\"0 0 16 16\" width=\"16\">\n            <g fill=\"#212934\" fillRule=\"evenodd\">\n                <path d=\"m2 2h1v10h-1z\" />\n                <path d=\"m3 4h2v1h-2z\" />\n                <path d=\"m3 11h2v1h-2z\" />\n                <path d=\"m6 4h2v1h-2z\" />\n                <path d=\"m6 11h2v1h-2z\" />\n                <path d=\"m9 4h1v1h-1z\" />\n                <path d=\"m9 11h1v1h-1z\" />\n                <g fillRule=\"nonzero\">\n                    <path d=\"m14 2h-4v5h4zm-1 1v3h-2v-3z\" />\n                    <path d=\"m14 9h-4v5h4zm-1 1v3h-2v-3z\" />\n                </g>\n            </g>\n        </svg>\n    )\n}\n\nexport default OrgUnitIcon\n","import React from 'react'\n\nconst AssignedCategoriesIcon = () => {\n    return (\n        <svg height=\"16\" viewBox=\"0 0 16 16\" width=\"16\">\n            <g fill=\"#212934\" fillRule=\"evenodd\">\n                <path d=\"m2 7h11v1h-11z\" />\n                <path d=\"m2 13h11v1h-11z\" />\n                <path d=\"m2 2h11v1h-11z\" />\n                <path d=\"m7 8h1v5h-1z\" />\n                <path d=\"m12 3h1v10h-1z\" />\n                <path d=\"m2 3h1v10h-1z\" />\n            </g>\n        </svg>\n    )\n}\n\nexport default AssignedCategoriesIcon\n","import i18n from '@dhis2/d2-i18n'\nimport DataIcon from '../assets/DataIcon'\nimport PeriodIcon from '../assets/PeriodIcon'\nimport OrgUnitIcon from '../assets/OrgUnitIcon'\nimport AssignedCategoriesIcon from '../assets/AssignedCategoriesIcon'\n\nexport const DIMENSION_ID_DATA = 'dx'\nexport const DIMENSION_ID_PERIOD = 'pe'\nexport const DIMENSION_ID_ORGUNIT = 'ou'\nexport const DIMENSION_ID_ASSIGNED_CATEGORIES = 'co'\nexport const DIMENSION_PROP_NO_ITEMS = 'noItems'\n\nexport const getFixedDimensions = () => ({\n    [DIMENSION_ID_DATA]: {\n        id: DIMENSION_ID_DATA,\n        name: i18n.t('Data'),\n        iconName: 'DataIcon',\n        icon: DataIcon,\n    },\n    [DIMENSION_ID_PERIOD]: {\n        id: DIMENSION_ID_PERIOD,\n        name: i18n.t('Period'),\n        iconName: 'PeriodIcon',\n        icon: PeriodIcon,\n    },\n    [DIMENSION_ID_ORGUNIT]: {\n        id: DIMENSION_ID_ORGUNIT,\n        name: i18n.t('Organisation Unit'),\n        iconName: 'OrgUnitIcon',\n        icon: OrgUnitIcon,\n    },\n})\n\nexport const getDynamicDimensions = () => ({\n    [DIMENSION_ID_ASSIGNED_CATEGORIES]: {\n        id: DIMENSION_ID_ASSIGNED_CATEGORIES,\n        name: i18n.t('Assigned Categories'),\n        iconName: 'AssignedCategoriesIcon',\n        icon: AssignedCategoriesIcon,\n        [DIMENSION_PROP_NO_ITEMS]: true,\n    },\n})\n\nexport const getPredefinedDimensions = () => ({\n    ...getFixedDimensions(),\n    ...getDynamicDimensions(),\n})\n\nexport const filterOutPredefinedDimensions = dimensionIds =>\n    dimensionIds.filter(\n        dimensionId =>\n            !Object.keys(getPredefinedDimensions()).includes(dimensionId)\n    )\n\nexport const getPredefinedDimensionProp = (dimensionId, propName) =>\n    (getPredefinedDimensions()[dimensionId] || {})[propName]\n\nexport const getDimensionById = dimensionId =>\n    getPredefinedDimensions()[dimensionId]\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport debounce from 'lodash/debounce'\nimport isEqual from 'lodash/isEqual'\n\nimport ItemSelector from '../ItemSelector/ItemSelector' //TODO: Deprecate ItemSelector once this dependency is removed?\nimport DataTypes from './DataTypesSelector'\nimport Groups from './Groups'\nimport FilterField from '../FilterField'\n\nimport { apiFetchGroups, apiFetchAlternatives } from '../../api/dimensions'\n\nimport {\n    DEFAULT_DATATYPE_ID,\n    ALL_ID,\n    dataTypes,\n    defaultGroupId,\n    defaultGroupDetail,\n} from '../../modules/dataTypes'\nimport { DIMENSION_ID_DATA } from '../../modules/predefinedDimensions'\n\nconst FIRST_PAGE = 1\n\nconst DEFAULT_ALTERNATIVES = {\n    dimensionItems: [],\n    nextPage: FIRST_PAGE,\n}\n\nexport class DataDimension extends Component {\n    // defaults\n    state = {\n        dataType: DEFAULT_DATATYPE_ID,\n        groups: {\n            indicators: [],\n            dataElements: [],\n            dataElementOperands: [],\n            dataSets: [],\n            eventDataItems: [],\n            programIndicators: [],\n        },\n        groupId: ALL_ID,\n        groupDetail: '',\n        filterText: '',\n        items: [],\n        itemsCopy: [],\n        nextPage: null,\n        filter: {},\n    }\n\n    componentDidMount() {\n        this.updateGroups()\n    }\n\n    componentDidUpdate(prevProps) {\n        const prevItems = prevProps.selectedDimensions\n        const currentItems = this.props.selectedDimensions\n\n        if (!isEqual(prevItems, currentItems)) {\n            this.setState({\n                items: this.state.itemsCopy.filter(\n                    di => !currentItems.includes(di.id)\n                ),\n            })\n        }\n    }\n\n    updateGroups = async () => {\n        const dataType = this.state.dataType\n\n        if (!this.state.groups[dataType].length) {\n            const dataTypeGroups = await apiFetchGroups(\n                this.props.d2,\n                dataType,\n                this.props.displayNameProp\n            )\n\n            const groups = Object.assign({}, this.state.groups, {\n                [dataType]: dataTypeGroups,\n            })\n            this.setState({ groups }, this.updateAlternatives)\n        } else {\n            this.updateAlternatives()\n        }\n    }\n\n    onDataTypeChange = dataType => {\n        if (dataType !== this.state.dataType) {\n            const filter = Object.assign({}, this.state.filter, {\n                [this.state.dataType]: {\n                    groupId: this.state.groupId,\n                    groupDetail: this.state.groupDetail,\n                },\n            })\n\n            const currentFilter = this.state.filter[dataType] || {}\n            const groupId = currentFilter.groupId || defaultGroupId(dataType)\n            const groupDetail =\n                currentFilter.groupDetail || defaultGroupDetail(dataType)\n\n            this.setState(\n                {\n                    filter,\n                    dataType,\n                    groupId,\n                    groupDetail,\n                    filterText: '',\n                },\n                this.updateGroups\n            )\n        }\n    }\n\n    requestMoreItems = () => {\n        if (this.state.nextPage) {\n            this.updateAlternatives(this.state.nextPage, true)\n        }\n    }\n\n    updateAlternatives = async (page = FIRST_PAGE, concatItems = false) => {\n        const { dataType, groupId, groupDetail, filterText } = this.state\n\n        const alternatives =\n            (await apiFetchAlternatives({\n                d2: this.props.d2,\n                dataType,\n                groupId,\n                groupDetail,\n                page,\n                filterText,\n                nameProp: this.props.displayNameProp,\n            })) || DEFAULT_ALTERNATIVES\n\n        let { dimensionItems } = alternatives\n\n        const augmentFn = dataTypes[dataType].augmentAlternatives\n        if (augmentFn) {\n            dimensionItems = augmentFn(dimensionItems, groupId)\n        }\n\n        const items = concatItems\n            ? this.state.items.concat(dimensionItems)\n            : dimensionItems\n\n        this.setState({\n            items: items.filter(\n                di => !this.props.selectedDimensions.includes(di.id)\n            ),\n            itemsCopy: items,\n            nextPage: alternatives.nextPage,\n        })\n    }\n\n    onGroupChange = async groupId => {\n        if (groupId !== this.state.groupId) {\n            this.setState({ groupId }, this.updateAlternatives)\n        }\n    }\n\n    onDetailChange = groupDetail => {\n        if (groupDetail !== this.state.groupDetail) {\n            this.setState({ groupDetail }, this.updateAlternatives)\n        }\n    }\n\n    onClearFilter = () => {\n        this.setState(\n            { filterText: '' },\n            debounce(async () => this.updateAlternatives(), 300)\n        )\n    }\n\n    onFilterTextChange = filterText => {\n        this.setState(\n            { filterText },\n            debounce(async () => this.updateAlternatives(), 300)\n        )\n    }\n\n    selectItems = selectedIds => {\n        const itemsToAdd = this.state.items.filter(di =>\n            selectedIds.includes(di.id)\n        )\n\n        this.props.onSelect({\n            dimensionId: DIMENSION_ID_DATA,\n            items: [\n                ...this.props.selectedDimensions.filter(\n                    item => !selectedIds.includes(item.id)\n                ),\n                ...itemsToAdd,\n            ],\n        })\n    }\n\n    deselectItems = itemIdsToRemove => {\n        this.props.onDeselect({\n            dimensionId: DIMENSION_ID_DATA,\n            itemIdsToRemove,\n        })\n    }\n\n    reorderItems = itemIds =>\n        this.props.onReorder({\n            dimensionId: DIMENSION_ID_DATA,\n            itemIds,\n        })\n\n    getUnselectedItems = () =>\n        this.state.items.filter(\n            item => !this.props.selectedDimensions.find(i => i.id === item.id)\n        )\n\n    render = () => {\n        const groups = this.state.groups[this.state.dataType] || []\n\n        const filterZone = () => {\n            return (\n                <div>\n                    <DataTypes\n                        currentDataType={this.state.dataType}\n                        onChange={this.onDataTypeChange}\n                    />\n                    <Groups\n                        dataType={this.state.dataType}\n                        groups={groups}\n                        groupId={this.state.groupId}\n                        onGroupChange={this.onGroupChange}\n                        onDetailChange={this.onDetailChange}\n                        detailValue={this.state.groupDetail}\n                    />\n                    <FilterField\n                        text={this.state.filterText}\n                        onFilterTextChange={this.onFilterTextChange}\n                        onClearFilter={this.onClearFilter}\n                    />\n                </div>\n            )\n        }\n\n        const unselected = {\n            items: this.getUnselectedItems(),\n            onSelect: this.selectItems,\n            filterText: this.state.filterText,\n            requestMoreItems: this.requestMoreItems,\n        }\n\n        const selected = {\n            items: this.props.selectedDimensions,\n            infoBoxMessage: this.props.infoBoxMessage,\n            dialogId: DIMENSION_ID_DATA,\n            onDeselect: this.deselectItems,\n            onReorder: this.reorderItems,\n        }\n\n        return (\n            <ItemSelector\n                itemClassName=\"data-dimension\"\n                unselected={unselected}\n                selected={selected}\n            >\n                {filterZone()}\n            </ItemSelector>\n        )\n    }\n}\n\nDataDimension.propTypes = {\n    d2: PropTypes.object.isRequired,\n    displayNameProp: PropTypes.string.isRequired,\n    selectedDimensions: PropTypes.array.isRequired,\n    onDeselect: PropTypes.func.isRequired,\n    onReorder: PropTypes.func.isRequired,\n    onSelect: PropTypes.func.isRequired,\n    infoBoxMessage: PropTypes.string,\n}\n\nDataDimension.defaultProps = {\n    selectedDimensions: [],\n    onSelect: Function.prototype,\n    onDeselect: Function.prototype,\n    onReorder: Function.prototype,\n}\n\nexport default DataDimension\n","import i18n from '@dhis2/d2-i18n'\n// generate periods config object: { boolean offset, boolean filterFuturePeriods, boolean reversePeriods }\n\nexport const DAILY = 'Daily'\nexport const WEEKLY = 'Weekly'\nexport const BIWEEKLY = 'Bi-weekly'\nexport const WEEKLYWED = 'Weekly (Start Wednesday)'\nexport const WEEKLYTHU = 'Weekly (Start Thursday)'\nexport const WEEKLYSAT = 'Weekly (Start Saturday)'\nexport const WEEKLYSUN = 'Weekly (Start Sunday)'\nexport const MONTHLY = 'Monthly'\nexport const BIMONTHLY = 'Bi-monthly'\nexport const QUARTERLY = 'Quarterly'\nexport const SIXMONTHLY = 'Six-monthly'\nexport const SIXMONTHLYAPR = 'Six-monthly April'\nexport const YEARLY = 'Yearly'\nexport const FYNOV = 'Financial year (Start November)'\nexport const FYOCT = 'Financial year (Start October)'\nexport const FYJUL = 'Financial year (Start July)'\nexport const FYAPR = 'Financial year (Start April)'\n\nconst getMonthName = key => {\n    const monthNames = [\n        i18n.t('January'),\n        i18n.t('February'),\n        i18n.t('March'),\n        i18n.t('April'),\n        i18n.t('May'),\n        i18n.t('June'),\n        i18n.t('July'),\n        i18n.t('August'),\n        i18n.t('September'),\n        i18n.t('October'),\n        i18n.t('November'),\n        i18n.t('December'),\n    ]\n\n    return monthNames[key]\n}\n\nconst dailyPeriodType = (formatYyyyMmDd, fnFilter) => {\n    return config => {\n        let periods = []\n        const offset = parseInt(config.offset, 10)\n        const isFilter = config.filterFuturePeriods\n        const isReverse = config.reversePeriods\n        const year = new Date(Date.now()).getFullYear() + offset\n        const date = new Date(`01 Jan ${year}`)\n\n        while (date.getFullYear() === year) {\n            const period = {}\n            period.startDate = formatYyyyMmDd(date)\n            period.endDate = period.startDate\n            period.getName = () => period.startDate\n            period.iso = period.startDate.replace(/-/g, '')\n            period.id = period.iso\n            periods.push(period)\n            date.setDate(date.getDate() + 1)\n        }\n\n        periods = isFilter ? fnFilter(periods) : periods\n        periods = isReverse ? periods.reverse() : periods\n\n        return periods\n    }\n}\n\nconst weeklyPeriodType = (formatYyyyMmDd, weekObj, fnFilter) => {\n    // Calculate the first date of an EPI year base on ISO standard  ( first week always contains 4th Jan )\n    const getEpiWeekStartDay = (year, startDayOfWeek) => {\n        const jan4 = new Date(year, 0, 4)\n        const jan4DayOfWeek = jan4.getDay()\n        const startDate = jan4\n        const dayDiff = jan4DayOfWeek - startDayOfWeek\n\n        if (dayDiff > 0) {\n            startDate.setDate(jan4.getDate() - dayDiff)\n        } else if (dayDiff < 0) {\n            startDate.setDate(jan4.getDate() - dayDiff)\n            startDate.setDate(startDate.getDate() - 7)\n        }\n\n        return startDate\n    }\n\n    return config => {\n        let periods = []\n        const offset = parseInt(config.offset, 10)\n        const isFilter = config.filterFuturePeriods\n        const isReverse = config.reversePeriods\n        const year = new Date(Date.now()).getFullYear() + offset\n        const date = getEpiWeekStartDay(year, weekObj.startDay)\n        let week = 1\n\n        while (date.getFullYear() <= year) {\n            const period = {}\n            period.startDate = formatYyyyMmDd(date)\n            period.iso = `${year}${weekObj.shortName}W${week}`\n            period.id = period.iso\n            date.setDate(date.getDate() + 6)\n            period.endDate = formatYyyyMmDd(date)\n\n            const weekNumber = week\n            period.getName = () =>\n                `${i18n.t('Week {{weekNumber}}', { weekNumber })} - ${\n                    period.startDate\n                } - ${period.endDate}`\n\n            // if end date is Jan 4th or later, week belongs to next year\n            if (date.getFullYear() > year && date.getDate() >= 4) {\n                break\n            }\n\n            periods.push(period)\n            date.setDate(date.getDate() + 1)\n\n            week += 1\n        }\n\n        periods = isFilter ? fnFilter(periods) : periods\n        periods = isReverse ? periods.reverse() : periods\n\n        return periods\n    }\n}\n\nconst biWeeklyPeriodType = (formatYyyyMmDd, fnFilter) => {\n    return config => {\n        let periods = []\n        const offset = parseInt(config.offset, 10)\n        const isFilter = config.filterFuturePeriods\n        const isReverse = config.reversePeriods\n        const year = new Date(Date.now()).getFullYear() + offset\n        const date = new Date(`01 Jan ${year}`)\n        const day = date.getDay()\n        let biWeek = 1\n\n        if (day <= 4) {\n            date.setDate(date.getDate() - (day - 1))\n        } else {\n            date.setDate(date.getDate() + (8 - day))\n        }\n\n        while (date.getFullYear() <= year) {\n            const period = {}\n\n            period.iso = `${year}BiW${biWeek}`\n            period.id = period.iso\n            period.startDate = formatYyyyMmDd(date)\n            date.setDate(date.getDate() + 13)\n\n            period.endDate = formatYyyyMmDd(date)\n            const biWeekNumber = biWeek\n            period.getName = () =>\n                `${i18n.t('Bi-Week {{biWeekNumber}}', { biWeekNumber })} - ${\n                    period.startDate\n                } - ${period.endDate}`\n\n            // if end date is Jan 4th or later, biweek belongs to next year\n            if (date.getFullYear() > year && date.getDate() >= 4) {\n                break\n            }\n\n            periods.push(period)\n\n            date.setDate(date.getDate() + 1)\n\n            biWeek += 1\n        }\n\n        periods = isFilter ? fnFilter(periods) : periods\n        periods = isReverse ? periods.reverse() : periods\n\n        return periods\n    }\n}\n\nconst monthlyPeriodType = (formatYyyyMmDd, fnFilter) => {\n    const formatIso = date => {\n        const y = date.getFullYear()\n        let m = String(date.getMonth() + 1)\n\n        m = m.length < 2 ? `0${m}` : m\n\n        return y + m\n    }\n\n    return config => {\n        let periods = []\n\n        const offset = parseInt(config.offset, 10)\n        const isFilter = config.filterFuturePeriods\n        const isReverse = config.reversePeriods\n        const year = new Date(Date.now()).getFullYear() + offset\n        const date = new Date(`31 Dec ${year}`)\n\n        while (date.getFullYear() === year) {\n            const period = {}\n\n            period.endDate = formatYyyyMmDd(date)\n            date.setDate(1)\n            period.startDate = formatYyyyMmDd(date)\n            const monthName = getMonthName(date.getMonth())\n            period.getName = () => `${monthName} ${year}`\n            period.iso = formatIso(date)\n            period.id = period.iso\n\n            periods.push(period)\n            date.setDate(0)\n        }\n\n        periods = isFilter ? fnFilter(periods) : periods\n        periods = isReverse ? periods : periods.reverse()\n        // Months are collected backwards. If isReverse is true, then do nothing. Else reverse to correct order and return.\n\n        return periods\n    }\n}\n\nconst biMonthlyPeriodType = (formatYyyyMmDd, fnFilter) => {\n    return config => {\n        let periods = []\n        const offset = parseInt(config.offset, 10)\n        const isFilter = config.filterFuturePeriods\n        const isReverse = config.reversePeriods\n        const year = new Date(Date.now()).getFullYear() + offset\n        const date = new Date(`31 Dec ${year}`)\n        let index = 6\n\n        while (date.getFullYear() === year) {\n            const period = {}\n\n            period.endDate = formatYyyyMmDd(date)\n            date.setDate(0)\n            date.setDate(1)\n            period.startDate = formatYyyyMmDd(date)\n            const monthStart = getMonthName(date.getMonth())\n            const monthEnd = getMonthName(date.getMonth() + 1)\n            const fullYear = date.getFullYear()\n            period.getName = () => `${monthStart} - ${monthEnd} ${fullYear}`\n            period.iso = `${year}0${index}B`\n            period.id = period.iso\n            periods.push(period)\n            date.setDate(0)\n\n            index--\n        }\n\n        periods = isFilter ? fnFilter(periods) : periods\n        periods = isReverse ? periods : periods.reverse()\n        // Bi-months are collected backwards. If isReverse is true, then do nothing. Else reverse to correct order and return.\n\n        return periods\n    }\n}\n\nconst quarterlyPeriodType = (formatYyyyMmDd, fnFilter) => {\n    return config => {\n        let periods = []\n        const offset = parseInt(config.offset, 10)\n        const isFilter = config.filterFuturePeriods\n        const isReverse = config.reversePeriods\n        const year = new Date(Date.now()).getFullYear() + offset\n        const date = new Date(`31 Dec ${year}`)\n        let quarter = 4\n\n        while (date.getFullYear() === year) {\n            const period = {}\n            period.endDate = formatYyyyMmDd(date)\n            date.setDate(0)\n            date.setDate(0)\n            date.setDate(1)\n            period.startDate = formatYyyyMmDd(date)\n            const monthStart = getMonthName(date.getMonth())\n            const monthEnd = getMonthName(date.getMonth() + 2)\n            const fullYear = date.getFullYear()\n            period.getName = () => `${monthStart} - ${monthEnd} ${fullYear}`\n            period.iso = `${year}Q${quarter}`\n            period.id = period.iso\n            periods.push(period)\n            date.setDate(0)\n            quarter -= 1\n        }\n\n        periods = isFilter ? fnFilter(periods) : periods\n        periods = isReverse ? periods : periods.reverse()\n        // Quarters are collected backwards. If isReverse is true, then do nothing. Else reverse to correct order and return.\n\n        return periods\n    }\n}\n\nconst sixMonthlyPeriodType = fnFilter => {\n    return config => {\n        let periods = []\n        const offset = parseInt(config.offset, 10)\n        const isFilter = config.filterFuturePeriods\n        const isReverse = config.reversePeriods\n        const year = new Date(Date.now()).getFullYear() + offset\n\n        let period = {}\n        period.startDate = `${year}-01-01`\n        period.endDate = `${year}-06-30`\n        period.getName = () => `${getMonthName(0)} - ${getMonthName(5)} ${year}`\n        period.iso = `${year}S1`\n        period.id = period.iso\n        periods.push(period)\n\n        period = {}\n        period.startDate = `${year}-07-01`\n        period.endDate = `${year}-12-31`\n        period.getName = () =>\n            `${getMonthName(6)} - ${getMonthName(11)} ${year}`\n        period.iso = `${year}S2`\n        period.id = period.iso\n        periods.push(period)\n\n        periods = isFilter ? fnFilter(periods) : periods\n        periods = isReverse ? periods.reverse() : periods\n\n        return periods\n    }\n}\n\nconst sixMonthlyAprilPeriodType = fnFilter => {\n    return config => {\n        let periods = []\n        const offset = parseInt(config.offset, 10)\n        const isFilter = config.filterFuturePeriods\n        const isReverse = config.reversePeriods\n        const year = new Date(Date.now()).getFullYear() + offset\n\n        let period = {}\n        period.startDate = `${year}-04-01`\n        period.endDate = `${year}-09-30`\n        period.getName = () => `${getMonthName(3)} - ${getMonthName(8)} ${year}`\n        period.iso = `${year}AprilS1`\n        period.id = period.iso\n        periods.push(period)\n\n        period = {}\n        period.startDate = `${year}-10-01`\n        period.endDate = `${year + 1}-03-31`\n        period.getName = () =>\n            `${getMonthName(9)} ${year} - ${getMonthName(2)} ${year + 1}`\n        period.iso = `${year}AprilS2`\n        period.id = period.iso\n        periods.push(period)\n\n        periods = isFilter ? fnFilter(periods) : periods\n        periods = isReverse ? periods.reverse() : periods\n\n        return periods\n    }\n}\n\nconst yearlyPeriodType = (formatYyyyMmDd, fnFilter) => {\n    return config => {\n        let periods = []\n        const offset = parseInt(config.offset, 10)\n        const isFilter = config.filterFuturePeriods\n        const isReverse = config.reversePeriods\n        const year = new Date(Date.now()).getFullYear() + offset\n        const date = new Date(`31 Dec ${year}`)\n\n        while (year - date.getFullYear() < 10) {\n            const period = {}\n            period.endDate = formatYyyyMmDd(date)\n            date.setMonth(0, 1)\n            period.startDate = formatYyyyMmDd(date)\n            const dateString = date.getFullYear().toString()\n            period.getName = () => dateString\n            period.iso = date.getFullYear().toString()\n            period.id = period.iso.toString()\n            periods.push(period)\n            date.setDate(0)\n        }\n\n        periods = isFilter ? fnFilter(periods) : periods\n        periods = isReverse ? periods : periods.reverse()\n        // Years are collected backwards. If isReverse is true, then do nothing. Else reverse to correct order and return.\n\n        return periods\n    }\n}\n\nconst financialOctoberPeriodType = (formatYyyyMmDd, fnFilter) => {\n    return config => {\n        let periods = []\n        const offset = parseInt(config.offset, 10)\n        const isFilter = config.filterFuturePeriods\n        const isReverse = config.reversePeriods\n        const year = new Date(Date.now()).getFullYear() + offset\n        const date = new Date(`30 Sep ${year + 1}`)\n\n        for (let i = 0; i < 10; i++) {\n            const period = {}\n            period.endDate = formatYyyyMmDd(date)\n            date.setYear(date.getFullYear() - 1)\n            date.setDate(date.getDate() + 1)\n            period.startDate = formatYyyyMmDd(date)\n            const yearStart = date.getFullYear()\n            const yearEnd = date.getFullYear() + 1\n            period.getName = () =>\n                `${getMonthName(9)} ${yearStart} - ${getMonthName(\n                    8\n                )} ${yearEnd}`\n            period.id = `${date.getFullYear()}Oct`\n            periods.push(period)\n            date.setDate(date.getDate() - 1)\n        }\n\n        periods = isFilter ? fnFilter(periods) : periods\n        periods = isReverse ? periods : periods.reverse()\n        // FinancialOctober periods are collected backwards. If isReverse is true, then do nothing. Else reverse to correct order and return.\n\n        return periods\n    }\n}\n\nconst financialNovemberPeriodType = (formatYyyyMmDd, fnFilter) => {\n    return config => {\n        let periods = []\n        const offset = parseInt(config.offset, 10)\n        const isFilter = config.filterFuturePeriods\n        const isReverse = config.reversePeriods\n        const year = new Date(Date.now()).getFullYear() + offset\n        const date = new Date(`31 Oct ${year + 1}`)\n\n        for (let i = 0; i < 10; i++) {\n            const period = {}\n            period.endDate = formatYyyyMmDd(date)\n            date.setYear(date.getFullYear() - 1)\n            date.setDate(date.getDate() + 1)\n            period.startDate = formatYyyyMmDd(date)\n            const yearStart = date.getFullYear()\n            const yearEnd = date.getFullYear() + 1\n            period.getName = () =>\n                `${getMonthName(10)} ${yearStart} - ${getMonthName(\n                    9\n                )} ${yearEnd}`\n            period.id = `${date.getFullYear()}Nov`\n            periods.push(period)\n            date.setDate(date.getDate() - 1)\n        }\n\n        periods = isFilter ? fnFilter(periods) : periods\n        periods = isReverse ? periods : periods.reverse()\n        // FinancialNovember periods are collected backwards. If isReverse is true, then do nothing. Else reverse to correct order and return.\n\n        return periods\n    }\n}\n\nconst financialJulyPeriodType = (formatYyyyMmDd, fnFilter) => {\n    return config => {\n        let periods = []\n        const offset = parseInt(config.offset, 10)\n        const isFilter = config.filterFuturePeriods\n        const isReverse = config.reversePeriods\n        const year = new Date(Date.now()).getFullYear() + offset\n        const date = new Date(`30 Jun ${year + 1}`)\n\n        for (let i = 0; i < 10; i++) {\n            const period = {}\n            period.endDate = formatYyyyMmDd(date)\n            date.setYear(date.getFullYear() - 1)\n            date.setDate(date.getDate() + 1)\n            period.startDate = formatYyyyMmDd(date)\n            const yearStart = date.getFullYear()\n            const yearEnd = date.getFullYear() + 1\n            period.getName = () =>\n                `${getMonthName(6)} ${yearStart} - ${getMonthName(\n                    5\n                )} ${yearEnd}`\n            period.id = `${date.getFullYear()}July`\n            periods.push(period)\n            date.setDate(date.getDate() - 1)\n        }\n\n        periods = isFilter ? fnFilter(periods) : periods\n        periods = isReverse ? periods : periods.reverse()\n        // FinancialJuly periods are collected backwards. If isReverse is true, then do nothing. Else reverse to correct order and return.\n\n        return periods\n    }\n}\n\nconst financialAprilPeriodType = (formatYyyyMmDd, fnFilter) => {\n    return config => {\n        let periods = []\n        const offset = parseInt(config.offset, 10)\n        const isFilter = config.filterFuturePeriods\n        const isReverse = config.reversePeriods\n        const year = new Date(Date.now()).getFullYear() + offset\n        const date = new Date(`31 Mar ${year + 1}`)\n\n        for (let i = 0; i < 10; i++) {\n            const period = {}\n            period.endDate = formatYyyyMmDd(date)\n            date.setYear(date.getFullYear() - 1)\n            date.setDate(date.getDate() + 1)\n            period.startDate = formatYyyyMmDd(date)\n            const yearStart = date.getFullYear()\n            const yearEnd = date.getFullYear() + 1\n            period.getName = () =>\n                `${getMonthName(3)} ${yearStart} - ${getMonthName(\n                    2\n                )} ${yearEnd}`\n            period.id = `${date.getFullYear()}April`\n            periods.push(period)\n            date.setDate(date.getDate() - 1)\n        }\n\n        periods = isFilter ? fnFilter(periods) : periods\n        periods = isReverse ? periods : periods.reverse()\n        // FinancialApril periods are collected backwards. If isReverse is true, then do nothing. Else reverse to correct order and return.\n\n        return periods\n    }\n}\n\nconst formatYyyyMmDd = date => {\n    const y = date.getFullYear()\n    let m = String(date.getMonth() + 1)\n    let d = String(date.getDate())\n\n    m = m.length < 2 ? `0${m}` : m\n    d = d.length < 2 ? `0${d}` : d\n\n    return `${y}-${m}-${d}`\n}\n\nconst filterFuturePeriods = periods => {\n    const array = []\n    const now = new Date(Date.now())\n\n    for (let i = 0; i < periods.length; i++) {\n        if (new Date(periods[i].startDate) <= now) {\n            array.push(periods[i])\n        }\n    }\n\n    return array\n}\n\nconst options = [\n    {\n        id: DAILY,\n        getPeriods: dailyPeriodType(formatYyyyMmDd, filterFuturePeriods),\n        getName: () => i18n.t('Daily'),\n    },\n    {\n        id: WEEKLY,\n        getPeriods: weeklyPeriodType(\n            formatYyyyMmDd,\n            { shortName: '', startDay: 1 },\n            filterFuturePeriods\n        ),\n        getName: () => i18n.t('Weekly'),\n    },\n    {\n        id: BIWEEKLY,\n        getPeriods: biWeeklyPeriodType(formatYyyyMmDd, filterFuturePeriods),\n        getName: () => i18n.t('Bi-weekly'),\n    },\n    {\n        id: WEEKLYWED,\n        getPeriods: weeklyPeriodType(\n            formatYyyyMmDd,\n            { shortName: 'Wed', startDay: 3 },\n            filterFuturePeriods\n        ),\n        getName: () => i18n.t('Weekly (Start Wednesday)'),\n    },\n    {\n        id: WEEKLYTHU,\n        getPeriods: weeklyPeriodType(\n            formatYyyyMmDd,\n            { shortName: 'Thu', startDay: 4 },\n            filterFuturePeriods\n        ),\n        getName: () => i18n.t('Weekly (Start Thursday)'),\n    },\n    {\n        id: WEEKLYSAT,\n        getPeriods: weeklyPeriodType(\n            formatYyyyMmDd,\n            { shortName: 'Sat', startDay: 6 },\n            filterFuturePeriods\n        ),\n        getName: () => i18n.t('Weekly (Start Saturday)'),\n    },\n    {\n        id: WEEKLYSUN,\n        getPeriods: weeklyPeriodType(\n            formatYyyyMmDd,\n            { shortName: 'Sun', startDay: 7 },\n            filterFuturePeriods\n        ),\n        getName: () => i18n.t('Weekly (Start Sunday)'),\n    },\n    {\n        id: MONTHLY,\n        getPeriods: monthlyPeriodType(formatYyyyMmDd, filterFuturePeriods),\n        getName: () => i18n.t('Monthly'),\n    },\n    {\n        id: BIMONTHLY,\n        getPeriods: biMonthlyPeriodType(formatYyyyMmDd, filterFuturePeriods),\n        getName: () => i18n.t('Bi-monthly'),\n    },\n    {\n        id: QUARTERLY,\n        getPeriods: quarterlyPeriodType(formatYyyyMmDd, filterFuturePeriods),\n        getName: () => i18n.t('Quarterly'),\n    },\n    {\n        id: SIXMONTHLY,\n        getPeriods: sixMonthlyPeriodType(filterFuturePeriods),\n        getName: () => i18n.t('Six-monthly'),\n    },\n    {\n        id: SIXMONTHLYAPR,\n        getPeriods: sixMonthlyAprilPeriodType(filterFuturePeriods),\n        getName: () => i18n.t('Six-monthly April'),\n    },\n    {\n        id: YEARLY,\n        getPeriods: yearlyPeriodType(formatYyyyMmDd, filterFuturePeriods),\n        getName: () => i18n.t('Yearly'),\n    },\n    {\n        id: FYNOV,\n        getPeriods: financialNovemberPeriodType(\n            formatYyyyMmDd,\n            filterFuturePeriods\n        ),\n        getName: () => i18n.t('Financial year (Start November)'),\n    },\n    {\n        id: FYOCT,\n        getPeriods: financialOctoberPeriodType(\n            formatYyyyMmDd,\n            filterFuturePeriods\n        ),\n        getName: () => i18n.t('Financial year (Start October)'),\n    },\n    {\n        id: FYJUL,\n        getPeriods: financialJulyPeriodType(\n            formatYyyyMmDd,\n            filterFuturePeriods\n        ),\n        getName: () => i18n.t('Financial year (Start July)'),\n    },\n    {\n        id: FYAPR,\n        getPeriods: financialAprilPeriodType(\n            formatYyyyMmDd,\n            filterFuturePeriods\n        ),\n        getName: () => i18n.t('Financial year (Start April)'),\n    },\n]\n\nexport const getFixedPeriodsOptionsById = id =>\n    options.find(option => option.id === id)\n\nexport const getFixedPeriodsOptions = () => options\n","import css from 'styled-jsx/css'\nimport { spacers } from '@dhis2/ui-core'\n\nexport default css`\n    .leftSection {\n        flex-grow: 1;\n    }\n    .leftSection > :global(.filterElement),\n    .rightSection > :global(.filterElement) {\n        margin: 0;\n    }\n    .rightSection {\n        width: 120px;\n        margin-left: ${spacers.dp8};\n    }\n`\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport i18n from '@dhis2/d2-i18n'\nimport {\n    SingleSelectField,\n    SingleSelectOption,\n    InputField,\n} from '@dhis2/ui-core'\n\nimport { getFixedPeriodsOptions } from './utils/fixedPeriods'\nimport styles from './styles/PeriodFilter.style'\n\nconst FixedPeriodFilter = ({\n    currentPeriodType,\n    currentYear,\n    onSelectPeriodType,\n    onSelectYear,\n}) => (\n    <>\n        <div className=\"leftSection\">\n            <SingleSelectField\n                label={i18n.t('Period type')}\n                onChange={({ selected }) => onSelectPeriodType(selected)}\n                dense\n                selected={currentPeriodType}\n                className=\"filterElement\"\n            >\n                {getFixedPeriodsOptions().map(option => (\n                    <SingleSelectOption\n                        key={option.id}\n                        value={option.id}\n                        label={option.getName()}\n                    />\n                ))}\n            </SingleSelectField>\n        </div>\n        <div className=\"rightSection\">\n            <InputField\n                label={i18n.t('Year')}\n                className=\"filterElement\"\n                type=\"number\"\n                placeholder={i18n.t('Select year')}\n                value={currentYear}\n                onChange={({ value }) => onSelectYear(value)}\n                dense\n            ></InputField>\n        </div>\n        <style jsx>{styles}</style>\n    </>\n)\n\nFixedPeriodFilter.propTypes = {\n    currentPeriodType: PropTypes.object.isRequired,\n    currentYear: PropTypes.string.isRequired,\n    onSelectPeriodType: PropTypes.func.isRequired,\n    onSelectYear: PropTypes.func.isRequired,\n}\n\nexport default FixedPeriodFilter\n","import i18n from '@dhis2/d2-i18n'\n\nexport const DAYS = 'Days'\nexport const WEEKS = 'Weeks'\nexport const BIWEEKS = 'BiWeeks'\nexport const MONTHS = 'Months'\nexport const BIMONTHS = 'BiMonths'\nexport const QUARTERS = 'Quarters'\nexport const SIXMONTHS = 'SixMonths'\nexport const FINACIALYEARS = 'FinancialYears'\nexport const YEARS = 'Years'\n\nconst daysPeriodType = () => [\n    { id: 'TODAY', getName: () => i18n.t('Today') },\n    { id: 'YESTERDAY', getName: () => i18n.t('Yesterday') },\n    { id: 'LAST_3_DAYS', getName: () => i18n.t('Last 3 days') },\n    { id: 'LAST_7_DAYS', getName: () => i18n.t('Last 7 days') },\n    { id: 'LAST_14_DAYS', getName: () => i18n.t('Last 14 days') },\n]\n\nconst weeksPeriodType = () => [\n    { id: 'THIS_WEEK', getName: () => i18n.t('This week') },\n    { id: 'LAST_WEEK', getName: () => i18n.t('Last week') },\n    { id: 'LAST_4_WEEKS', getName: () => i18n.t('Last 4 weeks') },\n    { id: 'LAST_12_WEEKS', getName: () => i18n.t('Last 12 weeks') },\n    { id: 'LAST_52_WEEKS', getName: () => i18n.t('Last 52 weeks') },\n    { id: 'WEEKS_THIS_YEAR', getName: () => i18n.t('Weeks this year') },\n]\n\nconst biWeeksPeriodType = () => [\n    { id: 'THIS_BIWEEK', getName: () => i18n.t('This bi-week') },\n    { id: 'LAST_BIWEEK', getName: () => i18n.t('Last bi-week') },\n    { id: 'LAST_4_BIWEEKS', getName: () => i18n.t('Last 4 bi-weeks') },\n]\n\nconst monthsPeriodType = () => [\n    { id: 'THIS_MONTH', getName: () => i18n.t('This month') },\n    { id: 'LAST_MONTH', getName: () => i18n.t('Last month') },\n    { id: 'LAST_3_MONTHS', getName: () => i18n.t('Last 3 months') },\n    { id: 'LAST_6_MONTHS', getName: () => i18n.t('Last 6 months') },\n    { id: 'LAST_12_MONTHS', getName: () => i18n.t('Last 12 months') },\n    {\n        id: 'MONTHS_THIS_YEAR',\n        getName: () => i18n.t('Months this year'),\n    },\n]\n\nconst biMonthsPeriodType = () => [\n    { id: 'THIS_BIMONTH', getName: () => i18n.t('This bi-month') },\n    { id: 'LAST_BIMONTH', getName: () => i18n.t('Last bi-month') },\n    {\n        id: 'LAST_6_BIMONTHS',\n        getName: () => i18n.t('Last 6 bi-months'),\n    },\n    {\n        id: 'BIMONTHS_THIS_YEAR',\n        getName: () => i18n.t('Bi-months this year'),\n    },\n]\n\nconst quartersPeriodType = () => [\n    { id: 'THIS_QUARTER', getName: () => i18n.t('This quarter') },\n    { id: 'LAST_QUARTER', getName: () => i18n.t('Last quarter') },\n    { id: 'LAST_4_QUARTERS', getName: () => i18n.t('Last 4 quarters') },\n    {\n        id: 'QUARTERS_THIS_YEAR',\n        getName: () => i18n.t('Quarters this year'),\n    },\n]\n\nconst sixMonthsPeriodType = () => [\n    { id: 'THIS_SIX_MONTH', getName: () => i18n.t('This six-month') },\n    { id: 'LAST_SIX_MONTH', getName: () => i18n.t('Last six-month') },\n    {\n        id: 'LAST_2_SIXMONTHS',\n        getName: () => i18n.t('Last 2 six-month'),\n    },\n]\n\nconst financialYearsPeriodType = () => [\n    {\n        id: 'THIS_FINANCIAL_YEAR',\n        getName: () => i18n.t('This financial year'),\n    },\n    {\n        id: 'LAST_FINANCIAL_YEAR',\n        getName: () => i18n.t('Last financial year'),\n    },\n    {\n        id: 'LAST_5_FINANCIAL_YEARS',\n        getName: () => i18n.t('Last 5 financial years'),\n    },\n]\n\nconst yearsPeriodType = () => [\n    { id: 'THIS_YEAR', getName: () => i18n.t('This year') },\n    { id: 'LAST_YEAR', getName: () => i18n.t('Last year') },\n    { id: 'LAST_5_YEARS', getName: () => i18n.t('Last 5 years') },\n]\n\nconst options = [\n    { id: DAYS, getPeriods: daysPeriodType, getName: () => i18n.t('Days') },\n    { id: WEEKS, getPeriods: weeksPeriodType, getName: () => i18n.t('Weeks') },\n    {\n        id: BIWEEKS,\n        getPeriods: biWeeksPeriodType,\n        getName: () => i18n.t('Bi-weeks'),\n    },\n    {\n        id: MONTHS,\n        getPeriods: monthsPeriodType,\n        getName: () => i18n.t('Months'),\n    },\n    {\n        id: BIMONTHS,\n        getPeriods: biMonthsPeriodType,\n        getName: () => i18n.t('Bi-months'),\n    },\n    {\n        id: QUARTERS,\n        getPeriods: quartersPeriodType,\n        getName: () => i18n.t('Quarters'),\n    },\n    {\n        id: SIXMONTHS,\n        getPeriods: sixMonthsPeriodType,\n        getName: () => i18n.t('Six-months'),\n    },\n    {\n        id: FINACIALYEARS,\n        getPeriods: financialYearsPeriodType,\n        getName: () => i18n.t('Financial Years'),\n    },\n    { id: YEARS, getPeriods: yearsPeriodType, getName: () => i18n.t('Years') },\n]\n\nexport const getRelativePeriodsOptionsById = id =>\n    options.find(option => option.id === id)\n\nexport const getRelativePeriodsOptions = () => options\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport i18n from '@dhis2/d2-i18n'\nimport { SingleSelectOption, SingleSelectField } from '@dhis2/ui-core'\n\nimport { getRelativePeriodsOptions } from './utils/relativePeriods'\nimport styles from './styles/PeriodFilter.style'\n\nconst RelativePeriodFilter = ({ currentFilter, onSelectFilter }) => (\n    <div className=\"leftSection\">\n        <SingleSelectField\n            label={i18n.t('Period type')}\n            onChange={({ selected }) => onSelectFilter(selected)}\n            dense\n            selected={currentFilter}\n            className=\"filterElement\"\n        >\n            {getRelativePeriodsOptions().map(option => (\n                <SingleSelectOption\n                    key={option.id}\n                    value={option.id}\n                    label={option.getName()}\n                />\n            ))}\n        </SingleSelectField>\n        <style jsx>{styles}</style>\n    </div>\n)\n\nRelativePeriodFilter.propTypes = {\n    currentFilter: PropTypes.object.isRequired,\n    onSelectFilter: PropTypes.func.isRequired,\n}\n\nexport default RelativePeriodFilter\n","import css from 'styled-jsx/css'\nimport { spacers, colors } from '@dhis2/ui-core'\n\nexport default css`\n    .filterContainer {\n        display: flex;\n        margin-bottom: ${spacers.dp12};\n        margin-top: ${spacers.dp8};\n    }\n    .emptySelection {\n        text-align: center;\n        font-size: 14px;\n        line-height: 16px;\n        margin: ${spacers.dp24} 0 0;\n        color: ${colors.grey700};\n    }\n`\n","import css from 'styled-jsx/css'\nimport { colors, spacers, theme } from '@dhis2/ui-core'\n\nexport default css`\n    .wrapper:last-child {\n        margin-bottom: ${spacers.dp4};\n    }\n    .chip {\n        display: inline-block;\n        background: ${colors.grey200};\n        font-size: 14px;\n        line-height: 16px;\n        padding: 2px ${spacers.dp8} 2px ${spacers.dp4};\n        margin-top: ${spacers.dp4};\n        margin-left: ${spacers.dp8};\n        border-radius: 3px;\n        user-select: none;\n    }\n\n    .chip:hover {\n        background: ${colors.grey300};\n    }\n\n    .chip.highlighted {\n        background: ${theme.secondary800};\n        color: ${colors.white};\n    }\n\n    .chip.highlighted :global(.icon path) {\n        fill: ${colors.white};\n    }\n\n    .chip.disabled {\n        opacity: 0.3;\n        cursor: not-allowed;\n    }\n\n    .icon,\n    .label {\n        line-height: 18px;\n    }\n\n    .icon {\n        margin-right: ${spacers.dp4};\n        display: inline-flex;\n        vertical-align: text-bottom;\n    }\n\n    .label {\n        font-size: 14px;\n    }\n`\n","import React, { useRef } from 'react'\nimport cx from 'classnames'\nimport propTypes from '@dhis2/prop-types'\n\nimport styles from './styles/TransferOption.style'\n\nconst DOUBLE_CLICK_MAX_DELAY = 500\n\nexport const TransferOption = ({\n    disabled,\n    label,\n    highlighted,\n    onClick,\n    onDoubleClick,\n    value,\n    icon,\n}) => {\n    const doubleClickTimeout = useRef(null)\n\n    return (\n        <div data-value={value} className=\"wrapper\">\n            <div\n                className={cx('chip', { highlighted, disabled })}\n                onClick={event => {\n                    if (disabled) return\n\n                    const option = { label, value }\n\n                    if (doubleClickTimeout.current) {\n                        clearTimeout(doubleClickTimeout.current)\n                        doubleClickTimeout.current = null\n\n                        onDoubleClick({ option }, event)\n                    } else {\n                        doubleClickTimeout.current = setTimeout(() => {\n                            clearTimeout(doubleClickTimeout.current)\n                            doubleClickTimeout.current = null\n                        }, DOUBLE_CLICK_MAX_DELAY)\n\n                        onClick({ option }, event)\n                    }\n                }}\n            >\n                <span className=\"icon\">{icon}</span>\n                <span className=\"label\">{label}</span>\n            </div>\n\n            <style jsx>{styles}</style>\n        </div>\n    )\n}\n\nTransferOption.propTypes = {\n    label: propTypes.string.isRequired,\n    value: propTypes.string.isRequired,\n    disabled: propTypes.bool,\n    highlighted: propTypes.bool,\n    icon: propTypes.node,\n    onClick: propTypes.func,\n    onDoubleClick: propTypes.func,\n}\n","import React from 'react'\n\nexport default (\n    <svg\n        xmlns=\"http://www.w3.org/2000/svg\"\n        width=\"16\"\n        height=\"16\"\n        viewBox=\"0 0 16 16\"\n    >\n        <path\n            fill=\"#6E7A8A\"\n            d=\"M8,4 C10.209139,4 12,5.790861 12,8 C12,10.209139 10.209139,12 8,12 C5.790861,12 4,10.209139 4,8 C4,5.790861 5.790861,4 8,4 Z M8,5 C6.34314575,5 5,6.34314575 5,8 C5,9.65685425 6.34314575,11 8,11 C9.65685425,11 11,9.65685425 11,8 C11,6.34314575 9.65685425,5 8,5 Z M8.5,6 L8.5,7.5 L9.5,7.5 L9.5,8.5 L7.5,8.5 L7.5,6 L8.5,6 Z\"\n        />\n    </svg>\n)\n","export const TRANSFER_OPTIONS_WIDTH = '420px'\n\nexport const TRANSFER_SELECTED_WIDTH = '298px'\n\nexport const TRANSFER_HEIGHT = '512px'\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport { Transfer, TabBar, Tab } from '@dhis2/ui-core'\nimport i18n from '@dhis2/d2-i18n'\n\nimport FixedPeriodFilter from './FixedPeriodFilter'\nimport RelativePeriodFilter from './RelativePeriodFilter'\nimport { MONTHS, getRelativePeriodsOptionsById } from './utils/relativePeriods'\nimport { MONTHLY, getFixedPeriodsOptionsById } from './utils/fixedPeriods'\nimport styles from '../styles/DimensionSelector.style'\nimport { TransferOption } from '../TransferOption'\nimport PeriodIcon from '../../assets/DimensionItemIcons/PeriodIcon'\nimport {\n    TRANSFER_HEIGHT,\n    TRANSFER_OPTIONS_WIDTH,\n    TRANSFER_SELECTED_WIDTH,\n} from '../../modules/dimensionSelectorHelper'\n\nconst defaultRelativePeriodType = getRelativePeriodsOptionsById(MONTHS)\nconst defaultFixedPeriodType = getFixedPeriodsOptionsById(MONTHLY)\nconst defaultFixedPeriodYear = new Date().getFullYear()\nconst fixedPeriodConfig = year => ({\n    offset: year - defaultFixedPeriodYear,\n    filterFuturePeriods: false,\n    reversePeriods: false,\n})\n\nclass PeriodSelector extends Component {\n    state = {\n        allPeriods: defaultRelativePeriodType.getPeriods(),\n        selectedPeriods: [],\n        isRelative: true,\n        relativeFilter: {\n            periodType: {\n                label: defaultRelativePeriodType.getName(),\n                value: defaultRelativePeriodType.id,\n            },\n        },\n        fixedFilter: {\n            periodType: {\n                label: defaultFixedPeriodType.getName(),\n                value: defaultFixedPeriodType.id,\n            },\n            year: defaultFixedPeriodYear.toString(),\n        },\n    }\n\n    constructor(props) {\n        super(props)\n\n        this.state.selectedPeriods = this.props.initialSelectedPeriods.map(\n            item => ({\n                label: item.name,\n                value: item.id,\n                key: item.id,\n            })\n        )\n    }\n\n    onIsRelativeClick = isRelative => {\n        if (this.state.isRelative !== isRelative) {\n            this.setState({ isRelative })\n            this.setState({\n                allPeriods: isRelative\n                    ? getRelativePeriodsOptionsById(\n                          this.state.relativeFilter.periodType.value\n                      ).getPeriods()\n                    : getFixedPeriodsOptionsById(\n                          this.state.fixedFilter.periodType.value\n                      ).getPeriods(\n                          fixedPeriodConfig(Number(this.state.fixedFilter.year))\n                      ),\n            })\n        }\n    }\n\n    renderHeader = () => (\n        <>\n            <TabBar>\n                <Tab\n                    selected={this.state.isRelative}\n                    onClick={() => this.onIsRelativeClick(true)}\n                >\n                    {i18n.t('Relative periods')}\n                </Tab>\n                <Tab\n                    selected={!this.state.isRelative}\n                    onClick={() => this.onIsRelativeClick(false)}\n                >\n                    {i18n.t('Fixed periods')}\n                </Tab>\n            </TabBar>\n            <div className=\"filterContainer\">\n                {this.state.isRelative ? (\n                    <RelativePeriodFilter\n                        currentFilter={this.state.relativeFilter.periodType}\n                        onSelectFilter={filter => {\n                            this.setState({\n                                relativeFilter: { periodType: filter },\n                            })\n                            this.setState({\n                                allPeriods: getRelativePeriodsOptionsById(\n                                    filter.value\n                                ).getPeriods(),\n                            })\n                        }}\n                    />\n                ) : (\n                    <FixedPeriodFilter\n                        currentPeriodType={this.state.fixedFilter.periodType}\n                        currentYear={this.state.fixedFilter.year}\n                        onSelectPeriodType={periodType => {\n                            this.onSelectFixedPeriods({\n                                periodType,\n                                year: this.state.fixedFilter.year,\n                            })\n                        }}\n                        onSelectYear={year => {\n                            this.onSelectFixedPeriods({\n                                periodType: this.state.fixedFilter.periodType,\n                                year,\n                            })\n                        }}\n                    />\n                )}\n            </div>\n            <style jsx>{styles}</style>\n        </>\n    )\n\n    onSelectFixedPeriods = fixedFilter => {\n        this.setState({\n            fixedFilter,\n            allPeriods: getFixedPeriodsOptionsById(\n                fixedFilter.periodType.value\n            ).getPeriods(fixedPeriodConfig(Number(fixedFilter.year))),\n        })\n    }\n\n    renderEmptySelection = () => (\n        <>\n            <p className=\"emptySelection\">{i18n.t('No periods selected')}</p>\n            <style jsx>{styles}</style>\n        </>\n    )\n\n    render = () => (\n        <Transfer\n            onChange={({ selected }) => {\n                this.setState({ selectedPeriods: selected })\n                this.props.onSelect(selected)\n            }}\n            selected={this.state.selectedPeriods}\n            leftHeader={this.renderHeader()}\n            enableOrderChange\n            height={TRANSFER_HEIGHT}\n            optionsWidth={TRANSFER_OPTIONS_WIDTH}\n            selectedWidth={TRANSFER_SELECTED_WIDTH}\n            selectedEmptyComponent={this.renderEmptySelection()}\n            rightFooter={this.props.rightFooter}\n            // TODO: Add rightHeader \"Selected Periods\" once the Transfer component supports this (https://github.com/dhis2/ui-core/issues/885)\n        >\n            {this.state.allPeriods.map(item => (\n                <TransferOption\n                    label={item.getName()}\n                    value={item.id}\n                    key={item.id}\n                    icon={PeriodIcon}\n                />\n            ))}\n        </Transfer>\n    )\n}\n\nPeriodSelector.propTypes = {\n    onSelect: PropTypes.func.isRequired,\n    initialSelectedPeriods: PropTypes.arrayOf(PropTypes.object),\n    rightFooter: PropTypes.node,\n}\n\nPeriodSelector.defaultProps = {\n    initialSelectedPeriods: [],\n}\n\nexport default PeriodSelector\n","import React from 'react'\nimport PropTypes from 'prop-types'\n\nimport PeriodSelector from './PeriodSelector'\nimport { DIMENSION_ID_PERIOD } from '../../modules/predefinedDimensions'\n\nexport const PeriodDimension = ({ onSelect, selectedPeriods, rightFooter }) => {\n    const selectPeriods = periods => {\n        const formattedPeriods = periods.map(period => ({\n            id: period.value,\n            name: period.label,\n        }))\n        onSelect({\n            dimensionId: DIMENSION_ID_PERIOD,\n            items: formattedPeriods,\n        })\n    }\n\n    return (\n        <PeriodSelector\n            onSelect={selectPeriods}\n            initialSelectedPeriods={selectedPeriods}\n            rightFooter={rightFooter}\n        />\n    )\n}\n\nPeriodDimension.propTypes = {\n    onSelect: PropTypes.func.isRequired,\n    rightFooter: PropTypes.node,\n    selectedPeriods: PropTypes.array,\n}\n\nPeriodDimension.defaultProps = {\n    selectedPeriods: [],\n}\n\nexport default PeriodDimension\n","import { onError } from './index'\n\nexport const apiFetchOrganisationUnitRoot = d2 => {\n    const endPoint = '/organisationUnits'\n    const fields = ['id', 'displayName', 'name']\n    const url = `${endPoint}?paging=false&userDataViewFallback=true&fields=${fields.join(\n        ','\n    )}`\n\n    return d2.Api.getApi()\n        .get(url)\n        .then(({ organisationUnits }) => organisationUnits[0])\n        .catch(onError)\n}\n\n/**\n * Fetch organisation units\n * @returns {Promise<T | never>}\n */\nexport const apiFetchOrganisationUnits = (d2, displayNameProperty) => {\n    const fields = [\n        'id',\n        'path',\n        `${displayNameProperty}~rename(displayName)`,\n        'children::isNotEmpty',\n    ]\n\n    return d2.models.organisationUnits.list({\n        paging: false,\n        level: 1,\n        fields: fields.join(','),\n        userDataViewFallback: true,\n    })\n}\n\n/**\n * Fetch organisation unit groups\n * @returns {*}\n */\nexport const apiFetchOrganisationUnitGroups = (d2, displayNameProperty) => {\n    const endPoint = '/organisationUnitGroups'\n    const fields = ['id', `${displayNameProperty}~rename(displayName)`, 'name']\n    const url = `${endPoint}?paging=false&fields=${fields.join(',')}`\n\n    return d2.Api.getApi()\n        .get(url)\n        .then(({ organisationUnitGroups }) => organisationUnitGroups)\n        .catch(onError)\n}\n\n/**\n * Fetch organisation unit levels\n * @returns {*}\n */\nexport const apiFetchOrganisationUnitLevels = d2 => {\n    const endPoint = '/organisationUnitLevels'\n    const fields = ['id', 'displayName', 'name', 'level']\n    const url = `${endPoint}?paging=false&fields=${fields.join(',')}`\n\n    return d2.Api.getApi()\n        .get(url)\n        .then(({ organisationUnitLevels }) => organisationUnitLevels)\n        .catch(onError)\n}\n","const LEVEL_ID_PREFIX = 'LEVEL'\nconst GROUP_ID_PREFIX = 'OU_GROUP'\n\nconst hasGroupPrefix = id =>\n    id.substr(0, GROUP_ID_PREFIX.length) === GROUP_ID_PREFIX\n\nconst hasLevelPrefix = id =>\n    id.substr(0, LEVEL_ID_PREFIX.length) === LEVEL_ID_PREFIX\n\nconst stripLevelPrefix = id =>\n    hasLevelPrefix(id) ? id.substr(LEVEL_ID_PREFIX.length + 1) : id\n\nconst stripGroupPrefix = id =>\n    hasGroupPrefix(id) ? id.substr(GROUP_ID_PREFIX.length + 1) : id\n\nconst removePrefix = id => stripGroupPrefix(stripLevelPrefix(id))\n\nexport const ouIdHelper = Object.freeze({\n    addLevelPrefix: id => `${LEVEL_ID_PREFIX}-${removePrefix(id)}`,\n    addGroupPrefix: id => `${GROUP_ID_PREFIX}-${removePrefix(id)}`,\n    removePrefix,\n    hasGroupPrefix,\n    hasLevelPrefix,\n})\n","import React, { Component, Fragment } from 'react'\nimport PropTypes from 'prop-types'\nimport sortBy from 'lodash/sortBy'\nimport { OrgUnitSelector, userOrgUnits } from '@dhis2/d2-ui-org-unit-dialog'\nimport { CircularLoader } from '@dhis2/ui-core'\n\nimport {\n    apiFetchOrganisationUnitGroups,\n    apiFetchOrganisationUnitLevels,\n    apiFetchOrganisationUnits,\n} from '../../api/organisationUnits'\nimport { ouIdHelper } from '../../modules/ouIdHelper'\nimport { DIMENSION_ID_ORGUNIT } from '../../modules/predefinedDimensions'\nimport styles from './styles/OrgUnitDimension.style'\nimport { colors } from '@dhis2/ui-core'\n\nexport const defaultState = {\n    root: undefined,\n    roots: undefined,\n    // use \"selected\" property for cloning org units while user org unit(s) is (are) selected\n    selected: [],\n    ouLevels: [],\n    ouGroups: [],\n    showOrgUnitsTree: true,\n}\n\nclass OrgUnitDimension extends Component {\n    constructor(props) {\n        super(props)\n\n        this.state = defaultState\n        this.userOrgUnitIds = userOrgUnits.map(ou => ou.id)\n\n        this.loadOrgUnitTree(props.d2, props.displayNameProperty)\n        this.loadOrgUnitGroups(props.d2, props.displayNameProperty)\n        this.loadOrgUnitLevels(props.d2)\n    }\n\n    componentDidUpdate(prevProps) {\n        const previousId = prevProps.current ? prevProps.current.id : null\n        const currentId = this.props.current ? this.props.current.id : null\n\n        // remount org units selector component to ensure\n        // only selected org units are expanded\n        if (previousId !== currentId) {\n            this.hideOrgUnitsTree()\n\n            setTimeout(this.showOrgUnitsTree, 0)\n        }\n    }\n\n    showOrgUnitsTree = () => {\n        this.setState({ showOrgUnitsTree: true })\n    }\n\n    hideOrgUnitsTree = () => {\n        this.setState({ showOrgUnitsTree: false })\n    }\n\n    getUserOrgUnitsFromIds = ids => {\n        return userOrgUnits.filter(ou => ids.includes(ou.id))\n    }\n\n    onLevelChange = event => {\n        const levelIds = event.target.value.filter(id => !!id)\n\n        this.props.onSelect({\n            dimensionId: DIMENSION_ID_ORGUNIT,\n            items: [\n                ...this.props.ouItems.filter(\n                    ou => !ouIdHelper.hasLevelPrefix(ou.id)\n                ),\n                ...levelIds.map(id => {\n                    const levelOu = this.state.ouLevels.find(ou => ou.id === id)\n\n                    return {\n                        ...levelOu,\n                        id: ouIdHelper.addLevelPrefix(levelOu.id),\n                    }\n                }),\n            ],\n        })\n    }\n\n    onGroupChange = event => {\n        const groupIds = event.target.value.filter(id => !!id)\n\n        this.props.onSelect({\n            dimensionId: DIMENSION_ID_ORGUNIT,\n            items: [\n                ...this.props.ouItems.filter(\n                    ou => !ouIdHelper.hasGroupPrefix(ou.id)\n                ),\n                ...groupIds.map(id => {\n                    const groupOu = this.state.ouGroups.find(ou => ou.id === id)\n\n                    return {\n                        ...groupOu,\n                        id: ouIdHelper.addGroupPrefix(id),\n                    }\n                }),\n            ],\n        })\n    }\n\n    onDeselectAllClick = () =>\n        this.props.onDeselect({\n            dimensionId: DIMENSION_ID_ORGUNIT,\n            itemIdsToRemove: this.props.ouItems.map(ou => ou.id),\n        })\n\n    loadOrgUnitTree = (d2, displayNameProperty) => {\n        apiFetchOrganisationUnits(d2, displayNameProperty)\n            .then(rootLevel => rootLevel.toArray())\n            .then(roots => {\n                this.setState({\n                    roots,\n                    root: roots[0],\n                })\n            })\n    }\n\n    loadOrgUnitGroups = (d2, displayNameProperty) => {\n        apiFetchOrganisationUnitGroups(\n            d2,\n            displayNameProperty\n        ).then(organisationUnitGroups =>\n            this.setState({ ouGroups: organisationUnitGroups })\n        )\n    }\n\n    loadOrgUnitLevels = d2 => {\n        apiFetchOrganisationUnitLevels(d2).then(organisationUnitLevels =>\n            this.setState({\n                ouLevels: sortBy(organisationUnitLevels, ['level']),\n            })\n        )\n    }\n\n    handleOrgUnitClick = (event, orgUnit) => {\n        const selected = this.props.ouItems\n\n        if (selected.some(ou => ou.path === orgUnit.path)) {\n            this.props.onDeselect({\n                dimensionId: DIMENSION_ID_ORGUNIT,\n                itemIdsToRemove: [orgUnit.id],\n            })\n        } else {\n            this.props.onSelect({\n                dimensionId: DIMENSION_ID_ORGUNIT,\n                items: [\n                    ...selected,\n                    {\n                        ...orgUnit,\n                        name: orgUnit.name || orgUnit.displayName,\n                    },\n                ],\n            })\n        }\n    }\n\n    handleUserOrgUnitClick = (event, checked) => {\n        if (checked) {\n            if (!this.state.selected.length) {\n                this.setState({\n                    selected: this.props.ouItems.slice(),\n                })\n            }\n\n            this.props.onSelect({\n                dimensionId: DIMENSION_ID_ORGUNIT,\n                items: [\n                    ...this.props.ouItems.filter(ou =>\n                        this.userOrgUnitIds.includes(ou.id)\n                    ),\n                    userOrgUnits.find(ou => ou.id === event.target.name),\n                ],\n            })\n        } else {\n            if (\n                this.props.ouItems.length === 1 &&\n                this.state.selected.length > 0\n            ) {\n                this.props.onSelect({\n                    dimensionId: DIMENSION_ID_ORGUNIT,\n                    items: this.state.selected,\n                })\n            } else {\n                this.props.onDeselect({\n                    dimensionId: DIMENSION_ID_ORGUNIT,\n                    itemIdsToRemove: [event.target.name],\n                })\n            }\n        }\n    }\n\n    handleMultipleOrgUnitsSelect = orgUnits => {\n        const selected = this.props.ouItems\n\n        this.props.onSelect({\n            dimensionId: DIMENSION_ID_ORGUNIT,\n            items: [\n                ...selected,\n                ...orgUnits.reduce((obj, ou) => {\n                    // avoid duplicates when clicking \"Select children\" multiple times\n                    if (!selected.find(i => i.id === ou.id)) {\n                        obj.push({ ...ou, name: ou.name || ou.displayName })\n                    }\n\n                    return obj\n                }, []),\n            ],\n        })\n    }\n\n    render = () => {\n        const ids = this.props.ouItems.map(ou => ou.id)\n        const selected = this.props.ouItems.filter(\n            ou =>\n                !this.userOrgUnitIds.includes(ou.id) &&\n                !ouIdHelper.hasLevelPrefix(ou.id) &&\n                !ouIdHelper.hasGroupPrefix(ou.id)\n        )\n\n        const userOrgUnits = this.getUserOrgUnitsFromIds(ids)\n        const level = ids\n            .filter(ouIdHelper.hasLevelPrefix)\n            .map(ouIdHelper.removePrefix)\n        const group = ids\n            .filter(ouIdHelper.hasGroupPrefix)\n            .map(ouIdHelper.removePrefix)\n\n        return (\n            <Fragment>\n                {this.state.root && this.state.showOrgUnitsTree && (\n                    <OrgUnitSelector\n                        d2={this.props.d2}\n                        root={this.state.root}\n                        roots={this.state.roots}\n                        selected={selected}\n                        userOrgUnits={userOrgUnits}\n                        level={level}\n                        group={group}\n                        levelOptions={this.state.ouLevels}\n                        groupOptions={this.state.ouGroups}\n                        onLevelChange={this.onLevelChange}\n                        onGroupChange={this.onGroupChange}\n                        onDeselectAllClick={this.onDeselectAllClick}\n                        handleUserOrgUnitClick={this.handleUserOrgUnitClick}\n                        handleOrgUnitClick={this.handleOrgUnitClick}\n                        handleMultipleOrgUnitsSelect={\n                            this.handleMultipleOrgUnitsSelect\n                        }\n                        checkboxColor=\"secondary\"\n                        deselectAllTooltipFontColor={colors.grey900}\n                        deselectAllTooltipBackgroundColor={colors.grey300}\n                        displayNameProperty={this.props.displayNameProperty}\n                        isUserDataViewFallback={true}\n                    />\n                )}\n                {!this.state.root && (\n                    <div className=\"loader\">\n                        <CircularLoader />\n                    </div>\n                )}\n                <style jsx>{styles}</style>\n            </Fragment>\n        )\n    }\n}\n\nOrgUnitDimension.propTypes = {\n    current: PropTypes.object,\n    d2: PropTypes.object,\n    displayNameProperty: PropTypes.string,\n    ouItems: PropTypes.array,\n    onDeselect: PropTypes.func,\n    onSelect: PropTypes.func,\n}\n\nexport default OrgUnitDimension\n","import React from 'react'\n\nexport default (\n    <svg\n        xmlns=\"http://www.w3.org/2000/svg\"\n        width=\"16\"\n        height=\"16\"\n        viewBox=\"0 0 16 16\"\n    >\n        <path\n            fill=\"#6E7A8A\"\n            d=\"M11,5 L11,11 L5,11 L5,5 L11,5 Z M10,6 L6,6 L6,10 L10,10 L10,6 Z\"\n        />\n    </svg>\n)\n","import React, { useState } from 'react'\nimport PropTypes from 'prop-types'\nimport { Transfer } from '@dhis2/ui-core'\nimport i18n from '@dhis2/d2-i18n'\n\nimport styles from '../styles/DimensionSelector.style'\nimport { TransferOption } from '../TransferOption'\nimport GenericIcon from '../../assets/DimensionItemIcons/GenericIcon'\nimport {\n    TRANSFER_HEIGHT,\n    TRANSFER_OPTIONS_WIDTH,\n    TRANSFER_SELECTED_WIDTH,\n} from '../../modules/dimensionSelectorHelper'\n\nconst ItemSelector = ({\n    allItems,\n    onSelect,\n    initialSelectedItems,\n    leftHeader,\n    rightFooter,\n}) => {\n    const [selectedItems, setSelectedItems] = useState(\n        initialSelectedItems.map(item => ({\n            label: item.name,\n            value: item.id,\n            key: item.id,\n        }))\n    )\n\n    const renderEmptySelection = () => (\n        <>\n            <p className=\"emptySelection\">{i18n.t('No items selected')}</p>\n            <style jsx>{styles}</style>\n        </>\n    )\n\n    return (\n        <Transfer\n            onChange={({ selected }) => {\n                setSelectedItems(selected)\n                onSelect(selected)\n            }}\n            selected={selectedItems}\n            leftHeader={leftHeader}\n            filterable\n            enableOrderChange\n            height={TRANSFER_HEIGHT}\n            optionsWidth={TRANSFER_OPTIONS_WIDTH}\n            selectedWidth={TRANSFER_SELECTED_WIDTH}\n            selectedEmptyComponent={renderEmptySelection()}\n            rightFooter={rightFooter}\n            // TODO: Add a filter placeholer once the Transfer component supports this (https://github.com/dhis2/ui/issues/131)\n            // TODO: Add rightHeader \"Selected Periods\" once the Transfer component supports this (https://github.com/dhis2/ui-core/issues/885)\n        >\n            {allItems.map(item => (\n                <TransferOption\n                    label={item.name}\n                    value={item.id}\n                    key={item.id}\n                    icon={GenericIcon}\n                />\n            ))}\n        </Transfer>\n    )\n}\n\nItemSelector.propTypes = {\n    allItems: PropTypes.arrayOf(PropTypes.object).isRequired,\n    onSelect: PropTypes.func.isRequired,\n    initialSelectedItems: PropTypes.arrayOf(PropTypes.object),\n    leftHeader: PropTypes.node,\n    rightFooter: PropTypes.node,\n}\n\nItemSelector.defaultProps = {\n    initialSelectedItems: [],\n}\n\nexport default ItemSelector\n","import React, { useEffect, useState } from 'react'\nimport PropTypes from 'prop-types'\n\nimport ItemSelector from './ItemSelector'\nimport { apiFetchItemsByDimension } from '../../api/dimensions'\n\nexport const DynamicDimension = ({\n    context,\n    dimensionId,\n    onSelect,\n    selectedItems,\n    rightFooter,\n}) => {\n    const [items, setItems] = useState([])\n\n    useEffect(() => {\n        if (!items || !items.length) {\n            getItems()\n        }\n    }, [])\n\n    const getItems = async () =>\n        setItems(await apiFetchItemsByDimension(context, dimensionId))\n    // TODO: This needs to be refactored to use a loading spinner once Transfer supports it: https://jira.dhis2.org/browse/TECH-379\n\n    const selectItems = items => {\n        const formattedItems = items.map(item => ({\n            id: item.value,\n            name: item.label,\n        }))\n        onSelect({\n            dimensionId: dimensionId,\n            items: formattedItems,\n        })\n    }\n\n    return (\n        <ItemSelector\n            onSelect={selectItems}\n            allItems={items}\n            initialSelectedItems={selectedItems}\n            rightFooter={rightFooter}\n            // TODO: Pass in a func prop to fetch items, instead of fetching them on this level, to enable the loading spinner?\n        />\n    )\n}\n\nDynamicDimension.propTypes = {\n    context: PropTypes.object.isRequired,\n    dimensionId: PropTypes.string.isRequired,\n    selectedItems: PropTypes.array.isRequired,\n    onSelect: PropTypes.func.isRequired,\n    rightFooter: PropTypes.node,\n}\n\nDynamicDimension.defaultProps = {\n    selectedItems: [],\n    onSelect: Function.prototype,\n}\n\nexport default DynamicDimension\n","export const styles = {\n    label: {\n        display: 'flex',\n        outline: 'none',\n    },\n}\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\n\nimport { styles } from './styles/DimensionLabel.style'\nimport {\n    getPredefinedDimensionProp,\n    DIMENSION_PROP_NO_ITEMS,\n} from '../../../modules/predefinedDimensions'\n\nexport class DimensionLabel extends Component {\n    static propTypes = {\n        id: PropTypes.string.isRequired,\n        isDeactivated: PropTypes.bool.isRequired,\n        onClick: PropTypes.func.isRequired,\n        children: PropTypes.array,\n    }\n\n    onLabelClick = () => {\n        if (\n            !this.props.isDeactivated &&\n            !getPredefinedDimensionProp(this.props.id, DIMENSION_PROP_NO_ITEMS)\n        ) {\n            this.props.onClick(this.props.id)\n        }\n    }\n\n    onKeyPress = event => {\n        if (event.key === 'Enter' && event.ctrlKey === false) {\n            this.onLabelClick()\n        }\n    }\n\n    render() {\n        return (\n            <div\n                data-test={`dimension-id-${this.props.id}`}\n                className=\"label\"\n                onClick={this.onLabelClick}\n                onKeyPress={this.onKeyPress}\n                tabIndex={0}\n                style={styles.label}\n            >\n                {this.props.children}\n            </div>\n        )\n    }\n}\n\nexport default DimensionLabel\n","import { colors, theme } from '@dhis2/ui-core'\n\nexport const styles = {\n    toolTip: {\n        color: colors.white,\n        backgroundColor: '#4a4a4a',\n        boxShadow: 'none',\n        width: '160px',\n        borderRadius: '3px',\n        position: 'relative',\n        top: '5px',\n        fontSize: '12px',\n        padding: '7px 9px',\n    },\n    recommendedIcon: {\n        backgroundColor: theme.secondary300,\n        height: '8px',\n        width: '8px',\n        borderRadius: '4px',\n        marginLeft: '5px',\n        display: 'inline-block',\n        cursor: 'pointer',\n    },\n}\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport Paper from '@material-ui/core/Paper'\nimport Popper from '@material-ui/core/Popper'\nimport i18n from '@dhis2/d2-i18n'\n\nimport { styles } from './styles/RecommendedIcon.style'\n\nexport class RecommendedIcon extends Component {\n    state = { anchorEl: null }\n\n    onMouseOver = event => {\n        this.setState({ anchorEl: event.currentTarget })\n    }\n\n    onMouseExit = () => {\n        this.setState({ anchorEl: null })\n    }\n\n    showTooltip = () => (\n        <Popper\n            anchorEl={this.state.anchorEl}\n            open={Boolean(this.state.anchorEl)}\n            placement=\"bottom\"\n        >\n            <Paper style={styles.toolTip}>\n                {i18n.t('Dimension recommended with selected data')}\n            </Paper>\n        </Popper>\n    )\n\n    render() {\n        const TooltipOnHover = this.state.anchorEl ? this.showTooltip() : null\n\n        return this.props.isRecommended ? (\n            <div\n                style={styles.recommendedIcon}\n                onMouseOver={this.onMouseOver}\n                onMouseLeave={this.onMouseExit}\n            >\n                {TooltipOnHover}\n            </div>\n        ) : null\n    }\n}\n\nRecommendedIcon.propTypes = {\n    isRecommended: PropTypes.bool.isRequired,\n}\n\nexport default RecommendedIcon\n","import React from 'react'\nimport PropTypes from 'prop-types'\n\nconst MoreHorizontalIcon = ({ style }) => {\n    return (\n        <svg\n            style={{\n                ...style,\n            }}\n            xmlns=\"http://www.w3.org/2000/svg\"\n            width=\"22\"\n            height=\"24\"\n            viewBox=\"0 0 24 24\"\n        >\n            <path d=\"M0 0h24v24H0z\" fill=\"none\" />\n            <path d=\"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z\" />\n        </svg>\n    )\n}\n\nMoreHorizontalIcon.propTypes = {\n    style: PropTypes.array,\n}\n\nexport default MoreHorizontalIcon\n","import React from 'react'\nimport IconButton from '@material-ui/core/IconButton'\nimport PropTypes from 'prop-types'\n\nimport MoreHorizontalIcon from '../../../assets/MoreHorizontalIcon'\n\nexport const OptionsButton = ({ style, onClick }) => (\n    <IconButton style={style} onClick={onClick}>\n        <MoreHorizontalIcon />\n    </IconButton>\n)\n\nOptionsButton.propTypes = {\n    style: PropTypes.object,\n    onClick: PropTypes.func,\n}\n\nexport default OptionsButton\n","import React from 'react'\n\nconst DynamicDimensionIcon = () => {\n    return (\n        <svg\n            width=\"16px\"\n            height=\"16px\"\n            viewBox=\"0 0 16 16\"\n            version=\"1.1\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n        >\n            <g\n                id=\"Exp\"\n                stroke=\"none\"\n                strokeWidth=\"1\"\n                fill=\"none\"\n                fillRule=\"evenodd\"\n            >\n                <g id=\"Artboard\" transform=\"translate(-80.000000, -9.000000)\">\n                    <g\n                        id=\"icon_dimension_new\"\n                        transform=\"translate(80.000000, 9.000000)\"\n                    >\n                        <rect id=\"frame\" x=\"0\" y=\"0\" width=\"16\" height=\"16\" />\n                        <g\n                            id=\"module\"\n                            transform=\"translate(4.000000, 4.000000)\"\n                            stroke=\"#000000\"\n                            strokeLinecap=\"round\"\n                            strokeLinejoin=\"round\"\n                        >\n                            <path\n                                d=\"M0.33209728,1.1742111 L3.16308174,0.0641666694 C3.37911767,-0.0213888898 3.61963794,-0.0213888898 3.83567387,0.0641666694 L6.66665833,1.1742111 C6.87300668,1.26220739 7.00497003,1.467 6.99984343,1.69127776 L6.99984343,5.30887771 C7.00517859,5.53285411 6.87376309,5.73756106 6.66790272,5.82594437 L3.83691826,6.93629991 C3.62076407,7.02123336 3.38048032,7.02123336 3.16432613,6.93629991 L0.333341668,5.82594437 C0.126993317,5.73794808 -0.00497002591,5.53315547 0.000156574133,5.30887771 L0.000156574133,1.69127776 C-0.00517858533,1.46730136 0.126236906,1.26259441 0.33209728,1.1742111 Z\"\n                                id=\"Shape\"\n                            />\n                            <path\n                                d=\"M3.5,2.72795833 L0.322,1.48195833\"\n                                id=\"Shape\"\n                            />\n                            <path\n                                d=\"M3.5,2.72795833 L6.678,1.48195833\"\n                                id=\"Shape\"\n                            />\n                            <path d=\"M3.5,6.78125 L3.5,2.72795833\" id=\"Shape\" />\n                        </g>\n                    </g>\n                </g>\n            </g>\n        </svg>\n    )\n}\n\nexport default DynamicDimensionIcon\n","import { colors, theme } from '@dhis2/ui-core'\n\nexport const styles = {\n    labelWrapper: {\n        padding: '2px 5px 2px 0',\n    },\n    text: {\n        color: colors.grey900,\n        userSelect: 'none',\n        cursor: 'pointer',\n        wordBreak: 'break-word',\n        fontSize: '14px',\n    },\n    textDeactivated: {\n        cursor: 'auto',\n        color: colors.grey500,\n    },\n    item: {\n        display: 'flex',\n        minHeight: '24px',\n        marginTop: 3,\n        marginBottom: 3,\n        alignItems: 'center',\n        borderRadius: '2px',\n    },\n    selected: {\n        backgroundColor: theme.secondary100,\n        fontWeight: 500,\n    },\n    fixedDimensionIcon: {\n        paddingLeft: '6px',\n        paddingBottom: '2px',\n    },\n    dynamicDimensionIcon: {\n        paddingLeft: '9px',\n        paddingRight: '9px',\n    },\n    iconWrapper: {\n        display: 'flex',\n        flexDirection: 'column',\n        padding: '3px 8px 0 8px',\n    },\n    lockIcon: {\n        fontSize: '14px',\n        marginTop: '1px',\n    },\n    optionsWrapper: {\n        position: 'relative',\n        height: '24px',\n        minWidth: '22px',\n        left: '5px',\n        alignSelf: 'start',\n    },\n    optionsButton: {\n        border: 'none',\n        background: 'none',\n        outline: 'none',\n        cursor: 'pointer',\n        padding: '1px 0px 0px 0px',\n    },\n}\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport LockIcon from '@material-ui/icons/Lock'\n\nimport DimensionLabel from './DimensionLabel'\nimport RecommendedIcon from './RecommendedIcon'\nimport OptionsButton from './OptionsButton'\nimport DynamicDimensionIcon from '../../../assets/DynamicDimensionIcon'\nimport { getPredefinedDimensionProp } from '../../../modules/predefinedDimensions'\nimport { styles } from './styles/DimensionItem.style'\n\nexport class DimensionItem extends Component {\n    state = { mouseOver: false }\n\n    onOptionsClick = id => event => this.props.onOptionsClick(event, id)\n\n    onMouseOver = () => {\n        this.setState({ mouseOver: true })\n    }\n\n    onMouseExit = () => {\n        this.setState({ mouseOver: false })\n    }\n\n    getDimensionIcon = () => {\n        const Icon = getPredefinedDimensionProp(this.props.id, 'icon')\n        return Icon ? (\n            <Icon style={styles.fixedDimensionIcon} />\n        ) : (\n            <DynamicDimensionIcon style={styles.dynamicDimensionIcon} />\n        )\n    }\n\n    getDimensionType = () => {\n        const { id, name, isDeactivated } = this.props\n\n        return (\n            <span\n                data-dimensionid={id}\n                style={{\n                    ...styles.text,\n                    ...(isDeactivated ? styles.textDeactivated : {}),\n                }}\n            >\n                {name}\n            </span>\n        )\n    }\n\n    render() {\n        const {\n            id,\n            isDeactivated,\n            isSelected,\n            isRecommended,\n            isLocked,\n            onClick,\n            onOptionsClick,\n            innerRef,\n            style,\n            ...rest\n        } = this.props\n\n        const Icon = this.getDimensionIcon()\n        const Label = this.getDimensionType()\n        const itemStyle =\n            isSelected && !isDeactivated\n                ? { ...styles.item, ...styles.selected }\n                : styles.item\n\n        return (\n            <li\n                onMouseOver={this.onMouseOver}\n                onMouseLeave={this.onMouseExit}\n                ref={innerRef}\n                style={Object.assign({}, itemStyle, style)}\n                {...rest}\n            >\n                <DimensionLabel\n                    id={id}\n                    isDeactivated={isDeactivated}\n                    onClick={onClick}\n                >\n                    <div style={styles.iconWrapper}>{Icon}</div>\n                    <div style={styles.labelWrapper}>\n                        {Label}\n                        <RecommendedIcon isRecommended={isRecommended} />\n                    </div>\n                    {isLocked && (\n                        <div style={styles.iconWrapper}>\n                            <LockIcon style={styles.lockIcon} />\n                        </div>\n                    )}\n                </DimensionLabel>\n                {onOptionsClick ? (\n                    <div style={styles.optionsWrapper}>\n                        {this.state.mouseOver && !isDeactivated && !isLocked ? (\n                            <OptionsButton\n                                style={styles.optionsButton}\n                                onClick={this.onOptionsClick(id)}\n                            />\n                        ) : null}\n                    </div>\n                ) : null}\n            </li>\n        )\n    }\n}\n\nDimensionItem.propTypes = {\n    id: PropTypes.string.isRequired,\n    isSelected: PropTypes.bool.isRequired, // XXX\n    name: PropTypes.string.isRequired,\n    innerRef: PropTypes.func,\n    isDeactivated: PropTypes.bool,\n    isLocked: PropTypes.bool,\n    isRecommended: PropTypes.bool,\n    style: PropTypes.object,\n    onClick: PropTypes.func,\n    onOptionsClick: PropTypes.func,\n}\n\nDimensionItem.defaultProps = {\n    isDeactivated: false,\n    isRecommended: false,\n    isSelected: false,\n    isLocked: false,\n    onClick: Function.prototype,\n    innerRef: Function.prototype,\n    style: {},\n}\n\nexport default DimensionItem\n","import { colors, spacers } from '@dhis2/ui-core'\n\n// Fix for vertical flex scrolling in Firefox/Safari:\n// Wrap the list in a div with position:relative (and flex:1 instead of on the list)\n// On the list, set position:absolute, width:100%, height:100%\n\nexport const styles = {\n    container: {\n        position: 'relative',\n        flex: '1 1 0%',\n        minHeight: '30vh',\n    },\n    wrapper: {\n        position: 'absolute',\n        width: '100%',\n        height: '100%',\n        overflow: 'auto',\n        marginTop: '0px',\n        padding: 0,\n    },\n    list: {\n        margin: 0,\n        padding: 0,\n    },\n    header: {\n        textTransform: 'uppercase',\n        fontSize: '11px',\n        color: colors.grey700,\n        margin: '5px 0',\n        letterSpacing: '0.3px',\n    },\n    section: {\n        '&:not(:last-child)': {\n            marginBottom: spacers.dp24,\n        },\n    },\n}\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport { withStyles } from '@material-ui/core/styles'\nimport i18n from '@dhis2/d2-i18n'\n\nimport DimensionItem from './DimensionItem'\nimport { styles } from './styles/DimensionList.style'\nimport {\n    getPredefinedDimensions,\n    getFixedDimensions,\n} from '../../../modules/predefinedDimensions'\n\nexport class DimensionList extends Component {\n    nameContainsFilterText = dimension =>\n        dimension.name\n            .toLowerCase()\n            .includes(this.props.filterText.toLowerCase())\n\n    isDisabled = dimensionId =>\n        this.props.disabledDimension(dimensionId) || false\n\n    isRecommended = dimensionId =>\n        this.props.recommendedDimension(dimensionId) || false\n\n    isLocked = dimensionId => this.props.lockedDimension(dimensionId) || false\n\n    renderItem = dimension => (\n        <DimensionItem\n            id={dimension.id}\n            key={dimension.id}\n            name={dimension.name}\n            isLocked={this.isLocked(dimension.id)}\n            isSelected={this.props.selectedIds.includes(dimension.id)}\n            isRecommended={this.isRecommended(dimension.id)}\n            isDeactivated={this.isDisabled(dimension.id)}\n            onClick={this.props.onDimensionClick}\n            onOptionsClick={this.props.onDimensionOptionsClick}\n            onDragStart={this.props.onDimensionDragStart}\n        />\n    )\n\n    getDimensionItemsByFilter = filter =>\n        this.props.dimensions\n            .filter(filter)\n            .filter(this.nameContainsFilterText)\n            .map(this.renderItem)\n\n    render() {\n        const { classes } = this.props\n        const fixedDimensions = this.getDimensionItemsByFilter(dimension =>\n            Object.values(getFixedDimensions()).some(\n                fixedDim => fixedDim.id === dimension.id\n            )\n        )\n        const nonPredefinedDimensions = this.getDimensionItemsByFilter(\n            dimension =>\n                !Object.values(getPredefinedDimensions()).some(\n                    predefDim => predefDim.id === dimension.id\n                )\n        )\n\n        return (\n            <div className={classes.container}>\n                <div className={classes.wrapper}>\n                    <div className={classes.section}>\n                        <h3 className={classes.header}>\n                            {i18n.t('Main dimensions')}\n                        </h3>\n                        <ul className={classes.list}>{fixedDimensions}</ul>\n                    </div>\n                    <div className={classes.section}>\n                        <h3 className={classes.header}>\n                            {i18n.t('Your dimensions')}\n                        </h3>\n                        <ul className={classes.list}>\n                            {nonPredefinedDimensions}\n                        </ul>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\nDimensionList.propTypes = {\n    dimensions: PropTypes.array.isRequired,\n    filterText: PropTypes.string.isRequired,\n    classes: PropTypes.object,\n    disabledDimension: PropTypes.func,\n    lockedDimension: PropTypes.func,\n    recommendedDimension: PropTypes.func,\n    selectedIds: PropTypes.array,\n    onDimensionClick: PropTypes.func,\n    onDimensionDragStart: PropTypes.func,\n    onDimensionOptionsClick: PropTypes.func,\n}\n\nDimensionList.defaultProps = {\n    selectedIds: [],\n    disabledDimension: Function.prototype,\n    lockedDimension: Function.prototype,\n    recommendedDimension: Function.prototype,\n}\n\nexport default withStyles(styles)(DimensionList)\n","import { colors } from '@dhis2/ui-core'\n\nexport const styles = {\n    divContainer: {\n        height: '100%',\n        display: 'flex',\n        flexDirection: 'column',\n        backgroundColor: colors.grey050,\n        padding: '8px',\n        overflow: 'hidden',\n    },\n    textField: {\n        marginBottom: '6px',\n        background: colors.white,\n        border: `1px solid ${colors.grey400}`,\n        borderRadius: '5px',\n    },\n}\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport i18n from '@dhis2/d2-i18n'\n\nimport Filter from '../Filter/Filter'\nimport DimensionList from './List/DimensionList'\nimport { styles } from './styles/DimensionsPanel.style'\n\nexport class DimensionsPanel extends Component {\n    state = { filterText: '' }\n\n    onClearFilter = () => {\n        this.setState({ filterText: '' })\n    }\n\n    onFilterTextChange = filterText => {\n        this.setState({ filterText })\n    }\n\n    render() {\n        const {\n            dimensions,\n            selectedIds,\n            disabledDimension,\n            lockedDimension,\n            recommendedDimension,\n            onDimensionClick,\n            onDimensionOptionsClick,\n            onDimensionDragStart,\n            style,\n        } = this.props\n\n        return (\n            <div style={{ ...styles.divContainer, ...style }}>\n                <Filter\n                    style={styles.textField}\n                    placeholder={i18n.t('Filter dimensions')}\n                    text={this.state.filterText}\n                    onChange={this.onFilterTextChange}\n                    onClear={this.onClearFilter}\n                    type=\"search\"\n                />\n                <DimensionList\n                    dimensions={dimensions}\n                    selectedIds={selectedIds}\n                    filterText={this.state.filterText}\n                    disabledDimension={disabledDimension}\n                    lockedDimension={lockedDimension}\n                    recommendedDimension={recommendedDimension}\n                    onDimensionOptionsClick={onDimensionOptionsClick}\n                    onDimensionClick={onDimensionClick}\n                    onDimensionDragStart={onDimensionDragStart}\n                />\n            </div>\n        )\n    }\n}\n\nDimensionsPanel.propTypes = {\n    dimensions: PropTypes.array.isRequired,\n    disabledDimension: PropTypes.func,\n    lockedDimension: PropTypes.func,\n    recommendedDimension: PropTypes.func,\n    selectedIds: PropTypes.array,\n    style: PropTypes.object,\n    onDimensionClick: PropTypes.func,\n    onDimensionDragStart: PropTypes.func,\n    onDimensionOptionsClick: PropTypes.func,\n}\n\nDimensionsPanel.defaultProps = {\n    selectedIds: [],\n    style: {},\n    onDimensionClick: Function.prototype,\n}\n\nexport default DimensionsPanel\n","// Axis\n\nexport const AXIS = {\n    defaultValue: [],\n    isValid: axis => Array.isArray(axis),\n}\n\n// Axis ids\n\nexport const AXIS_ID_COLUMNS = 'columns'\nexport const AXIS_ID_ROWS = 'rows'\nexport const AXIS_ID_FILTERS = 'filters'\nexport const AXIS_ID_YEAR_OVER_YEAR_SERIES = 'yearOverYearSeries'\nexport const AXIS_ID_YEAR_OVER_YEAR_CATEGORY = 'yearOverYearCategory'\n\nexport const DEFAULT_AXIS_IDS = [AXIS_ID_COLUMNS, AXIS_ID_ROWS, AXIS_ID_FILTERS]\nexport const ALL_AXIS_IDS = [\n    AXIS_ID_COLUMNS,\n    AXIS_ID_ROWS,\n    AXIS_ID_FILTERS,\n    AXIS_ID_YEAR_OVER_YEAR_SERIES,\n    AXIS_ID_YEAR_OVER_YEAR_CATEGORY,\n]\n","import React from 'react'\nimport SvgIcon from '@material-ui/core/SvgIcon'\n\nexport default (\n    <SvgIcon viewBox=\"0 0 16 16\">\n        <g stroke=\"none\" strokeWidth=\"1\" fill=\"none\" fillRule=\"evenodd\">\n            <g fill=\"#7B8998\">\n                <rect x=\"0\" y=\"15\" width=\"16\" height=\"1\"></rect>\n                <rect x=\"0\" y=\"0\" width=\"1\" height=\"16\"></rect>\n                <rect x=\"1\" y=\"10\" width=\"13\" height=\"3\"></rect>\n                <rect x=\"1\" y=\"5\" width=\"10\" height=\"3\"></rect>\n                <rect x=\"1\" y=\"0\" width=\"5\" height=\"3\"></rect>\n            </g>\n        </g>\n    </SvgIcon>\n)\n","import React from 'react'\nimport SvgIcon from '@material-ui/core/SvgIcon'\n\nexport default (\n    <SvgIcon viewBox=\"0 0 16 16\">\n        <g stroke=\"none\" strokeWidth=\"1\" fill=\"none\" fillRule=\"evenodd\">\n            <g fill=\"#7B8998\">\n                <rect x=\"0\" y=\"15\" width=\"16\" height=\"1\"></rect>\n                <rect x=\"0\" y=\"0\" width=\"1\" height=\"16\"></rect>\n                <rect x=\"1\" y=\"10\" width=\"6\" height=\"3\"></rect>\n                <rect x=\"8\" y=\"10\" width=\"6\" height=\"3\"></rect>\n                <rect x=\"1\" y=\"5\" width=\"3\" height=\"3\"></rect>\n                <rect x=\"5\" y=\"5\" width=\"5\" height=\"3\"></rect>\n                <rect x=\"1\" y=\"0\" width=\"4\" height=\"3\"></rect>\n                <rect x=\"6\" y=\"0\" width=\"3\" height=\"3\"></rect>\n            </g>\n        </g>\n    </SvgIcon>\n)\n","import React from 'react'\nimport SvgIcon from '@material-ui/core/SvgIcon'\n\nexport default (\n    <SvgIcon viewBox=\"0 0 16 16\">\n        <g stroke=\"none\" strokeWidth=\"1\" fill=\"none\" fillRule=\"evenodd\">\n            <g fill=\"#7B8998\">\n                <rect x=\"0\" y=\"15\" width=\"16\" height=\"1\"></rect>\n                <rect x=\"0\" y=\"0\" width=\"1\" height=\"16\"></rect>\n                <rect x=\"13\" y=\"8\" width=\"3\" height=\"7\"></rect>\n                <rect x=\"8\" y=\"2\" width=\"3\" height=\"13\"></rect>\n                <rect x=\"3\" y=\"4\" width=\"3\" height=\"11\"></rect>\n            </g>\n        </g>\n    </SvgIcon>\n)\n","import React from 'react'\nimport SvgIcon from '@material-ui/core/SvgIcon'\n\nexport default (\n    <SvgIcon viewBox=\"0 0 16 16\">\n        <g stroke=\"none\" strokeWidth=\"1\" fill=\"none\" fillRule=\"evenodd\">\n            <g fill=\"#7B8998\">\n                <rect x=\"0\" y=\"15\" width=\"16\" height=\"1\"></rect>\n                <rect x=\"0\" y=\"0\" width=\"1\" height=\"16\"></rect>\n                <rect x=\"13\" y=\"8\" width=\"3\" height=\"7\"></rect>\n                <rect x=\"13\" y=\"4\" width=\"3\" height=\"3\"></rect>\n                <rect x=\"8\" y=\"9\" width=\"3\" height=\"6\"></rect>\n                <rect x=\"8\" y=\"1\" width=\"3\" height=\"7\"></rect>\n                <rect x=\"3\" y=\"13\" width=\"3\" height=\"2\"></rect>\n                <rect x=\"3\" y=\"7\" width=\"3\" height=\"5\"></rect>\n            </g>\n        </g>\n    </SvgIcon>\n)\n","import React from 'react'\nimport SvgIcon from '@material-ui/core/SvgIcon'\n\nexport default (\n    <SvgIcon viewBox=\"0 0 16 16\">\n        <g stroke=\"none\" strokeWidth=\"1\" fill=\"none\" fillRule=\"evenodd\">\n            <g>\n                <mask id=\"mask-2\" fill=\"white\">\n                    <rect x=\"0\" y=\"0\" width=\"16\" height=\"16\"></rect>\n                </mask>\n                <rect\n                    fill=\"#7B8998\"\n                    mask=\"url(#mask-2)\"\n                    x=\"0\"\n                    y=\"15\"\n                    width=\"16\"\n                    height=\"1\"\n                ></rect>\n                <rect\n                    fill=\"#7B8998\"\n                    mask=\"url(#mask-2)\"\n                    x=\"0\"\n                    y=\"0\"\n                    width=\"1\"\n                    height=\"16\"\n                ></rect>\n                <polyline\n                    stroke=\"#7B8998\"\n                    strokeWidth=\"1.5\"\n                    mask=\"url(#mask-2)\"\n                    points=\"0 5 5 9 9 7 15 12\"\n                ></polyline>\n            </g>\n        </g>\n    </SvgIcon>\n)\n","import React from 'react'\nimport SvgIcon from '@material-ui/core/SvgIcon'\n\nexport default (\n    <SvgIcon viewBox=\"0 0 16 16\">\n        <g stroke=\"none\" strokeWidth=\"1\" fill=\"none\" fillRule=\"evenodd\">\n            <mask fill=\"white\">\n                <rect x=\"0\" y=\"0\" width=\"16\" height=\"16\"></rect>\n            </mask>\n            <rect\n                fill=\"#7B8998\"\n                mask=\"url(#mask-2)\"\n                x=\"0\"\n                y=\"15\"\n                width=\"16\"\n                height=\"1\"\n            ></rect>\n            <rect\n                fill=\"#7B8998\"\n                mask=\"url(#mask-2)\"\n                x=\"0\"\n                y=\"0\"\n                width=\"1\"\n                height=\"16\"\n            ></rect>\n            <polygon\n                stroke=\"#7B8998\"\n                strokeWidth=\"1.5\"\n                fill=\"#7B8998\"\n                mask=\"url(#mask-2)\"\n                points=\"3 5 7 9 10 7 15 12 15 13 3 13\"\n            ></polygon>\n        </g>\n    </SvgIcon>\n)\n","import React from 'react'\nimport SvgIcon from '@material-ui/core/SvgIcon'\n\nexport default (\n    <SvgIcon viewBox=\"0 0 16 16\">\n        <g stroke=\"none\" strokeWidth=\"1\" fill=\"none\" fillRule=\"evenodd\">\n            <g transform=\"translate(-1.000000, 0.000000)\">\n                <path\n                    d=\"M9,0 C11.86,0 14.5,1.52 15.93,4 C17.36,6.48 17.36,9.52 15.93,12 C14.5,14.48 11.86,16 9,16 C6.14,16 3.5,14.48 2.07,12 C0.64,9.52 0.64,6.48 2.07,4 C3.5,1.52 6.14,0 9,0 L9,8 C9,8 9,8 9,8 C9,8 9,8 9,8 C9,8 9,8 9,8 C9,8 9,8 9,8 C9,8 9,8 9,8 C9,8 9,8 9,8 L9,0 Z\"\n                    fillOpacity=\"0.002\"\n                    fill=\"#455A64\"\n                ></path>\n                <path\n                    d=\"M9.25,0.253999142 L9.25,7.62589712 L16.0605377,4.80583684 C15.9597575,4.58208479 15.8426843,4.35299631 15.7134245,4.12488021 C14.3709859,1.79673487 11.9260373,0.33967375 9.25,0.253999142 Z\"\n                    stroke=\"#FFFFFF\"\n                    strokeWidth=\"0.5\"\n                    fill=\"#7B8998\"\n                ></path>\n                <path\n                    d=\"M16.2507321,5.26825168 L9.25,8.16706634 L9.25,15.7459734 C11.5677905,15.6712788 13.7388491,14.5610154 15.1515843,12.7179105 C16.7838303,10.5884861 17.1923733,7.7729977 16.2507321,5.26825168 Z\"\n                    stroke=\"#FFFFFF\"\n                    strokeWidth=\"0.5\"\n                    fill=\"#7B8998\"\n                ></path>\n                <path\n                    d=\"M8.75,15.7460009 L8.75,0.253999142 C6.07396269,0.33967375 3.62901411,1.79673487 2.28657547,4.12488021 C0.901141511,6.52759085 0.901141511,9.47240915 2.28657547,11.8751198 C3.62901411,14.2032651 6.07396269,15.6603262 8.75,15.7460009 Z\"\n                    stroke=\"#FFFFFF\"\n                    strokeWidth=\"0.5\"\n                    fill=\"#7B8998\"\n                ></path>\n            </g>\n            <g transform=\"translate(-1.000000, 0.000000)\">\n                <path\n                    d=\"M9,0 C11.86,0 14.5,1.52 15.93,4 C17.36,6.48 17.36,9.52 15.93,12 C14.5,14.48 11.86,16 9,16 C6.14,16 3.5,14.48 2.07,12 C0.64,9.52 0.64,6.48 2.07,4 C3.5,1.52 6.14,0 9,0 L9,8 C9,8 9,8 9,8 C9,8 9,8 9,8 C9,8 9,8 9,8 C9,8 9,8 9,8 C9,8 9,8 9,8 C9,8 9,8 9,8 L9,0 Z\"\n                    fillOpacity=\"0.002\"\n                    fill=\"#455A64\"\n                ></path>\n                <path\n                    d=\"M9.25,0.253999142 L9.25,7.87969351 L15.208572,12.6370174 C15.3964843,12.3885798 15.5650482,12.1347754 15.7134245,11.8751198 C17.0988585,9.47240915 17.0988585,6.52759085 15.7134245,4.12488021 C14.3709859,1.79673487 11.9260373,0.33967375 9.25,0.253999142 Z\"\n                    stroke=\"#FFFFFF\"\n                    strokeWidth=\"0.5\"\n                    fill=\"#7B8998\"\n                ></path>\n                <path\n                    d=\"M14.8955472,13.0269114 L9.08920592,8.3911285 L5.86513188,15.0901411 C6.48561254,15.3656722 7.15156976,15.5571176 7.84755483,15.6628368 C10.5003854,16.0659171 13.160928,15.0629335 14.8955472,13.0269114 Z\"\n                    stroke=\"#FFFFFF\"\n                    strokeWidth=\"0.5\"\n                    fill=\"#7B8998\"\n                ></path>\n                <path\n                    d=\"M5.41482695,14.8728263 L8.75,7.94297101 L8.75,0.253977185 C7.27404265,0.301055104 5.8471024,0.764373723 4.63088851,1.5965198 C2.34652789,3.15491836 1.06570164,5.81818129 1.26932408,8.58162875 C1.46659354,11.2588571 3.03960782,13.6359852 5.41482695,14.8728263 Z\"\n                    stroke=\"#FFFFFF\"\n                    strokeWidth=\"0.5\"\n                    fill=\"#7B8998\"\n                ></path>\n            </g>\n        </g>\n    </SvgIcon>\n)\n","import React from 'react'\nimport SvgIcon from '@material-ui/core/SvgIcon'\n\nexport default (\n    <SvgIcon viewBox=\"0 0 16 16\">\n        <g stroke=\"none\" strokeWidth=\"1\" fill=\"none\" fillRule=\"evenodd\">\n            <circle stroke=\"#7B8998\" cx=\"8\" cy=\"8\" r=\"6\"></circle>\n            <circle stroke=\"#7B8998\" cx=\"8\" cy=\"8\" r=\"3\"></circle>\n            <circle fill=\"#7B8998\" cx=\"8\" cy=\"2\" r=\"2\"></circle>\n            <circle fill=\"#7B8998\" cx=\"3\" cy=\"12\" r=\"2\"></circle>\n        </g>\n    </SvgIcon>\n)\n","import React from 'react'\nimport SvgIcon from '@material-ui/core/SvgIcon'\n\nexport default (\n    <SvgIcon viewBox=\"0 0 16 16\">\n        <g stroke=\"none\" strokeWidth=\"1\" fill=\"none\" fillRule=\"evenodd\">\n            <g>\n                <mask fill=\"white\">\n                    <polygon points=\"0 0 16 0 16 16 0 16\"></polygon>\n                </mask>\n            </g>\n            <path\n                d=\"M15,12 C15,8.13400675 11.8659932,5 8,5 C4.13400675,5 1,8.13400675 1,12\"\n                stroke=\"#7B8998\"\n            ></path>\n            <g transform=\"translate(1.000000, 6.000000)\">\n                <path\n                    d=\"M7,0 C9.14,0 11.13,1.14 12.2,3 C13.27,4.86 13.27,7.14 12.2,9 C11.13,10.86 9.14,12 7,12 C4.86,12 2.87,10.86 1.8,9 C0.73,7.14 0.73,4.86 1.8,3 C2.87,1.14 4.86,0 7,0 L7,3 C5.93,3 4.94,3.57 4.4,4.5 C3.86,5.43 3.86,6.57 4.4,7.5 C4.94,8.43 5.93,9 7,9 C8.07,9 9.06,8.43 9.6,7.5 C10.14,6.57 10.14,5.43 9.6,4.5 C9.06,3.57 8.07,3 7,3 L7,0 Z\"\n                    fillOpacity=\"0.002\"\n                    fill=\"#455A64\"\n                ></path>\n                <path\n                    d=\"M1,6 C1,3.86 2.14,1.87 4,0.8 C4.91,0.27 5.95,0 7,0 L7,3 C5.93,3 4.94,3.57 4.4,4.5 C4.14,4.96 4,5.47 4,6 L1,6 Z\"\n                    fill=\"#7B8998\"\n                ></path>\n            </g>\n        </g>\n    </SvgIcon>\n)\n","import React from 'react'\nimport SvgIcon from '@material-ui/core/SvgIcon'\n\nexport default (\n    <SvgIcon viewBox=\"0 0 16 16\">\n        <g stroke=\"none\" strokeWidth=\"1\" fill=\"none\" fillRule=\"evenodd\">\n            <g>\n                <mask id=\"mask-2\" fill=\"white\">\n                    <rect id=\"path-1\" x=\"0\" y=\"0\" width=\"16\" height=\"16\"></rect>\n                </mask>\n                <rect\n                    fill=\"#7B8998\"\n                    mask=\"url(#mask-2)\"\n                    x=\"0\"\n                    y=\"15\"\n                    width=\"16\"\n                    height=\"1\"\n                ></rect>\n                <rect\n                    fill=\"#7B8998\"\n                    mask=\"url(#mask-2)\"\n                    x=\"0\"\n                    y=\"0\"\n                    width=\"1\"\n                    height=\"16\"\n                ></rect>\n                <polyline\n                    stroke=\"#7B8998\"\n                    strokeWidth=\"1.5\"\n                    mask=\"url(#mask-2)\"\n                    points=\"0 5 5 10 10 6 15 12\"\n                ></polyline>\n                <polyline\n                    stroke=\"#7B8998\"\n                    strokeWidth=\"1.5\"\n                    mask=\"url(#mask-2)\"\n                    points=\"0 10 5 2 10 12 15 4\"\n                ></polyline>\n            </g>\n        </g>\n    </SvgIcon>\n)\n","import React from 'react'\nimport SvgIcon from '@material-ui/core/SvgIcon'\n\nexport default (\n    <SvgIcon viewBox=\"0 0 16 16\">\n        <g stroke=\"none\" strokeWidth=\"1\" fill=\"none\" fillRule=\"evenodd\">\n            <g fill=\"#7B8998\">\n                <rect x=\"0\" y=\"15\" width=\"16\" height=\"1\"></rect>\n                <rect x=\"0\" y=\"0\" width=\"1\" height=\"16\"></rect>\n                <rect x=\"14\" y=\"9\" width=\"2\" height=\"6\"></rect>\n                <rect x=\"11\" y=\"2\" width=\"2\" height=\"13\"></rect>\n                <rect x=\"3\" y=\"11\" width=\"2\" height=\"4\"></rect>\n                <rect x=\"6\" y=\"9\" width=\"2\" height=\"6\"></rect>\n            </g>\n        </g>\n    </SvgIcon>\n)\n","import React from 'react'\nimport SvgIcon from '@material-ui/core/SvgIcon'\n\nexport default (\n    <SvgIcon viewBox=\"0 0 16 16\">\n        <g stroke=\"none\" strokeWidth=\"1\" fill=\"none\" fillRule=\"evenodd\">\n            <path\n                d=\"M3.85595703,11 L2.37060547,11 L2.37060547,6.27148438 L0.911621094,6.69775391 L0.911621094,5.57275391 L3.71972656,4.6015625 L3.85595703,4.6015625 L3.85595703,11 Z M10.25,11 L5.78515625,11 L5.78515625,10.0332031 L7.84179688,7.87109375 C8.34863535,7.29394243 8.60205078,6.83545092 8.60205078,6.49560547 C8.60205078,6.22021347 8.54199279,6.01074291 8.421875,5.8671875 C8.30175721,5.72363209 8.12744255,5.65185547 7.89892578,5.65185547 C7.67333872,5.65185547 7.49023508,5.74780177 7.34960938,5.93969727 C7.20898367,6.13159276 7.13867188,6.37109231 7.13867188,6.65820312 L5.65332031,6.65820312 C5.65332031,6.26562304 5.75146386,5.90307783 5.94775391,5.57055664 C6.14404395,5.23803545 6.41650216,4.97802828 6.76513672,4.79052734 C7.11377127,4.60302641 7.50341582,4.50927734 7.93408203,4.50927734 C8.62549174,4.50927734 9.15795712,4.66894372 9.53149414,4.98828125 C9.90503116,5.30761878 10.0917969,5.76611029 10.0917969,6.36376953 C10.0917969,6.61572392 10.0449223,6.86108279 9.95117188,7.09985352 C9.85742141,7.33862424 9.71167091,7.58911002 9.51391602,7.85131836 C9.31616112,8.1135267 8.99756079,8.46435327 8.55810547,8.90380859 L7.73193359,9.85742188 L10.25,9.85742188 L10.25,11 Z M12.3505859,7.18115234 L13.0493164,7.18115234 C13.6030301,7.18115234 13.8798828,6.91015896 13.8798828,6.36816406 C13.8798828,6.15722551 13.8139655,5.98510809 13.6821289,5.85180664 C13.5502923,5.71850519 13.364259,5.65185547 13.1240234,5.65185547 C12.9277334,5.65185547 12.7570808,5.7089838 12.6120605,5.82324219 C12.4670403,5.93750057 12.3945312,6.07958899 12.3945312,6.24951172 L10.9135742,6.24951172 C10.9135742,5.91259597 11.0073233,5.61230601 11.1948242,5.34863281 C11.3823252,5.08495962 11.6423323,4.87915113 11.9748535,4.73120117 C12.3073747,4.58325121 12.6728496,4.50927734 13.0712891,4.50927734 C13.7832067,4.50927734 14.3427714,4.67187337 14.75,4.99707031 C15.1572286,5.32226725 15.3608398,5.76904013 15.3608398,6.33740234 C15.3608398,6.61279435 15.2766122,6.87280151 15.1081543,7.11743164 C14.9396964,7.36206177 14.6943375,7.56054611 14.3720703,7.71289062 C14.7119158,7.83593812 14.9785147,8.02270383 15.171875,8.27319336 C15.3652353,8.52368289 15.4619141,8.83349425 15.4619141,9.20263672 C15.4619141,9.77392864 15.2421897,10.2309553 14.8027344,10.5737305 C14.3632791,10.9165056 13.7861364,11.0878906 13.0712891,11.0878906 C12.6523417,11.0878906 12.2634295,11.0080574 11.904541,10.8483887 C11.5456525,10.6887199 11.2739267,10.4675307 11.0893555,10.1848145 C10.9047842,9.9020982 10.8125,9.58056821 10.8125,9.22021484 L12.3022461,9.22021484 C12.3022461,9.41650489 12.3813469,9.58642506 12.5395508,9.72998047 C12.6977547,9.87353587 12.892577,9.9453125 13.1240234,9.9453125 C13.3847669,9.9453125 13.5927727,9.87280346 13.7480469,9.7277832 C13.9033211,9.58276295 13.980957,9.39746207 13.980957,9.171875 C13.980957,8.84960776 13.9003914,8.62109442 13.7392578,8.48632812 C13.5781242,8.35156183 13.3554702,8.28417969 13.0712891,8.28417969 L12.3505859,8.28417969 L12.3505859,7.18115234 Z\"\n                fill=\"#7B8998\"\n                fillRule=\"nonzero\"\n            ></path>\n        </g>\n    </SvgIcon>\n)\n","import React from 'react'\nimport SvgIcon from '@material-ui/core/SvgIcon'\n\nexport default (\n    <SvgIcon viewBox=\"0 0 16 16\">\n        <g stroke=\"none\" strokeWidth=\"1\" fill=\"none\" fillRule=\"evenodd\">\n            <g>\n                <polygon\n                    fill=\"#7B8998\"\n                    points=\"1 11 15 11 15 12 1 12\"\n                ></polygon>\n                <polygon fill=\"#7B8998\" points=\"6 1 7 1 7 15 6 15\"></polygon>\n                <polygon fill=\"#7B8998\" points=\"1 6 15 6 15 7 1 7\"></polygon>\n                <rect\n                    stroke=\"#7B8998\"\n                    x=\"0.5\"\n                    y=\"0.5\"\n                    width=\"15\"\n                    height=\"15\"\n                ></rect>\n            </g>\n        </g>\n    </SvgIcon>\n)\n","import i18n from '@dhis2/d2-i18n'\nimport BarIcon from '../assets/BarIcon'\nimport StackedBarIcon from '../assets/StackedBarIcon'\nimport ColumnIcon from '../assets/ColumnIcon'\nimport StackedColumnIcon from '../assets/StackedColumnIcon'\nimport LineIcon from '../assets/LineIcon'\nimport AreaIcon from '../assets/AreaIcon'\nimport PieIcon from '../assets/PieIcon'\nimport RadarIcon from '../assets/RadarIcon'\nimport GaugeIcon from '../assets/GaugeIcon'\nimport YearOverYearLineIcon from '../assets/YearOverYearLineIcon'\nimport YearOverYearColumnIcon from '../assets/YearOverYearColumnIcon'\nimport SingleValueIcon from '../assets/SingleValueIcon'\nimport PivotTableIcon from '../assets/PivotTableIcon'\n\nexport const VIS_TYPE_COLUMN = 'COLUMN'\nexport const VIS_TYPE_STACKED_COLUMN = 'STACKED_COLUMN'\nexport const VIS_TYPE_BAR = 'BAR'\nexport const VIS_TYPE_STACKED_BAR = 'STACKED_BAR'\nexport const VIS_TYPE_LINE = 'LINE'\nexport const VIS_TYPE_AREA = 'AREA'\nexport const VIS_TYPE_PIE = 'PIE'\nexport const VIS_TYPE_RADAR = 'RADAR'\nexport const VIS_TYPE_GAUGE = 'GAUGE'\nexport const VIS_TYPE_BUBBLE = 'BUBBLE'\nexport const VIS_TYPE_YEAR_OVER_YEAR_LINE = 'YEAR_OVER_YEAR_LINE'\nexport const VIS_TYPE_YEAR_OVER_YEAR_COLUMN = 'YEAR_OVER_YEAR_COLUMN'\nexport const VIS_TYPE_SINGLE_VALUE = 'SINGLE_VALUE'\nexport const VIS_TYPE_PIVOT_TABLE = 'PIVOT_TABLE'\n\nexport const visTypeDisplayNames = {\n    [VIS_TYPE_COLUMN]: i18n.t('Column'),\n    [VIS_TYPE_STACKED_COLUMN]: i18n.t('Stacked column'),\n    [VIS_TYPE_BAR]: i18n.t('Bar'),\n    [VIS_TYPE_STACKED_BAR]: i18n.t('Stacked bar'),\n    [VIS_TYPE_LINE]: i18n.t('Line'),\n    [VIS_TYPE_AREA]: i18n.t('Area'),\n    [VIS_TYPE_PIE]: i18n.t('Pie'),\n    [VIS_TYPE_RADAR]: i18n.t('Radar'),\n    [VIS_TYPE_GAUGE]: i18n.t('Gauge'),\n    [VIS_TYPE_YEAR_OVER_YEAR_LINE]: i18n.t('Year over year (line)'),\n    [VIS_TYPE_YEAR_OVER_YEAR_COLUMN]: i18n.t('Year over year (column)'),\n    [VIS_TYPE_SINGLE_VALUE]: i18n.t('Single value'),\n    [VIS_TYPE_PIVOT_TABLE]: i18n.t('Pivot table'),\n}\n\nexport const visTypeIcons = {\n    [VIS_TYPE_BAR]: BarIcon,\n    [VIS_TYPE_STACKED_BAR]: StackedBarIcon,\n    [VIS_TYPE_COLUMN]: ColumnIcon,\n    [VIS_TYPE_STACKED_COLUMN]: StackedColumnIcon,\n    [VIS_TYPE_LINE]: LineIcon,\n    [VIS_TYPE_AREA]: AreaIcon,\n    [VIS_TYPE_PIE]: PieIcon,\n    [VIS_TYPE_RADAR]: RadarIcon,\n    [VIS_TYPE_GAUGE]: GaugeIcon,\n    [VIS_TYPE_YEAR_OVER_YEAR_LINE]: YearOverYearLineIcon,\n    [VIS_TYPE_YEAR_OVER_YEAR_COLUMN]: YearOverYearColumnIcon,\n    [VIS_TYPE_SINGLE_VALUE]: SingleValueIcon,\n    [VIS_TYPE_PIVOT_TABLE]: PivotTableIcon,\n}\n\nexport const getDisplayNameByVisType = visType => {\n    const displayName = visTypeDisplayNames[visType]\n\n    if (!displayName) {\n        throw new Error(`${visType} is not a valid visualization type`)\n    }\n\n    return displayName\n}\n\nconst stackedTypes = [\n    VIS_TYPE_STACKED_COLUMN,\n    VIS_TYPE_STACKED_BAR,\n    VIS_TYPE_AREA,\n]\n\nconst yearOverYearTypes = [\n    VIS_TYPE_YEAR_OVER_YEAR_LINE,\n    VIS_TYPE_YEAR_OVER_YEAR_COLUMN,\n]\n\nconst dualAxisTypes = [\n    VIS_TYPE_COLUMN,\n    VIS_TYPE_BAR,\n    VIS_TYPE_LINE,\n    VIS_TYPE_AREA,\n]\n\nexport const defaultVisType = VIS_TYPE_COLUMN\nexport const isStacked = type => stackedTypes.includes(type)\nexport const isYearOverYear = type => yearOverYearTypes.includes(type)\nexport const isDualAxisType = type => dualAxisTypes.includes(type)\nexport const isSingleValue = type => type === VIS_TYPE_SINGLE_VALUE\n","import { AXIS_ID_COLUMNS, AXIS_ID_ROWS, AXIS_ID_FILTERS } from '../layout/axis'\nimport { DIMENSION_ID_PERIOD, DIMENSION_ID_DATA } from '../predefinedDimensions'\nimport {\n    VIS_TYPE_COLUMN,\n    VIS_TYPE_STACKED_COLUMN,\n    VIS_TYPE_BAR,\n    VIS_TYPE_STACKED_BAR,\n    VIS_TYPE_LINE,\n    VIS_TYPE_AREA,\n    VIS_TYPE_RADAR,\n    VIS_TYPE_GAUGE,\n    VIS_TYPE_PIE,\n    VIS_TYPE_SINGLE_VALUE,\n    VIS_TYPE_YEAR_OVER_YEAR_LINE,\n    VIS_TYPE_YEAR_OVER_YEAR_COLUMN,\n    VIS_TYPE_PIVOT_TABLE,\n} from '../visTypes'\n\nconst RULE_PROP_AVAILABLE_AXES = 'availableAxes',\n    RULE_PROP_MAX_DIMS_PER_AXIS = 'maxNumberOfDimsPerAxis',\n    RULE_PROP_MIN_DIMS_PER_AXIS = 'minNumberOfDimsPerAxis',\n    RULE_PROP_MAX_ITEMS_PER_AXIS = 'maxNumberOfItemsPerAxis',\n    RULE_PROP_DISALLOWED_DIMS = 'disallowedDims',\n    RULE_PROP_LOCKED_DIMS = 'lockedDims'\n\nconst defaultRules = {\n    [RULE_PROP_AVAILABLE_AXES]: [\n        AXIS_ID_COLUMNS,\n        AXIS_ID_ROWS,\n        AXIS_ID_FILTERS,\n    ],\n    [RULE_PROP_MAX_DIMS_PER_AXIS]: {\n        [AXIS_ID_COLUMNS]: 1,\n        [AXIS_ID_ROWS]: 1,\n    },\n    [RULE_PROP_MIN_DIMS_PER_AXIS]: {\n        [AXIS_ID_COLUMNS]: 1,\n        [AXIS_ID_ROWS]: 1,\n    },\n}\n\nconst pieRules = {\n    [RULE_PROP_AVAILABLE_AXES]: [AXIS_ID_COLUMNS, AXIS_ID_FILTERS],\n    [RULE_PROP_MAX_DIMS_PER_AXIS]: {\n        [AXIS_ID_COLUMNS]: 1,\n    },\n    [RULE_PROP_MIN_DIMS_PER_AXIS]: {\n        [AXIS_ID_COLUMNS]: 1,\n    },\n}\n\nconst singleValueRules = {\n    [RULE_PROP_AVAILABLE_AXES]: [AXIS_ID_FILTERS],\n    [RULE_PROP_MAX_DIMS_PER_AXIS]: {\n        [AXIS_ID_COLUMNS]: 1,\n    },\n    [RULE_PROP_MIN_DIMS_PER_AXIS]: {\n        [AXIS_ID_COLUMNS]: 1,\n    },\n    [RULE_PROP_MAX_ITEMS_PER_AXIS]: {\n        [AXIS_ID_COLUMNS]: 1,\n    },\n    [RULE_PROP_LOCKED_DIMS]: {\n        [DIMENSION_ID_DATA]: AXIS_ID_COLUMNS,\n    },\n}\n\nconst yearOverYearRules = {\n    [RULE_PROP_AVAILABLE_AXES]: [AXIS_ID_FILTERS],\n    [RULE_PROP_DISALLOWED_DIMS]: [DIMENSION_ID_PERIOD],\n}\n\nconst pivotTableRules = {\n    [RULE_PROP_AVAILABLE_AXES]: [\n        AXIS_ID_COLUMNS,\n        AXIS_ID_ROWS,\n        AXIS_ID_FILTERS,\n    ],\n}\n\nconst visTypeToRules = {\n    [VIS_TYPE_COLUMN]: defaultRules,\n    [VIS_TYPE_STACKED_COLUMN]: defaultRules,\n    [VIS_TYPE_BAR]: defaultRules,\n    [VIS_TYPE_STACKED_BAR]: defaultRules,\n    [VIS_TYPE_LINE]: defaultRules,\n    [VIS_TYPE_AREA]: defaultRules,\n    [VIS_TYPE_RADAR]: defaultRules,\n    [VIS_TYPE_GAUGE]: singleValueRules,\n    [VIS_TYPE_PIE]: pieRules,\n    [VIS_TYPE_SINGLE_VALUE]: singleValueRules,\n    [VIS_TYPE_YEAR_OVER_YEAR_LINE]: yearOverYearRules,\n    [VIS_TYPE_YEAR_OVER_YEAR_COLUMN]: yearOverYearRules,\n    [VIS_TYPE_PIVOT_TABLE]: pivotTableRules,\n}\n\nconst getRulesByVisType = visType => {\n    const rules = visTypeToRules[visType]\n\n    if (!rules) {\n        throw new Error(`${visType} is not a known visualization type`)\n    }\n\n    return rules\n}\n\n// Selectors\n\nexport const getAvailableAxesByVisType = visType =>\n    getRulesByVisType(visType)[RULE_PROP_AVAILABLE_AXES] || []\n\nexport const getMaxNumberOfDimsPerAxisByVisType = visType =>\n    getRulesByVisType(visType)[RULE_PROP_MAX_DIMS_PER_AXIS] || {}\n\nexport const getMinNumberOfDimsPerAxisByVisType = visType =>\n    getRulesByVisType(visType)[RULE_PROP_MIN_DIMS_PER_AXIS] || {}\n\nexport const getMaxNumberOfItemsPerAxisByVisType = visType =>\n    getRulesByVisType(visType)[RULE_PROP_MAX_ITEMS_PER_AXIS] || {}\n\nexport const getDisallowedDimsByVisType = visType =>\n    getRulesByVisType(visType)[RULE_PROP_DISALLOWED_DIMS] || []\n\nexport const getLockedDimsByVisType = visType =>\n    getRulesByVisType(visType)[RULE_PROP_LOCKED_DIMS] || {}\n\n// Test exports\n\nexport const testResourceRequiredProps = [RULE_PROP_AVAILABLE_AXES]\n\nexport const testResourceRules = [...new Set(Object.values(visTypeToRules))]\n\nexport const testResourceAllRuleProps = {\n    AVAILABLE_AXES: RULE_PROP_AVAILABLE_AXES,\n    MAX_DIMS_PER_AXIS: RULE_PROP_MAX_DIMS_PER_AXIS,\n    MIN_DIMS_PER_AXIS: RULE_PROP_MIN_DIMS_PER_AXIS,\n    MAX_ITEMS_PER_AXIS: RULE_PROP_MAX_ITEMS_PER_AXIS,\n    DISALLOWED_DIMS: RULE_PROP_DISALLOWED_DIMS,\n    LOCKED_DIMS: RULE_PROP_LOCKED_DIMS,\n}\n","import {\n    getMaxNumberOfItemsPerAxisByVisType,\n    getMaxNumberOfDimsPerAxisByVisType,\n    getMinNumberOfDimsPerAxisByVisType,\n    getLockedDimsByVisType,\n} from './rules'\n\n// Selectors\n\nexport { getAvailableAxesByVisType, getDisallowedDimsByVisType } from './rules'\n\nexport const getAxisMaxNumberOfItemsByVisType = (visType, axisId) =>\n    getMaxNumberOfItemsPerAxisByVisType(visType)[axisId]\n\nexport const getAxisMaxNumberOfDimsByVisType = (visType, axisId) =>\n    getMaxNumberOfDimsPerAxisByVisType(visType)[axisId]\n\nexport const getAxisMinNumberOfDimsByVisType = (visType, axisId) =>\n    getMinNumberOfDimsPerAxisByVisType(visType)[axisId]\n\nexport const getAxisPerLockedDimByVisType = (visType, dimensionId) =>\n    getLockedDimsByVisType(visType)[dimensionId]\n\nexport const getAllLockedDimIdsByVisType = visType =>\n    Object.keys(getLockedDimsByVisType(visType))\n","import { getLockedDimsByVisType } from './rules'\n\nimport {\n    getAxisMaxNumberOfDimsByVisType,\n    getAxisMaxNumberOfItemsByVisType,\n    getAllLockedDimIdsByVisType,\n} from './rulesHelper'\n\nexport const hasAxisTooManyItemsByVisType = (\n    visType,\n    axisId,\n    numberOfItems\n) => {\n    const maxNumberOfItemsPerAxis = getAxisMaxNumberOfItemsByVisType(\n        visType,\n        axisId\n    )\n\n    return maxNumberOfItemsPerAxis\n        ? numberOfItems > maxNumberOfItemsPerAxis\n        : false\n}\n\nexport const isDimensionLockedByVisType = (visType, dimensionId) =>\n    getAllLockedDimIdsByVisType(visType).includes(dimensionId)\n\nexport const isAxisFullByVisType = (visType, axisId, axisDimensionsCount) =>\n    axisDimensionsCount >= getAxisMaxNumberOfDimsByVisType(visType, axisId)\n\nexport const canDimensionBeAddedToAxisByVisType = (visType, axis, axisId) => {\n    const axisIsFull = isAxisFullByVisType(visType, axisId, axis.length)\n    const transferableDimension = getTransferableDimensionPerAxisByVisType(\n        visType,\n        axisId,\n        axis\n    )\n\n    // 1 dimension allowed in axis\n    // 1 dimension is already present and not locked\n    // the dragged one can be added and will cause the old one to be moved to filters\n    // what happens with max limit > 1, axis full and 1 or more locked dimensions?\n    return !(axisIsFull && !transferableDimension)\n}\n\nexport const getTransferableDimensionPerAxisByVisType = (\n    visType,\n    axisId,\n    axis\n) => {\n    const lockedDimsByVisType = getLockedDimsByVisType(visType)\n    const lockedDimIdsByAxis = Object.keys(lockedDimsByVisType).filter(\n        dimId => lockedDimsByVisType[dimId] === axisId\n    )\n\n    // return the last \"transferable\" dimension, this needs to be adjusted\n    // if we allow a defined max limit > 1 and the DND wants to drop the new\n    // dimension in a specific position\n    return axis.filter(dimId => !lockedDimIdsByAxis.includes(dimId)).pop()\n}\n","export const LAYOUT_TYPE_DEFAULT = 'LAYOUT_TYPE_DEFAULT'\nexport const LAYOUT_TYPE_PIE = 'LAYOUT_TYPE_PIE'\nexport const LAYOUT_TYPE_SINGLE_VALUE = 'LAYOUT_TYPE_SINGLE_VALUE'\nexport const LAYOUT_TYPE_YEAR_OVER_YEAR = 'LAYOUT_TYPE_YEAR_OVER_YEAR'\nexport const LAYOUT_TYPE_PIVOT_TABLE = 'LAYOUT_TYPE_PIVOT_TABLE'\n","import i18n from '@dhis2/d2-i18n'\nimport { AXIS_ID_COLUMNS, AXIS_ID_ROWS, AXIS_ID_FILTERS } from './layout/axis'\nimport {\n    LAYOUT_TYPE_DEFAULT,\n    LAYOUT_TYPE_PIE,\n    LAYOUT_TYPE_YEAR_OVER_YEAR,\n    LAYOUT_TYPE_PIVOT_TABLE,\n} from './layoutTypes'\n\nconst getAxisNamesByLayoutType = layoutType => {\n    switch (layoutType) {\n        case LAYOUT_TYPE_DEFAULT:\n        case LAYOUT_TYPE_PIE:\n        case LAYOUT_TYPE_YEAR_OVER_YEAR:\n        default:\n            return {\n                [AXIS_ID_COLUMNS]: i18n.t('Series'),\n                [AXIS_ID_ROWS]: i18n.t('Category'),\n                [AXIS_ID_FILTERS]: i18n.t('Filter'),\n            }\n        case LAYOUT_TYPE_PIVOT_TABLE:\n            return {\n                [AXIS_ID_COLUMNS]: i18n.t('Columns'),\n                [AXIS_ID_ROWS]: i18n.t('Rows'),\n                [AXIS_ID_FILTERS]: i18n.t('Filter'),\n            }\n    }\n}\n\nexport const getAxisNameByLayoutType = (axisId, layoutType) => {\n    const name = getAxisNamesByLayoutType(layoutType)[axisId]\n    if (!name) {\n        throw new Error(`${axisId} is not a valid axis id`)\n    }\n\n    return name\n}\n\nexport const getAxisName = axisId =>\n    getAxisNameByLayoutType(axisId, LAYOUT_TYPE_DEFAULT)\n","import {\n    VIS_TYPE_COLUMN,\n    VIS_TYPE_STACKED_COLUMN,\n    VIS_TYPE_BAR,\n    VIS_TYPE_STACKED_BAR,\n    VIS_TYPE_LINE,\n    VIS_TYPE_AREA,\n    VIS_TYPE_PIE,\n    VIS_TYPE_RADAR,\n    VIS_TYPE_GAUGE,\n    VIS_TYPE_YEAR_OVER_YEAR_LINE,\n    VIS_TYPE_YEAR_OVER_YEAR_COLUMN,\n    VIS_TYPE_SINGLE_VALUE,\n    VIS_TYPE_PIVOT_TABLE,\n} from './visTypes'\nimport {\n    LAYOUT_TYPE_DEFAULT,\n    LAYOUT_TYPE_PIE,\n    LAYOUT_TYPE_YEAR_OVER_YEAR,\n    LAYOUT_TYPE_PIVOT_TABLE,\n} from './layoutTypes'\n\nconst visTypeToLayoutType = {\n    [VIS_TYPE_COLUMN]: LAYOUT_TYPE_DEFAULT,\n    [VIS_TYPE_STACKED_COLUMN]: LAYOUT_TYPE_DEFAULT,\n    [VIS_TYPE_BAR]: LAYOUT_TYPE_DEFAULT,\n    [VIS_TYPE_STACKED_BAR]: LAYOUT_TYPE_DEFAULT,\n    [VIS_TYPE_LINE]: LAYOUT_TYPE_DEFAULT,\n    [VIS_TYPE_AREA]: LAYOUT_TYPE_DEFAULT,\n    [VIS_TYPE_PIE]: LAYOUT_TYPE_PIE,\n    [VIS_TYPE_RADAR]: LAYOUT_TYPE_DEFAULT,\n    [VIS_TYPE_GAUGE]: LAYOUT_TYPE_PIE,\n    [VIS_TYPE_YEAR_OVER_YEAR_LINE]: LAYOUT_TYPE_YEAR_OVER_YEAR,\n    [VIS_TYPE_YEAR_OVER_YEAR_COLUMN]: LAYOUT_TYPE_YEAR_OVER_YEAR,\n    [VIS_TYPE_SINGLE_VALUE]: LAYOUT_TYPE_PIE,\n    [VIS_TYPE_PIVOT_TABLE]: LAYOUT_TYPE_PIVOT_TABLE,\n}\n\nexport const getLayoutTypeByVisType = visType => visTypeToLayoutType[visType]\n","import React, { Component } from 'react'\nimport Divider from '@material-ui/core/Divider'\nimport Menu from '@material-ui/core/Menu'\nimport MenuItem from '@material-ui/core/MenuItem'\nimport ArrowRightIcon from '@material-ui/icons/ArrowRight'\nimport Zoom from '@material-ui/core/Zoom'\nimport i18n from '@dhis2/d2-i18n'\nimport PropTypes from 'prop-types'\nimport Tooltip from '@material-ui/core/Tooltip'\n\nimport { getAvailableAxes } from '../modules/layoutUiRules'\nimport { AXIS_ID_COLUMNS, AXIS_ID_FILTERS } from '../modules/layout/axis'\nimport {\n    DIMENSION_ID_DATA,\n    getPredefinedDimensionProp,\n    DIMENSION_PROP_NO_ITEMS,\n} from '../modules/predefinedDimensions'\nimport { isDualAxisType, getDisplayNameByVisType } from '../modules/visTypes'\nimport { getAxisNameByLayoutType } from '../modules/axis'\nimport { getLayoutTypeByVisType } from '../modules/visTypeToLayoutType'\n\nconst getAxisItemLabel = (axisName, isDimensionInLayout) =>\n    isDimensionInLayout\n        ? i18n.t('Move to {{axisName}}', { axisName })\n        : i18n.t('Add to {{axisName}}', { axisName })\n\nconst getRemoveMenuItem = onClick => (\n    <MenuItem key=\"remove-menu-item\" onClick={onClick}>\n        {i18n.t('Remove')}\n    </MenuItem>\n)\n\nconst getDividerItem = key => <Divider light key={key} />\n\nconst getUnavailableLabel = visType =>\n    i18n.t('Not available for {{visualizationType}}', {\n        visualizationType: getDisplayNameByVisType(visType),\n    })\n\nconst getDualAxisMenuItemLabel = (\n    currentAxisId,\n    visType,\n    numberOfDimensionItems\n) => {\n    let label\n\n    if (!isDualAxisType(visType)) {\n        label = getUnavailableLabel(visType)\n    } else if (numberOfDimensionItems < 2) {\n        label = i18n.t('Requires 2 or more data items')\n    } else if (currentAxisId !== AXIS_ID_COLUMNS) {\n        label = i18n.t('Only available when data is in Series')\n    }\n\n    return label\n}\n\nexport class DimensionMenu extends Component {\n    state = { submenuAnchorEl: null }\n    render() {\n        const {\n            dimensionId,\n            currentAxisId,\n            visType,\n            numberOfDimensionItems,\n            assignedCategoriesItemHandler,\n            isAssignedCategoriesInLayout,\n            dualAxisItemHandler,\n            axisItemHandler,\n            removeItemHandler,\n            anchorEl,\n            onClose,\n            classes,\n        } = this.props\n\n        const menuItems = []\n\n        const isDimensionInLayout = !!currentAxisId\n\n        // add/move to axis item\n        const availableAxisIds = getAvailableAxes(visType)\n\n        const applicableAxisIds = availableAxisIds.filter(\n            axisId => axisId !== currentAxisId\n        )\n\n        const assignedCategoriesAvailableDestinations = getAvailableAxes(\n            visType\n        ).filter(axis => axis !== AXIS_ID_FILTERS)\n\n        const assignedCategoriesItemLabel = isAssignedCategoriesInLayout\n            ? i18n.t('Remove Assigned Categories')\n            : i18n.t('Add Assigned Categories')\n\n        const closeSubMenu = () => {\n            this.setState({\n                submenuAnchorEl: null,\n            })\n        }\n\n        const closeWholeMenu = () => {\n            onClose()\n            closeSubMenu()\n        }\n\n        const getDualAxisMenuItem = isDisabled => (\n            <MenuItem\n                key={`dual-axis-item-${dimensionId}`}\n                onClick={() => {\n                    dualAxisItemHandler()\n                    closeWholeMenu()\n                }}\n                disabled={isDisabled}\n            >\n                <div>{i18n.t('Manage chart axes')}</div>\n            </MenuItem>\n        )\n\n        // Create dual axis menu item\n        if (dimensionId === DIMENSION_ID_DATA) {\n            if (\n                currentAxisId === AXIS_ID_COLUMNS &&\n                isDualAxisType(visType) &&\n                numberOfDimensionItems >= 2\n            ) {\n                menuItems.push(getDualAxisMenuItem(false))\n            } else {\n                const label = getDualAxisMenuItemLabel(\n                    currentAxisId,\n                    visType,\n                    numberOfDimensionItems\n                )\n                menuItems.push(\n                    <Tooltip\n                        key={`dual-axis-tooltip-${dimensionId}`}\n                        title={label}\n                        aria-label=\"disabled\"\n                        placement=\"right-start\"\n                        classes={classes}\n                    >\n                        <div>{getDualAxisMenuItem(true)}</div>\n                    </Tooltip>\n                )\n            }\n            // divider\n            if (applicableAxisIds.length) {\n                menuItems.push(getDividerItem('dual-axis-item-divider'))\n            }\n        }\n\n        // Assigned categories\n        if (\n            dimensionId === DIMENSION_ID_DATA &&\n            assignedCategoriesItemHandler\n        ) {\n            if (assignedCategoriesAvailableDestinations.length) {\n                if (!isAssignedCategoriesInLayout) {\n                    menuItems.push(\n                        <MenuItem\n                            key={`assigned-categories-item-${dimensionId}`}\n                            onClick={event =>\n                                this.setState({\n                                    submenuAnchorEl: event.currentTarget,\n                                })\n                            }\n                        >\n                            <div>{assignedCategoriesItemLabel}</div>\n                            <ArrowRightIcon />\n                        </MenuItem>\n                    )\n\n                    menuItems.push(\n                        <Menu\n                            key={`assigned-categories-sub-menu-${dimensionId}`}\n                            open={Boolean(this.state.submenuAnchorEl)}\n                            anchorEl={this.state.submenuAnchorEl}\n                            anchorOrigin={{\n                                vertical: 'top',\n                                horizontal: 'right',\n                            }}\n                            onClose={closeSubMenu}\n                            onExited={closeSubMenu}\n                        >\n                            {assignedCategoriesAvailableDestinations.map(\n                                destination => (\n                                    <MenuItem\n                                        key={destination}\n                                        onClick={() => {\n                                            assignedCategoriesItemHandler(\n                                                destination\n                                            )\n                                            closeWholeMenu()\n                                        }}\n                                    >\n                                        {getAxisItemLabel(\n                                            getAxisNameByLayoutType(\n                                                destination,\n                                                getLayoutTypeByVisType(visType)\n                                            )\n                                        )}\n                                    </MenuItem>\n                                )\n                            )}\n                        </Menu>\n                    )\n                } else {\n                    menuItems.push(\n                        <MenuItem\n                            key={`assigned-categories-item-${dimensionId}`}\n                            onClick={() => {\n                                assignedCategoriesItemHandler()\n                                closeWholeMenu()\n                            }}\n                        >\n                            <div>{assignedCategoriesItemLabel}</div>\n                        </MenuItem>\n                    )\n                }\n            } else {\n                menuItems.push(\n                    <Tooltip\n                        key={`assigned-categories-item-${dimensionId}`}\n                        title={getUnavailableLabel(visType)}\n                        aria-label=\"disabled\"\n                        placement=\"right-start\"\n                        classes={classes}\n                    >\n                        <div>\n                            <MenuItem disabled>\n                                <div>{assignedCategoriesItemLabel}</div>\n                                <ArrowRightIcon />\n                            </MenuItem>\n                        </div>\n                    </Tooltip>\n                )\n            }\n        }\n\n        // divider\n        menuItems.length &&\n            menuItems.push(getDividerItem('assigned-categories-divider'))\n\n        menuItems.push(\n            ...applicableAxisIds.map(axisId => (\n                <MenuItem\n                    key={`${dimensionId}-to-${axisId}`}\n                    onClick={() => {\n                        axisItemHandler({\n                            dimensionId,\n                            axisId,\n                            numberOfDimensionItems,\n                            requireItems: !getPredefinedDimensionProp(\n                                dimensionId,\n                                DIMENSION_PROP_NO_ITEMS\n                            ),\n                            isDimensionInLayout,\n                        })\n                        closeWholeMenu()\n                    }}\n                >\n                    {getAxisItemLabel(\n                        getAxisNameByLayoutType(\n                            axisId,\n                            getLayoutTypeByVisType(visType)\n                        ),\n                        isDimensionInLayout\n                    )}\n                </MenuItem>\n            ))\n        )\n\n        // remove item\n        if (isDimensionInLayout) {\n            // divider\n            if (applicableAxisIds.length) {\n                menuItems.push(getDividerItem('remove-item-divider'))\n            }\n\n            menuItems.push(\n                getRemoveMenuItem(() => {\n                    removeItemHandler(dimensionId)\n                    closeWholeMenu()\n                })\n            )\n        }\n\n        return (\n            <Menu\n                id={dimensionId}\n                anchorEl={anchorEl}\n                open={Boolean(anchorEl)}\n                onClose={closeWholeMenu}\n                onExited={closeWholeMenu}\n                transitionDuration={{ enter: 50, exit: 0 }}\n                TransitionComponent={Zoom}\n            >\n                {menuItems}\n            </Menu>\n        )\n    }\n}\n\nDimensionMenu.propTypes = {\n    axisItemHandler: PropTypes.func.isRequired,\n    numberOfDimensionItems: PropTypes.number.isRequired,\n    removeItemHandler: PropTypes.func.isRequired,\n    onClose: PropTypes.func.isRequired,\n    anchorEl: PropTypes.object,\n    assignedCategoriesItemHandler: PropTypes.func,\n    classes: PropTypes.object,\n    currentAxisId: PropTypes.string,\n    dimensionId: PropTypes.string,\n    dualAxisItemHandler: PropTypes.func,\n    isAssignedCategoriesInLayout: PropTypes.bool,\n    visType: PropTypes.string,\n}\n\nexport default DimensionMenu\n","export const parseValue = valueString => {\n    const parsedValue = parseFloat(valueString)\n    if (isNaN(parsedValue)) {\n        return valueString\n    }\n    return parsedValue\n}\n","export const SORT_ORDER_ASCENDING = 1\nexport const SORT_ORDER_DESCENDING = -1\n\nexport const CELL_TYPE_VALUE = 'value'\nexport const CELL_TYPE_SUBTOTAL = 'subtotal'\nexport const CELL_TYPE_TOTAL = 'total'\n\nexport const AGGREGATE_TYPE_SUM = 'SUM'\nexport const AGGREGATE_TYPE_AVERAGE = 'AVERAGE'\nexport const AGGREGATE_TYPE_NA = 'N/A'\n\nexport const VALUE_TYPE_TEXT = 'TEXT'\nexport const VALUE_TYPE_NUMBER = 'NUMBER'\n\nexport const NUMBER_TYPE_VALUE = 'VALUE'\nexport const NUMBER_TYPE_ROW_PERCENTAGE = 'ROW_PERCENTAGE'\nexport const NUMBER_TYPE_COLUMN_PERCENTAGE = 'COLUMN_PERCENTAGE'\n\nexport const FONT_SIZE_OPTION_SMALL = 'SMALL'\nexport const FONT_SIZE_SMALL = 10\nexport const FONT_SIZE_OPTION_NORMAL = 'NORMAL'\nexport const FONT_SIZE_NORMAL = 11\nexport const FONT_SIZE_OPTION_LARGE = 'LARGE'\nexport const FONT_SIZE_LARGE = 13\n\nexport const DISPLAY_DENSITY_OPTION_COMPACT = 'COMPACT'\nexport const DISPLAY_DENSITY_PADDING_COMPACT = 4\nexport const DISPLAY_DENSITY_OPTION_NORMAL = 'NORMAL'\nexport const DISPLAY_DENSITY_PADDING_NORMAL = 5\nexport const DISPLAY_DENSITY_OPTION_COMFORTABLE = 'COMFORTABLE'\nexport const DISPLAY_DENSITY_PADDING_COMFORTABLE = 7\n\nexport const CLIPPED_CELL_MAX_WIDTH = 360\n\nexport const COLUMN_PARTITION_SIZE_PX = 1000\n\nexport const DIMENSION_TYPE_DATA_ELEMENT_GROUP_SET = 'DATA_ELEMENT_GROUP_SET'\nexport const DIMENSION_TYPE_DATA = 'DATA_X'\nexport const DIMENSION_TYPE_PERIOD = 'PERIOD'\nexport const DIMENSION_TYPE_ORGUNIT = 'ORGANISATION_UNIT'\n","import {\n    NUMBER_TYPE_ROW_PERCENTAGE,\n    NUMBER_TYPE_COLUMN_PERCENTAGE,\n    VALUE_TYPE_NUMBER,\n} from './pivotTableConstants'\n\nconst trimTrailingZeros = stringValue => stringValue.replace(/\\.?0+$/, '')\n\nconst defaultDecimalSeparator = '.'\n\nconst separateDigitGroups = (stringValue, decimalSeparator) => {\n    const [integer, remainder] = stringValue.split('.')\n\n    const groups = []\n    for (let i = integer.length; i > 0; i -= 3) {\n        groups.unshift(integer.substring(i - 3, i))\n    }\n\n    if (remainder) {\n        const trimmedRemainder = trimTrailingZeros(remainder)\n        if (trimmedRemainder.length) {\n            groups[groups.length - 1] += decimalSeparator + remainder\n        }\n    }\n\n    return groups\n}\n\nconst getSeparator = visualization => {\n    switch (visualization.digitGroupSeparator) {\n        case 'SPACE':\n            return ' '\n        case 'COMMA':\n            return ','\n        // TODO: Requires backend support, and decimalSeparator would need to be separately configurable\n        // case 'PERIOD':\n        //     return '.'\n        case 'NONE':\n        default:\n            return ''\n    }\n}\n\nconst toFixedPrecisionString = (value, skipRounding) => {\n    if (typeof value !== 'number') {\n        // Values returned from the server should keep their string representation\n        return value\n    }\n\n    const precision = skipRounding ? 10 : value > -1 && value < 1 ? 2 : 1\n\n    return value.toFixed(precision)\n}\n\nexport const renderValue = (value, valueType, visualization) => {\n    if (valueType !== VALUE_TYPE_NUMBER || value === undefined) {\n        return value\n    }\n\n    if (\n        visualization.numberType === NUMBER_TYPE_ROW_PERCENTAGE ||\n        visualization.numberType === NUMBER_TYPE_COLUMN_PERCENTAGE\n    ) {\n        return (\n            trimTrailingZeros(\n                toFixedPrecisionString(value * 100, visualization.skipRounding)\n            ) + '%'\n        )\n    }\n\n    const stringValue = toFixedPrecisionString(\n        value,\n        visualization.skipRounding\n    )\n\n    const digitGroups = separateDigitGroups(\n        stringValue,\n        defaultDecimalSeparator\n    )\n    return digitGroups.join(getSeparator(visualization))\n}\n","let canvas\n\nconst getContext = fontSize => {\n    if (!canvas) {\n        canvas = document.createElement('canvas')\n    }\n\n    const ctx = canvas.getContext('2d')\n    ctx.font = `${fontSize}px Roboto, Arial, sans-serif`\n\n    return ctx\n}\n\nexport const measureText = (text, fontSize = 11) => {\n    const ctx = getContext(fontSize)\n\n    const textMetrics = ctx.measureText(text)\n    return textMetrics.width\n}\n","import times from 'lodash/times'\n\nimport { parseValue } from './parseValue'\nimport { renderValue } from './renderValue'\nimport { measureText } from './measureText'\n\nimport { DIMENSION_ID_ORGUNIT } from '../predefinedDimensions'\n\nimport {\n    AGGREGATE_TYPE_NA,\n    AGGREGATE_TYPE_AVERAGE,\n    AGGREGATE_TYPE_SUM,\n    CELL_TYPE_VALUE,\n    CELL_TYPE_TOTAL,\n    CELL_TYPE_SUBTOTAL,\n    SORT_ORDER_ASCENDING,\n    SORT_ORDER_DESCENDING,\n    DISPLAY_DENSITY_PADDING_COMPACT,\n    DISPLAY_DENSITY_PADDING_COMFORTABLE,\n    DISPLAY_DENSITY_OPTION_COMFORTABLE,\n    DISPLAY_DENSITY_OPTION_COMPACT,\n    DISPLAY_DENSITY_OPTION_NORMAL,\n    DISPLAY_DENSITY_PADDING_NORMAL,\n    FONT_SIZE_OPTION_SMALL,\n    FONT_SIZE_SMALL,\n    FONT_SIZE_OPTION_LARGE,\n    FONT_SIZE_LARGE,\n    FONT_SIZE_OPTION_NORMAL,\n    FONT_SIZE_NORMAL,\n    COLUMN_PARTITION_SIZE_PX,\n    CLIPPED_CELL_MAX_WIDTH,\n    VALUE_TYPE_NUMBER,\n    NUMBER_TYPE_COLUMN_PERCENTAGE,\n    NUMBER_TYPE_ROW_PERCENTAGE,\n    DIMENSION_TYPE_DATA,\n    DIMENSION_TYPE_DATA_ELEMENT_GROUP_SET,\n    DIMENSION_TYPE_ORGUNIT,\n    DIMENSION_TYPE_PERIOD,\n    VALUE_TYPE_TEXT,\n    NUMBER_TYPE_VALUE,\n} from './pivotTableConstants'\n\nconst dataFields = [\n    'value',\n    'numerator',\n    'denominator',\n    'factor',\n    'multiplier',\n    'divisor',\n]\nconst defaultOptions = {\n    hideEmptyColumns: false,\n    hideEmptyRows: false,\n    showRowTotals: false,\n    showColumnTotals: false,\n    showRowSubtotals: false,\n    showColumnSubtotals: false,\n}\n\nconst isDxDimension = dimensionItem =>\n    [DIMENSION_TYPE_DATA, DIMENSION_TYPE_DATA_ELEMENT_GROUP_SET].includes(\n        dimensionItem.dimensionType\n    )\n\nconst countFromDisaggregates = list => {\n    let count = 1\n    list.forEach(x => {\n        count *= x.items.length\n    })\n    return count\n}\n\nconst addSize = list => {\n    const reversedList = list.slice().reverse()\n    reversedList.forEach((level, idx) => {\n        // Start at the \"leaf\" disaggregate\n        const lastLevel = reversedList[idx - 1]\n        level.size = lastLevel ? lastLevel.count * lastLevel.size : 1\n    })\n}\n\nconst listByDimension = list =>\n    list.reduce((all, item) => {\n        all[item.dimension] = item\n        return all\n    }, {})\n\nconst sortByHierarchy = items => {\n    items.sort((a, b) => {\n        if (!a.hierarchy || !b.hierarchy) {\n            return 0\n        }\n        return a.hierarchy.join('/').localeCompare(b.hierarchy.join('/'))\n    })\n}\n\nconst buildDimensionLookup = (visualization, metadata, headers) => {\n    const rows = visualization.rows.map(row => ({\n        dimension: row.dimension,\n        meta: metadata.items[row.dimension],\n        count: metadata.dimensions[row.dimension].length,\n        itemIds: metadata.dimensions[row.dimension],\n        items: metadata.dimensions[row.dimension].map(\n            item => metadata.items[item]\n        ),\n        isDxDimension: isDxDimension(metadata.items[row.dimension]),\n        position: 'row',\n    }))\n    const columns = visualization.columns.map(column => ({\n        dimension: column.dimension,\n        meta: metadata.items[column.dimension],\n        count: metadata.dimensions[column.dimension].length,\n        itemIds: metadata.dimensions[column.dimension],\n        items: metadata.dimensions[column.dimension].map(\n            item => metadata.items[item]\n        ),\n        isDxDimension: isDxDimension(metadata.items[column.dimension]),\n        position: 'column',\n    }))\n\n    addSize(rows)\n    addSize(columns)\n\n    const allByDimension = {\n        ...listByDimension(rows),\n        ...listByDimension(columns),\n    }\n\n    const headerDimensions = headers.map(header => allByDimension[header.name])\n\n    const rowHeaders = headerDimensions\n        .map((_, idx) => idx)\n        .filter(\n            idx =>\n                headerDimensions[idx] &&\n                headerDimensions[idx].position === 'row'\n        )\n    const columnHeaders = headerDimensions\n        .map((_, idx) => idx)\n        .filter(\n            idx =>\n                headerDimensions[idx] &&\n                headerDimensions[idx].position === 'column'\n        )\n\n    const dataHeaders = dataFields.reduce((out, field) => {\n        out[field] = headers.findIndex(header => header.name === field)\n        return out\n    }, {})\n\n    const ouDimension = allByDimension[DIMENSION_ID_ORGUNIT]\n\n    if (\n        visualization.showHierarchy &&\n        metadata.ouNameHierarchy &&\n        ouDimension\n    ) {\n        ouDimension.items.forEach(ou => {\n            const hierarchy = metadata.ouNameHierarchy[ou.uid]\n            if (hierarchy) {\n                ou.hierarchy = hierarchy.split('/').filter(x => x.length)\n            }\n        })\n        sortByHierarchy(ouDimension.items)\n        ouDimension.itemIds = ouDimension.items.map(item => item.uid)\n    }\n\n    return {\n        rows,\n        columns,\n        allByDimension,\n        headerDimensions,\n        rowHeaders,\n        columnHeaders,\n        dataHeaders,\n    }\n}\n\nconst lookup = (\n    dataRow,\n    dimensionLookup,\n    { doColumnSubtotals, doRowSubtotals }\n) => {\n    let row = 0\n    for (const headerIndex of dimensionLookup.rowHeaders) {\n        const idx = dimensionLookup.headerDimensions[\n            headerIndex\n        ].itemIds.indexOf(dataRow[headerIndex])\n\n        if (idx === -1) {\n            return undefined\n        }\n\n        const size = dimensionLookup.headerDimensions[headerIndex].size\n        row += idx * size\n    }\n\n    if (doColumnSubtotals) {\n        row += Math.floor(row / dimensionLookup.rows[0].size)\n    }\n\n    let column = 0\n    for (const headerIndex of dimensionLookup.columnHeaders) {\n        const idx = dimensionLookup.headerDimensions[\n            headerIndex\n        ].itemIds.indexOf(dataRow[headerIndex])\n\n        if (idx === -1) {\n            return undefined\n        }\n        const size = dimensionLookup.headerDimensions[headerIndex].size\n        column += idx * size\n    }\n\n    if (doRowSubtotals) {\n        column += Math.floor(column / dimensionLookup.columns[0].size)\n    }\n\n    return { column, row }\n}\n\nconst applyTotalAggregationType = (\n    {\n        totalAggregationType,\n        value,\n        numerator,\n        denominator,\n        multiplier,\n        divisor,\n    },\n    overrideTotalAggregationType\n) => {\n    switch (overrideTotalAggregationType || totalAggregationType) {\n        case AGGREGATE_TYPE_NA:\n            return 'N/A'\n        case AGGREGATE_TYPE_AVERAGE:\n            return (\n                ((numerator || value) * multiplier) /\n                (denominator * divisor || 1)\n            )\n        case AGGREGATE_TYPE_SUM:\n        default:\n            return value\n    }\n}\n\nexport class PivotTableEngine {\n    visualization\n    rawData\n    options\n    legendSets\n\n    dimensionLookup\n\n    columnDepth = 0\n    rowDepth = 0\n\n    height = 0\n    width = 0\n    data = []\n    columnWidths = []\n    rowMap = []\n    columnMap = []\n\n    constructor(visualization, data, legendSets) {\n        this.visualization = visualization\n        this.legendSets = (legendSets || []).reduce((sets, set) => {\n            sets[set.id] = set\n            return sets\n        }, {})\n        this.rawData = data\n        this.options = {\n            ...defaultOptions,\n            showColumnTotals: visualization.colTotals,\n            showRowTotals: visualization.rowTotals,\n            showColumnSubtotals: visualization.colSubTotals,\n            showRowSubtotals: visualization.rowSubTotals,\n            hideEmptyColumns: visualization.hideEmptyColumns,\n            hideEmptyRows: visualization.hideEmptyRows,\n            title: visualization.hideTitle ? undefined : visualization.title,\n            subtitle: visualization.hideSubtitle\n                ? undefined\n                : visualization.subtitle,\n        }\n\n        this.dimensionLookup = buildDimensionLookup(\n            this.visualization,\n            this.rawData.metaData,\n            this.rawData.headers\n        )\n\n        const doColumnSubtotals =\n            this.options.showColumnSubtotals &&\n            this.dimensionLookup.rows.length > 1\n        const singularRow =\n            this.dimensionLookup.rows.length === 1 &&\n            this.dimensionLookup.rows[0].count === 1\n        const firstColumnIsSortable = !doColumnSubtotals && !singularRow\n\n        this.columnDepth =\n            this.dimensionLookup.columns.length ||\n            (this.visualization.showDimensionLabels || firstColumnIsSortable\n                ? 1\n                : 0)\n        this.rowDepth =\n            this.dimensionLookup.rows.length ||\n            (this.visualization.showDimensionLabels ? 1 : 0)\n\n        this.buildMatrix()\n    }\n\n    getRaw({ row, column }) {\n        const cellType = this.getRawCellType({ row, column })\n        const dxDimension = this.getRawCellDxDimension({ row, column })\n\n        const headers = [\n            ...this.getRawRowHeader(row),\n            ...this.getRawColumnHeader(column),\n        ]\n        const peId = headers.find(\n            header => header?.dimensionItemType === DIMENSION_TYPE_PERIOD\n        )?.uid\n        const ouId = headers.find(\n            header => header?.dimensionItemType === DIMENSION_TYPE_ORGUNIT\n        )?.uid\n\n        if (!this.data[row] || !this.data[row][column]) {\n            return {\n                cellType,\n                empty: true,\n                ouId,\n                peId,\n            }\n        }\n\n        const dataRow = this.data[row][column]\n\n        let rawValue =\n            cellType === CELL_TYPE_VALUE\n                ? dataRow[this.dimensionLookup.dataHeaders.value]\n                : dataRow.value\n        let renderedValue = rawValue\n        const valueType = dxDimension?.valueType || VALUE_TYPE_TEXT\n\n        if (valueType === VALUE_TYPE_NUMBER) {\n            rawValue = parseValue(rawValue)\n            switch (this.visualization.numberType) {\n                case NUMBER_TYPE_ROW_PERCENTAGE:\n                    renderedValue = rawValue / this.percentageTotals[row].value\n                    break\n                case NUMBER_TYPE_COLUMN_PERCENTAGE:\n                    renderedValue =\n                        rawValue / this.percentageTotals[column].value\n                    break\n                default:\n                    break\n            }\n        }\n\n        renderedValue = renderValue(\n            renderedValue,\n            valueType,\n            this.visualization\n        )\n\n        return {\n            cellType,\n            empty: false,\n            valueType,\n            rawValue,\n            renderedValue,\n            dxDimension,\n            ouId,\n            peId,\n        }\n    }\n\n    get({ row, column }) {\n        const mappedRow = this.rowMap[row],\n            mappedColumn = this.columnMap[column]\n        if (\n            (!mappedRow && mappedRow !== 0) ||\n            (!mappedColumn && mappedColumn !== 0)\n        ) {\n            return undefined\n        }\n\n        return this.getRaw({ row: mappedRow, column: mappedColumn })\n    }\n\n    getRawCellType({ row, column }) {\n        const isRowTotal = this.doRowTotals && column === this.dataWidth - 1\n        const isColumnTotal = this.doColumnTotals && row === this.dataHeight - 1\n        if (isRowTotal || isColumnTotal) {\n            return CELL_TYPE_TOTAL\n        }\n\n        const isRowSubtotal =\n            this.doRowSubtotals &&\n            (column + 1) % (this.dimensionLookup.columns[0].size + 1) === 0\n        const isColumnSubtotal =\n            this.doColumnSubtotals &&\n            (row + 1) % (this.dimensionLookup.rows[0].size + 1) === 0\n\n        if (isRowSubtotal || isColumnSubtotal) {\n            return CELL_TYPE_SUBTOTAL\n        }\n\n        return CELL_TYPE_VALUE\n    }\n    getCellType({ row, column }) {\n        row = this.rowMap[row]\n        column = this.columnMap[column]\n        return this.getRawCellType({ row, column })\n    }\n\n    getDimensionLabel(rowLevel, columnLevel) {\n        const lastRowLevel = this.rowDepth - 1\n        const lastColumnLevel = this.columnDepth - 1\n\n        if (rowLevel !== lastRowLevel && columnLevel !== lastColumnLevel) {\n            return null\n        }\n        if (\n            rowLevel === lastRowLevel &&\n            this.dimensionLookup.rows[lastRowLevel] &&\n            columnLevel === lastColumnLevel &&\n            this.dimensionLookup.columns[lastColumnLevel]\n        ) {\n            return `${this.dimensionLookup.rows[lastRowLevel].meta.name} / ${this.dimensionLookup.columns[lastColumnLevel].meta.name}`\n        }\n\n        if (lastRowLevel === -1) {\n            return this.dimensionLookup.columns[columnLevel].meta.name\n        }\n        if (lastColumnLevel === -1) {\n            return this.dimensionLookup.rows[rowLevel].meta.name\n        }\n\n        if (\n            rowLevel === lastRowLevel &&\n            this.dimensionLookup.columns[columnLevel]\n        ) {\n            return this.dimensionLookup.columns[columnLevel].meta.name\n        }\n        if (\n            columnLevel === lastColumnLevel &&\n            this.dimensionLookup.rows[rowLevel]\n        ) {\n            return this.dimensionLookup.rows[rowLevel].meta.name\n        }\n    }\n\n    getCellDxDimension({ row, column }) {\n        return this.getRawCellDxDimension({\n            row: this.rowMap[row],\n            column: this.columnMap[column],\n        })\n    }\n    getRawCellDxDimension({ row, column }) {\n        if (!this.data[row]) {\n            return undefined\n        }\n        const cellValue = this.data[row][column]\n        if (!cellValue) {\n            return undefined\n        }\n        if (!Array.isArray(cellValue)) {\n            // This is a total cell\n            return {\n                valueType: cellValue.valueType,\n                totalAggregationType: cellValue.totalAggregationType,\n                legendSet: undefined,\n            }\n        }\n\n        const rowHeaders = this.getRawRowHeader(row)\n        const columnHeaders = this.getRawColumnHeader(column)\n\n        const dxRowIndex = this.dimensionLookup.rows.findIndex(\n            dim => dim.isDxDimension\n        )\n        if (rowHeaders.length && dxRowIndex !== -1) {\n            return {\n                valueType: rowHeaders[dxRowIndex].valueType,\n                totalAggregationType:\n                    rowHeaders[dxRowIndex].totalAggregationType,\n                legendSet: rowHeaders[dxRowIndex].legendSet,\n            }\n        }\n\n        const dxColumnIndex = this.dimensionLookup.columns.findIndex(\n            dim => dim.isDxDimension\n        )\n        if (columnHeaders.length && dxColumnIndex !== -1) {\n            return {\n                valueType: columnHeaders[dxColumnIndex].valueType,\n                totalAggregationType:\n                    columnHeaders[dxColumnIndex].totalAggregationType,\n                legendSet: columnHeaders[dxColumnIndex].legendSet,\n            }\n        }\n\n        // Data is in Filter\n        // TODO : This assumes the server ignores text types, we should confirm this is the case\n        return {\n            valueType: VALUE_TYPE_NUMBER,\n            totalAggregationType: AGGREGATE_TYPE_SUM,\n        }\n    }\n\n    rowIsEmpty(row) {\n        return !this.data[row] || this.data[row].length === 0\n    }\n    columnIsEmpty(column) {\n        return !this.columnWidths[column]\n    }\n\n    getRawColumnHeader(column) {\n        if (this.doRowTotals && column === this.dataWidth - 1) {\n            return times(this.columnDepth - 1, () => undefined).concat([\n                { name: 'Total' },\n            ])\n        }\n        if (this.doRowSubtotals) {\n            if (\n                (column + 1) % (this.dimensionLookup.columns[0].size + 1) ===\n                0\n            ) {\n                return times(this.columnDepth - 1, () => undefined).concat([\n                    { name: 'Subtotal' },\n                ])\n            }\n            column -= Math.floor(\n                column / (this.dimensionLookup.columns[0].size + 1)\n            )\n        }\n        return this.dimensionLookup.columns.map(dimension => {\n            const itemIndex =\n                Math.floor(column / dimension.size) % dimension.count\n            return dimension.items[itemIndex]\n        })\n    }\n    getColumnHeader(column) {\n        return this.getRawColumnHeader(this.columnMap[column])\n    }\n\n    getRawRowHeader(row) {\n        if (this.doColumnTotals && row === this.dataHeight - 1) {\n            return times(this.rowDepth - 1, () => undefined).concat([\n                { name: 'Total' },\n            ])\n        }\n        if (this.doColumnSubtotals) {\n            if ((row + 1) % (this.dimensionLookup.rows[0].size + 1) === 0) {\n                return times(this.rowDepth - 1, () => undefined).concat([\n                    { name: 'Subtotal' },\n                ])\n            }\n            row -= Math.floor(row / (this.dimensionLookup.rows[0].size + 1))\n        }\n\n        return this.dimensionLookup.rows.map(dimension => {\n            const itemIndex = Math.floor(row / dimension.size) % dimension.count\n            return dimension.items[itemIndex]\n        })\n    }\n    getRowHeader(row) {\n        return this.getRawRowHeader(this.rowMap[row])\n    }\n\n    getDependantTotalCells({ row, column }) {\n        const rowSubtotalSize = this.dimensionLookup.columns[0]?.size + 1\n        const rowSubtotal = rowSubtotalSize &&\n            this.doRowSubtotals && {\n                row,\n                column:\n                    Math.ceil((column + 1) / rowSubtotalSize) *\n                        rowSubtotalSize -\n                    1,\n                size: rowSubtotalSize - 1,\n            }\n        const rowSubtotalColumnTotal = this.doRowSubtotals &&\n            this.doColumnTotals && {\n                row: this.dataHeight - 1,\n                column: rowSubtotal.column,\n                size: this.rawDataHeight,\n            }\n\n        const columnSubtotalSize = this.dimensionLookup.rows[0]?.size + 1\n        const columnSubtotal = columnSubtotalSize &&\n            this.doColumnSubtotals && {\n                row:\n                    Math.ceil((row + 1) / columnSubtotalSize) *\n                        columnSubtotalSize -\n                    1,\n                column,\n                size: columnSubtotalSize - 1,\n            }\n\n        const columnSubtotalRowTotal = this.doColumnSubtotals &&\n            this.doRowTotals && {\n                row: columnSubtotal.row,\n                column: this.dataWidth - 1,\n                size: this.rawDataWidth,\n            }\n\n        const combinedSubtotal = rowSubtotalSize &&\n            columnSubtotalSize &&\n            this.doColumnSubtotals &&\n            this.doRowSubtotals && {\n                row: columnSubtotal.row,\n                column: rowSubtotal.column,\n                size: columnSubtotalSize * rowSubtotalSize,\n            }\n\n        const rowTotal = this.doRowTotals && {\n            row,\n            column: this.dataWidth - 1,\n            size: this.rawDataWidth,\n        }\n\n        const columnTotal = this.doColumnTotals && {\n            row: this.dataHeight - 1,\n            column,\n            size: this.rawDataHeight,\n        }\n\n        const combinedTotal = this.doColumnTotals &&\n            this.doRowTotals && {\n                row: this.dataHeight - 1,\n                column: this.dataWidth - 1,\n                size: this.rawDataHeight * this.rawDataWidth,\n            }\n\n        return {\n            rowSubtotal,\n            rowSubtotalColumnTotal,\n            columnSubtotal,\n            columnSubtotalRowTotal,\n            rowTotal,\n            columnTotal,\n            combinedSubtotal,\n            combinedTotal,\n        }\n    }\n\n    addCellValueToTotals(pos, dataRow) {\n        const totals = this.getDependantTotalCells(pos)\n        const dxDimension = this.getRawCellDxDimension(pos)\n\n        Object.values(totals).forEach(totalItem => {\n            if (!totalItem) return\n\n            this.data[totalItem.row] = this.data[totalItem.row] || []\n\n            this.data[totalItem.row][totalItem.column] = this.data[\n                totalItem.row\n            ][totalItem.column] || {\n                count: 0,\n                totalCount: totalItem.size,\n            }\n            const totalCell = this.data[totalItem.row][totalItem.column]\n\n            const currentAggType = dxDimension?.totalAggregationType\n            const previousAggType =\n                totalCell.totalAggregationType || currentAggType\n            if (previousAggType && currentAggType !== previousAggType) {\n                totalCell.totalAggregationType = AGGREGATE_TYPE_NA\n            } else {\n                totalCell.totalAggregationType = currentAggType\n            }\n\n            const currentValueType = dxDimension?.valueType\n            const previousValueType = totalCell.valueType\n            if (previousValueType && currentValueType !== previousValueType) {\n                totalCell.valueType = AGGREGATE_TYPE_NA\n            } else {\n                totalCell.valueType = currentValueType\n            }\n\n            if (dxDimension?.valueType === VALUE_TYPE_NUMBER) {\n                dataFields.forEach(field => {\n                    const headerIndex = this.dimensionLookup.dataHeaders[field]\n                    const value = parseValue(dataRow[headerIndex])\n                    if (value && !isNaN(value)) {\n                        totalCell[field] = (totalCell[field] || 0) + value\n                    }\n                })\n            }\n            totalCell.count += 1\n        })\n\n        if (this.visualization.numberType === NUMBER_TYPE_ROW_PERCENTAGE) {\n            if (!this.percentageTotals[pos.row]) {\n                this.percentageTotals[pos.row] = {\n                    count: 0,\n                    totalCount: this.rawDataWidth,\n                }\n            }\n            const percentageTotal = this.percentageTotals[pos.row]\n            dataFields.forEach(field => {\n                const headerIndex = this.dimensionLookup.dataHeaders[field]\n                const value = parseValue(dataRow[headerIndex])\n                if (value && !isNaN(value)) {\n                    percentageTotal[field] =\n                        (percentageTotal[field] || 0) + value\n                }\n            })\n\n            if (totals.columnSubtotal) {\n                if (!this.percentageTotals[totals.columnSubtotal.row]) {\n                    this.percentageTotals[totals.columnSubtotal.row] = {\n                        count: 0,\n                        totalCount: this.rawDataWidth,\n                    }\n                }\n                const percentageTotal = this.percentageTotals[\n                    totals.columnSubtotal.row\n                ]\n                dataFields.forEach(field => {\n                    const headerIndex = this.dimensionLookup.dataHeaders[field]\n                    const value = parseValue(dataRow[headerIndex])\n                    if (value && !isNaN(value)) {\n                        percentageTotal[field] =\n                            (percentageTotal[field] || 0) + value\n                    }\n                })\n            }\n\n            if (totals.columnTotal) {\n                if (!this.percentageTotals[totals.columnTotal.row]) {\n                    this.percentageTotals[totals.columnTotal.row] = {\n                        count: 0,\n                        totalCount: this.rawDataWidth,\n                    }\n                }\n                const percentageTotal = this.percentageTotals[\n                    totals.columnTotal.row\n                ]\n                dataFields.forEach(field => {\n                    const headerIndex = this.dimensionLookup.dataHeaders[field]\n                    const value = parseValue(dataRow[headerIndex])\n                    if (value && !isNaN(value)) {\n                        percentageTotal[field] =\n                            (percentageTotal[field] || 0) + value\n                    }\n                })\n            }\n        }\n\n        if (this.visualization.numberType === NUMBER_TYPE_COLUMN_PERCENTAGE) {\n            if (!this.percentageTotals[pos.column]) {\n                this.percentageTotals[pos.column] = {\n                    count: 0,\n                    totalCount: this.rawDataHeight,\n                }\n            }\n            const percentageTotal = this.percentageTotals[pos.column]\n            dataFields.forEach(field => {\n                const headerIndex = this.dimensionLookup.dataHeaders[field]\n                const value = parseValue(dataRow[headerIndex])\n                if (value && !isNaN(value)) {\n                    percentageTotal[field] =\n                        (percentageTotal[field] || 0) + value\n                }\n            })\n\n            if (totals.rowSubtotal) {\n                if (!this.percentageTotals[totals.rowSubtotal.column]) {\n                    this.percentageTotals[totals.rowSubtotal.column] = {\n                        count: 0,\n                        totalCount: this.rawDataHeight,\n                    }\n                }\n                const percentageTotal = this.percentageTotals[\n                    totals.rowSubtotal.column\n                ]\n                dataFields.forEach(field => {\n                    const headerIndex = this.dimensionLookup.dataHeaders[field]\n                    const value = parseValue(dataRow[headerIndex])\n                    if (value && !isNaN(value)) {\n                        percentageTotal[field] =\n                            (percentageTotal[field] || 0) + value\n                    }\n                })\n            }\n\n            if (totals.rowTotal) {\n                if (!this.percentageTotals[totals.rowTotal.column]) {\n                    this.percentageTotals[totals.rowTotal.column] = {\n                        count: 0,\n                        totalCount: this.rawDataHeight,\n                    }\n                }\n                const percentageTotal = this.percentageTotals[\n                    totals.rowTotal.column\n                ]\n                dataFields.forEach(field => {\n                    const headerIndex = this.dimensionLookup.dataHeaders[field]\n                    const value = parseValue(dataRow[headerIndex])\n                    if (value && !isNaN(value)) {\n                        percentageTotal[field] =\n                            (percentageTotal[field] || 0) + value\n                    }\n                })\n            }\n        }\n    }\n    finalizeTotal({ row, column }) {\n        if (!this.data[row]) {\n            return\n        }\n        const totalCell = this.data[row][column]\n        if (totalCell && totalCell.count) {\n            totalCell.value = applyTotalAggregationType(\n                totalCell,\n                this.visualization.numberType !== NUMBER_TYPE_VALUE &&\n                    AGGREGATE_TYPE_SUM\n            )\n            this.addCellForAdaptiveClipping(\n                { row, column },\n                renderValue(\n                    totalCell.value,\n                    totalCell.valueType,\n                    this.visualization\n                )\n            )\n        }\n    }\n\n    finalizeTotals() {\n        const columnSubtotalSize = this.dimensionLookup.rows[0]?.size + 1\n        const rowSubtotalSize = this.dimensionLookup.columns[0]?.size + 1\n\n        if (this.doRowSubtotals && rowSubtotalSize) {\n            times(\n                this.dimensionLookup.columns[0].count,\n                n => (n + 1) * rowSubtotalSize - 1\n            ).forEach(column => {\n                times(\n                    this.dataHeight - (this.doColumnTotals ? 1 : 0),\n                    n => n\n                ).forEach(row => {\n                    // skip combined subtotal cells\n                    if (\n                        !this.doColumnSubtotals ||\n                        (row + 1) % columnSubtotalSize !== 0\n                    ) {\n                        this.finalizeTotal({ row, column })\n                    }\n                })\n            })\n        }\n        if (this.doColumnSubtotals && columnSubtotalSize) {\n            times(\n                this.dimensionLookup.rows[0].count,\n                n => (n + 1) * columnSubtotalSize - 1\n            ).forEach(row => {\n                times(\n                    this.dataWidth - (this.doRowTotals ? 1 : 0),\n                    n => n\n                ).forEach(column => {\n                    // skip combined subtotal cells\n                    if (\n                        !this.doRowSubtotals ||\n                        (column + 1) % rowSubtotalSize !== 0\n                    ) {\n                        this.finalizeTotal({ row, column })\n                    }\n                })\n            })\n        }\n\n        // Combined subtotal cells\n        if (\n            this.doRowSubtotals &&\n            this.doColumnSubtotals &&\n            rowSubtotalSize &&\n            columnSubtotalSize\n        ) {\n            times(\n                this.dimensionLookup.rows[0].count,\n                n => (n + 1) * columnSubtotalSize - 1\n            ).forEach(row => {\n                times(\n                    this.dimensionLookup.columns[0].count,\n                    n => (n + 1) * rowSubtotalSize - 1\n                ).forEach(column => {\n                    this.finalizeTotal({ row, column })\n                })\n            })\n        }\n        if (this.doRowTotals) {\n            const column = this.dataWidth - 1\n            times(this.dataHeight - 1, n => n).forEach(row => {\n                this.finalizeTotal({ row, column })\n            })\n        }\n\n        if (this.doColumnTotals) {\n            const row = this.dataHeight - 1\n            times(this.dataWidth - 1, n => n).forEach(column => {\n                this.finalizeTotal({ row, column })\n            })\n        }\n\n        if (this.doRowTotals && this.doColumnTotals) {\n            this.finalizeTotal({\n                row: this.dataHeight - 1,\n                column: this.dataWidth - 1,\n            })\n        }\n\n        if (this.percentageTotals) {\n            this.percentageTotals.forEach(item => {\n                item.value = applyTotalAggregationType(item)\n            })\n        }\n    }\n\n    addCellForAdaptiveClipping({ column }, renderedValue) {\n        this.columnWidths[column] = Math.max(\n            this.columnWidths[column] || 0,\n            measureText(renderedValue, this.fontSize)\n        )\n    }\n\n    finalizeAdaptiveClipping() {\n        this.dataPixelWidth = 0\n        this.rowHeaderPixelWidth = 0\n\n        let nextPartitionPx = 0\n        this.columnPartitions = []\n\n        const getColumnWidth = contentWidth =>\n            Math.min(CLIPPED_CELL_MAX_WIDTH, Math.ceil(contentWidth)) +\n            this.cellPadding * 2 +\n            /*border*/ 2\n\n        this.columnMap.forEach(column => {\n            const header = this.getRawColumnHeader(column)[this.columnDepth - 1]\n            const label =\n                this.visualization.showHierarchy && header?.hierarchy\n                    ? header.hierarchy.join(' / ')\n                    : header?.name\n\n            if (label) {\n                const headerSize = measureText(label, this.fontSize)\n                this.columnWidths[column] = Math.max(\n                    this.columnWidths[column] || 0,\n                    headerSize +\n                        (this.isSortable(column) ? this.scrollIconBuffer : 0)\n                )\n            }\n\n            const colWidth = getColumnWidth(this.columnWidths[column])\n            this.columnWidths[column] = {\n                pre: this.dataPixelWidth,\n                width: colWidth,\n            }\n\n            if (this.dataPixelWidth >= nextPartitionPx) {\n                this.columnPartitions.push(column)\n                nextPartitionPx += COLUMN_PARTITION_SIZE_PX\n            }\n            this.dataPixelWidth += colWidth\n        })\n\n        if (\n            !this.dimensionLookup.rows.length &&\n            this.visualization.showDimensionLabels\n        ) {\n            let maxWidth = 0\n            this.dimensionLookup.columns.forEach((_, columnLevel) => {\n                const label = this.getDimensionLabel(0, columnLevel)\n                if (label) {\n                    const headerSize = measureText(label, this.fontSize)\n                    maxWidth = Math.max(maxWidth, headerSize)\n                }\n            })\n\n            const columnWidth = getColumnWidth(maxWidth)\n            this.rowHeaderPixelWidth = columnWidth\n            this.rowHeaderWidths = [columnWidth]\n        }\n\n        this.rowHeaderWidths = this.dimensionLookup.rows.map((_, rowLevel) => {\n            let maxWidth = 0\n            this.rowMap.forEach(rawColumn => {\n                const header = this.getRawRowHeader(rawColumn)[rowLevel]\n                const label =\n                    this.visualization.showHierarchy && header?.hierarchy\n                        ? header.hierarchy.join(' / ')\n                        : header?.name\n                if (label) {\n                    const headerSize = measureText(label, this.fontSize)\n                    maxWidth = Math.max(maxWidth, headerSize)\n                }\n            }, 0)\n\n            if (this.visualization.showDimensionLabels) {\n                this.dimensionLookup.columns.forEach((_, columnLevel) => {\n                    const label = this.getDimensionLabel(rowLevel, columnLevel)\n                    if (label) {\n                        const headerSize = measureText(label, this.fontSize)\n                        maxWidth = Math.max(maxWidth, headerSize)\n                    }\n                })\n            }\n            const columnWidth = getColumnWidth(maxWidth)\n            this.rowHeaderPixelWidth += columnWidth\n            return columnWidth\n        })\n    }\n\n    resetRowMap() {\n        this.rowMap = this.options.hideEmptyRows\n            ? times(this.dataHeight, n => n).filter(idx => !!this.data[idx])\n            : times(this.dataHeight, n => n)\n    }\n\n    resetColumnMap() {\n        this.columnMap = this.options.hideEmptyColumns\n            ? times(this.dataWidth, n => n).filter(\n                  idx => !!this.columnWidths[idx]\n              )\n            : times(this.dataWidth, n => n)\n    }\n\n    get cellPadding() {\n        switch (this.visualization.displayDensity) {\n            case DISPLAY_DENSITY_OPTION_COMPACT:\n                return DISPLAY_DENSITY_PADDING_COMPACT\n            case DISPLAY_DENSITY_OPTION_COMFORTABLE:\n                return DISPLAY_DENSITY_PADDING_COMFORTABLE\n            case DISPLAY_DENSITY_OPTION_NORMAL:\n            default:\n                return DISPLAY_DENSITY_PADDING_NORMAL\n        }\n    }\n\n    get fontSize() {\n        switch (this.visualization.fontSize) {\n            case FONT_SIZE_OPTION_SMALL:\n                return FONT_SIZE_SMALL\n            case FONT_SIZE_OPTION_LARGE:\n                return FONT_SIZE_LARGE\n            case FONT_SIZE_OPTION_NORMAL:\n            default:\n                return FONT_SIZE_NORMAL\n        }\n    }\n\n    get scrollIconBuffer() {\n        switch (this.visualization.fontSize) {\n            case FONT_SIZE_OPTION_SMALL:\n                return 11\n            case FONT_SIZE_OPTION_LARGE:\n                return 15\n            case FONT_SIZE_OPTION_NORMAL:\n            default:\n                return 13\n        }\n    }\n\n    buildMatrix() {\n        this.data = []\n        this.columnWidths = []\n\n        this.dataHeight = this.rawDataHeight = countFromDisaggregates(\n            this.dimensionLookup.rows\n        )\n\n        this.dataWidth = this.rawDataWidth = countFromDisaggregates(\n            this.dimensionLookup.columns\n        )\n\n        // TODO: Check last row/col dimension for size===1, skip redundant sub-totals\n        this.doRowSubtotals =\n            this.options.showRowSubtotals && this.columnDepth > 1\n        this.doColumnSubtotals =\n            this.options.showColumnSubtotals && this.rowDepth > 1\n\n        this.doRowTotals = this.options.showRowTotals && this.dataWidth > 1\n        this.doColumnTotals =\n            this.options.showColumnTotals && this.dataHeight > 1\n\n        if (this.doRowSubtotals) {\n            this.dataWidth += this.dimensionLookup.columns[0].count\n        }\n        if (this.doColumnSubtotals) {\n            this.dataHeight += this.dimensionLookup.rows[0].count\n        }\n        if (this.doRowTotals) {\n            this.dataWidth += 1\n        }\n        if (this.doColumnTotals) {\n            this.dataHeight += 1\n        }\n\n        // TODO: Use total cell calculation, don't duplicate here\n        if (\n            this.visualization.numberType === NUMBER_TYPE_ROW_PERCENTAGE ||\n            this.visualization.numberType === NUMBER_TYPE_COLUMN_PERCENTAGE\n        ) {\n            this.percentageTotals = []\n        }\n\n        this.rawData.rows.forEach(dataRow => {\n            const pos = lookup(dataRow, this.dimensionLookup, this)\n\n            if (pos) {\n                this.data[pos.row] = this.data[pos.row] || []\n                this.data[pos.row][pos.column] = dataRow\n\n                this.addCellValueToTotals(pos, dataRow)\n            }\n        })\n\n        this.finalizeTotals()\n\n        this.rawData.rows.forEach(dataRow => {\n            const pos = lookup(dataRow, this.dimensionLookup, this)\n            if (pos) {\n                this.addCellForAdaptiveClipping(\n                    pos,\n                    this.getRaw(pos).renderedValue\n                )\n            }\n        })\n\n        this.resetRowMap()\n        this.resetColumnMap()\n\n        this.height = this.rowMap.length\n        this.width = this.columnMap.length\n\n        this.finalizeAdaptiveClipping()\n    }\n\n    getColumnType(column) {\n        column = this.columnMap[column]\n        if (!column && column !== 0) {\n            return undefined\n        }\n        if (\n            this.doRowSubtotals &&\n            (column + 1) % (this.dimensionLookup.columns[0].size + 1) === 0\n        ) {\n            return CELL_TYPE_SUBTOTAL\n        }\n        if (this.doRowTotals && column === this.dataWidth - 1) {\n            return CELL_TYPE_TOTAL\n        }\n        return CELL_TYPE_VALUE\n    }\n\n    isSortable(column) {\n        return (\n            this.dataHeight > 1 &&\n            !this.doColumnSubtotals &&\n            this.getColumnType(column) !== undefined\n        )\n    }\n\n    sort(column, order) {\n        if (order !== SORT_ORDER_ASCENDING && order !== SORT_ORDER_DESCENDING) {\n            console.warn(`Invalid sort order ${order}`)\n            return\n        }\n\n        if (!this.isSortable(column)) {\n            console.warn(`Invalid sort column ${column}`)\n            return\n        }\n\n        const mappedColumn = this.columnMap[column]\n        this.rowMap.sort((rowA, rowB) => {\n            if (this.doColumnTotals && rowA === this.dataHeight - 1) {\n                return 1\n            }\n            if (this.doColumnTotals && rowB === this.dataHeight - 1) {\n                return -1\n            }\n            const valueA = this.getRaw({ row: rowA, column: mappedColumn })\n            const valueB = this.getRaw({ row: rowB, column: mappedColumn })\n\n            if ((!valueA || valueA.empty) && (!valueB || valueB.empty)) {\n                return 0\n            }\n            if (!valueA || valueA.empty) {\n                return -1 * order\n            }\n            if (!valueB || valueB.empty) {\n                return 1 * order\n            }\n\n            if (\n                valueA.valueType === VALUE_TYPE_NUMBER &&\n                valueB.valueType === VALUE_TYPE_NUMBER\n            ) {\n                return (valueA.rawValue - valueB.rawValue) * order\n            }\n            return (\n                valueA.renderedValue.localeCompare(valueB.renderedValue) * order\n            )\n        })\n    }\n\n    clearSort() {\n        this.resetRowMap()\n    }\n}\n","import { useState, useEffect } from 'react'\nimport ResizeObserver from 'resize-observer-polyfill'\n\nconst initialState = { width: 0, height: 0 }\n\nexport const useParentSize = (\n    elementRef,\n    renderCounter,\n    initialSize = initialState\n) => {\n    const [size, setSize] = useState({\n        width: initialSize.width || 0,\n        height: initialSize.height || 0,\n    })\n\n    useEffect(() => {\n        const el = elementRef.current && elementRef.current.parentElement\n        if (!el) return\n\n        const onResize = () => {\n            setSize({\n                width: el.clientWidth,\n                height: el.clientHeight,\n            })\n        }\n\n        onResize(el)\n\n        if (renderCounter) {\n            setSize(initialState)\n        }\n\n        const observer = new ResizeObserver(onResize)\n        observer.observe(el)\n\n        return () => observer.disconnect()\n    }, [elementRef, renderCounter])\n\n    return size\n}\n","import { useState, useCallback, useEffect } from 'react'\n\nimport debounce from 'lodash/debounce'\n\nexport const useScrollPosition = (containerRef, debounceWait = 10) => {\n    const [scrollPosition, setScrollPosition] = useState({ x: 0, y: 0 })\n\n    const onScroll = useCallback(\n        debounce(() => {\n            const scroll = {\n                x: containerRef.current.scrollLeft,\n                y: containerRef.current.scrollTop,\n            }\n            setScrollPosition(scroll)\n        }, debounceWait)\n    )\n\n    useEffect(() => {\n        const currentRef = containerRef.current\n        if (!currentRef) {\n            return\n        }\n\n        currentRef.addEventListener('scroll', onScroll)\n        return () => {\n            currentRef.removeEventListener('scroll', onScroll)\n        }\n    }, [containerRef, onScroll])\n\n    return scrollPosition\n}\n","import times from 'lodash/times'\n\nexport const clipAxis = ({ position, size, step, totalCount, headerCount }) => {\n    const floor = headerCount * step\n    const offset = position < floor ? floor - position : 0\n\n    const count = Math.min(totalCount, Math.ceil((size - offset) / step) + 1)\n    position = Math.max(0, position - floor) // TODO: Support sticky headers\n    const start = Math.min(totalCount - count, Math.floor(position / step))\n    const pre = Math.max(start * step, 0)\n    const post = (totalCount - (start + count)) * step\n    const indices = times(count, n => start + n)\n\n    return {\n        indices,\n        pre,\n        post,\n    }\n}\n","export const clipPartitionedAxis = ({\n    partitionSize,\n    partitions,\n    axisMap,\n    widthMap,\n    viewportWidth,\n    viewportPosition,\n    totalWidth,\n}) => {\n    const partition = Math.floor(viewportPosition / partitionSize)\n\n    if (partitions[partition] === undefined) {\n        return {\n            indices: [0],\n            pre: 0,\n            post: 0,\n        }\n    }\n\n    let start = partitions[partition]\n    while (\n        start < axisMap.length &&\n        widthMap[axisMap[start]].pre < viewportPosition\n    ) {\n        ++start\n    }\n    start = start === 0 ? start : start - 1\n    const pre = widthMap[axisMap[start]].pre\n    const indices = []\n    let end = start\n    while (\n        end < axisMap.length &&\n        widthMap[axisMap[end]].pre < viewportPosition + viewportWidth\n    ) {\n        indices.push(end)\n        ++end\n    }\n    end = end === 0 ? end : end - 1\n    const post =\n        totalWidth - (widthMap[axisMap[end]].pre + widthMap[axisMap[end]].width)\n\n    return {\n        indices,\n        pre,\n        post,\n    }\n}\n","import { useMemo } from 'react'\nimport { useScrollPosition } from './useScrollPosition'\nimport { clipAxis } from './clipAxis'\nimport { COLUMN_PARTITION_SIZE_PX } from './pivotTableConstants'\nimport { clipPartitionedAxis } from './clipPartitionedAxis'\n\nexport const useTableClipping = ({\n    containerRef,\n    width,\n    height,\n    engine,\n    visualization,\n}) => {\n    const scrollPosition = useScrollPosition(containerRef)\n\n    const rows = useMemo(\n        () =>\n            clipAxis({\n                position: scrollPosition.y,\n                size: height,\n                step: engine.fontSize + engine.cellPadding * 2 + 2,\n                totalCount: engine.height,\n                headerCount:\n                    visualization.columns.length +\n                    (engine.options.title ? 1 : 0) +\n                    (engine.options.subtitle ? 1 : 0),\n            }),\n        [\n            scrollPosition.y,\n            height,\n            engine.fontSize,\n            engine.cellPadding,\n            engine.height,\n            engine.options.title,\n            engine.options.subtitle,\n            visualization.columns.length,\n        ]\n    )\n    const columns = useMemo(() => {\n        const viewportPosition = Math.max(\n            0,\n            scrollPosition.x - engine.rowHeaderPixelWidth\n        )\n        const viewportWidth =\n            width - Math.max(engine.rowHeaderPixelWidth - scrollPosition.x, 0)\n        return clipPartitionedAxis({\n            partitionSize: COLUMN_PARTITION_SIZE_PX,\n            partitions: engine.columnPartitions,\n            axisMap: engine.columnMap,\n            widthMap: engine.columnWidths,\n            viewportWidth,\n            viewportPosition,\n            totalWidth: engine.dataPixelWidth,\n        })\n    }, [\n        scrollPosition.x,\n        engine.rowHeaderPixelWidth,\n        engine.columnPartitions,\n        engine.columnMap,\n        engine.columnWidths,\n        engine.dataPixelWidth,\n        width,\n    ])\n\n    return {\n        rows,\n        columns,\n        scrollPosition,\n    }\n}\n","import React, { createContext, useContext } from 'react'\nimport PropTypes from 'prop-types'\n\nexport const PivotTableEngineContext = createContext(null)\n\nexport const Provider = ({ engine, children }) => {\n    return (\n        <PivotTableEngineContext.Provider value={engine}>\n            {children}\n        </PivotTableEngineContext.Provider>\n    )\n}\nProvider.propTypes = {\n    engine: PropTypes.object.isRequired,\n    children: PropTypes.node,\n}\n\nexport const usePivotTableEngine = () => {\n    return useContext(PivotTableEngineContext)\n}\n","import css from 'styled-jsx/css'\nimport { colors } from '@dhis2/ui-core'\nimport {\n    DISPLAY_DENSITY_PADDING_COMPACT,\n    DISPLAY_DENSITY_PADDING_NORMAL,\n    DISPLAY_DENSITY_PADDING_COMFORTABLE,\n    FONT_SIZE_SMALL,\n    FONT_SIZE_NORMAL,\n    FONT_SIZE_LARGE,\n} from '../../../modules/pivotTable/pivotTableConstants'\n\nexport const table = css`\n    div.pivot-table-container {\n        font-family: 'Roboto', Arial, sans-serif;\n        overflow: auto;\n        color: ${colors.grey900};\n    }\n    table {\n        border-spacing: 0;\n        border-collapse: collapse;\n        white-space: nowrap;\n        overflow: hidden;\n        box-sizing: border-box;\n        text-align: center;\n    }\n`\n\nexport const cell = css`\n    td,\n    th {\n        box-sizing: border-box;\n        font-weight: normal;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        border: 1px solid #b2b2b2;\n        cursor: default;\n    }\n\n    .fontsize-SMALL {\n        font-size: ${FONT_SIZE_SMALL}px;\n        line-height: ${FONT_SIZE_SMALL}px;\n    }\n    .fontsize-NORMAL {\n        font-size: ${FONT_SIZE_NORMAL}px;\n        line-height: ${FONT_SIZE_NORMAL}px;\n    }\n    .fontsize-LARGE {\n        font-size: ${FONT_SIZE_LARGE}px;\n        line-height: ${FONT_SIZE_LARGE}px;\n    }\n\n    .displaydensity-COMPACT {\n        padding: ${DISPLAY_DENSITY_PADDING_COMPACT}px;\n    }\n    .displaydensity-NORMAL {\n        padding: ${DISPLAY_DENSITY_PADDING_NORMAL}px;\n    }\n    .displaydensity-COMFORTABLE {\n        padding: ${DISPLAY_DENSITY_PADDING_COMFORTABLE}px;\n    }\n\n    .column-header {\n        background-color: #dae6f8;\n    }\n    div.column-header-inner {\n        display: flex;\n        flex-direction: row;\n        align-items: center;\n        justify-content: center;\n    }\n    .title {\n        font-weight: bold;\n        background-color: #cddaed;\n    }\n    .row-header {\n        background-color: #dae6f8;\n    }\n    .row-header-hierarchy {\n        text-align: left;\n    }\n    .empty-header {\n        background-color: #cddaed;\n    }\n    .total-header {\n        background-color: #bac6d8;\n    }\n    .value {\n        background-color: #ffffff;\n    }\n    .TEXT {\n        text-align: left;\n    }\n    .NUMBER {\n        text-align: right;\n    }\n    .clickable {\n        cursor: pointer;\n    }\n\n    .value:hover {\n        background-color: #f3f3f3;\n    }\n\n    .subtotal {\n        background-color: #f4f4f4;\n    }\n    .total {\n        background-color: #d8d8d8;\n    }\n\n    .column-header-label {\n        overflow: hidden;\n        text-overflow: ellipsis;\n    }\n`\n\nexport const sortIcon = css`\n    .fontsize-SMALL {\n        height: ${FONT_SIZE_SMALL}px;\n        margin-bottom: 1px;\n        margin-left: 5px;\n    }\n\n    .fontsize-NORMAL {\n        height: ${FONT_SIZE_NORMAL}px;\n        max-height: 11px;\n        margin-bottom: 2px;\n        margin-left: 6px;\n    }\n\n    .fontsize-LARGE {\n        height: ${FONT_SIZE_LARGE}px;\n        margin-bottom: 2px;\n        margin-left: 7px;\n    }\n`\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { table as tableStyle } from './styles/PivotTable.style'\n\nexport const PivotTableContainer = React.forwardRef(\n    ({ width, height, children }, ref) => (\n        <div\n            className=\"pivot-table-container\"\n            style={{ width, height }}\n            ref={ref}\n        >\n            <style jsx>{tableStyle}</style>\n            {width === 0 || height === 0 ? null : <table>{children}</table>}\n        </div>\n    )\n)\n\nPivotTableContainer.displayName = 'PivotTableContainer'\n\nPivotTableContainer.propTypes = {\n    children: PropTypes.node.isRequired,\n    height: PropTypes.number.isRequired,\n    width: PropTypes.number.isRequired,\n}\n","import React from 'react'\n\nexport const PivotTableClippedAxis = ({\n    axisClippingResult,\n    EmptyComponent,\n    ItemComponent,\n}) => [\n    axisClippingResult.pre ? (\n        <EmptyComponent key=\"pre\" size={axisClippingResult.pre} />\n    ) : null,\n    axisClippingResult.indices.map(index => (\n        <ItemComponent key={index} index={index} />\n    )),\n    axisClippingResult.post ? (\n        <EmptyComponent key=\"post\" size={axisClippingResult.post} />\n    ) : null,\n]\n","const headerStacksAreEqual = (a, b, limit) => {\n    for (let i = 0; i <= limit; ++i) {\n        if (a[i] !== b[i]) {\n            return false\n        }\n    }\n    return true\n}\n\nexport const getHeaderForDisplay = ({\n    start,\n    count,\n    index,\n    dimensionLevel,\n    getHeader,\n    showHierarchy,\n}) => {\n    const header = getHeader(index)\n    const showHeader =\n        index === start ||\n        !headerStacksAreEqual(header, getHeader(index - 1), dimensionLevel)\n    if (!showHeader) {\n        return null\n    }\n\n    let span = 1\n    for (let i = index + 1; i < start + count; ++i) {\n        if (!headerStacksAreEqual(getHeader(i), header, dimensionLevel)) {\n            break\n        }\n        ++span\n    }\n\n    const currentHeader = header[dimensionLevel]\n\n    const includesHierarchy = showHierarchy && currentHeader?.hierarchy\n\n    const label = includesHierarchy\n        ? currentHeader.hierarchy.join(' / ')\n        : currentHeader?.name\n\n    return {\n        span,\n        label,\n        includesHierarchy,\n    }\n}\n","import PropTypes from 'prop-types'\nimport { getHeaderForDisplay } from '../../modules/pivotTable/getHeaderForDisplay'\n\nexport const PivotTableHeaderCell = ({\n    axisClippingResult,\n    index,\n    level,\n    getHeader,\n    render,\n    showHierarchy,\n}) => {\n    const header = getHeaderForDisplay({\n        start: axisClippingResult.indices[0],\n        count: axisClippingResult.indices.length,\n        index,\n        dimensionLevel: level,\n        getHeader,\n        showHierarchy,\n    })\n\n    return !header ? null : render(header)\n}\n\nPivotTableHeaderCell.propTypes = {\n    axisClippingResult: PropTypes.object.isRequired,\n    getHeader: PropTypes.func.isRequired,\n    index: PropTypes.number.isRequired,\n    level: PropTypes.number.isRequired,\n    render: PropTypes.func.isRequired,\n    showHierarchy: PropTypes.bool.isRequired,\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport classnames from 'classnames'\nimport { cell as cellStyle } from './styles/PivotTable.style'\nimport { usePivotTableEngine } from './PivotTableEngineContext'\n\nexport const PivotTableCell = React.forwardRef(\n    ({ classes, isColumnHeader, children, style = {}, ...props }, ref) => {\n        const engine = usePivotTableEngine()\n        style.height = style.minHeight = style.maxHeight =\n            style.height || engine.fontSize + engine.cellPadding * 2 + 2\n\n        const className = classnames(\n            classes,\n            `fontsize-${engine.visualization.fontSize}`,\n            `displaydensity-${engine.visualization.displayDensity}`\n        )\n\n        return isColumnHeader ? (\n            <th className={className} style={style} {...props}>\n                <style jsx>{cellStyle}</style>\n                {children}\n            </th>\n        ) : (\n            <td ref={ref} className={className} style={style} {...props}>\n                <style jsx>{cellStyle}</style>\n                {children}\n            </td>\n        )\n    }\n)\n\nPivotTableCell.displayName = 'PivotTableCell'\n\nPivotTableCell.defaultProps = {\n    isColumnHeader: false,\n}\nPivotTableCell.propTypes = {\n    children: PropTypes.node,\n    classes: PropTypes.oneOfType([\n        PropTypes.array,\n        PropTypes.object,\n        PropTypes.string,\n    ]),\n    isColumnHeader: PropTypes.bool,\n    style: PropTypes.object,\n}\n","import React from 'react'\n\nexport const SortIconAscending = () => (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 6 10\" height=\"100%\">\n        <g fill=\"none\" fillRule=\"evenodd\" transform=\"translate(-3 -1)\">\n            <rect width=\"12\" height=\"12\" />\n            <polygon fill=\"#A0ADBA\" points=\"6 11 3 7 9 7\" />\n            <polygon fill=\"#212934\" points=\"3 5 9 5 6 1\" />\n        </g>\n    </svg>\n)\n","import React from 'react'\n\nexport const SortIconDescending = () => (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 6 10\" height=\"100%\">\n        <g fill=\"none\" fillRule=\"evenodd\" transform=\"translate(-3 -1)\">\n            <rect width=\"12\" height=\"12\" />\n            <polygon fill=\"#212934\" points=\"6 11 3 7 9 7\" />\n            <polygon fill=\"#A0ADBA\" points=\"3 5 9 5 6 1\" />\n        </g>\n    </svg>\n)\n","import React from 'react'\n\nexport const SortIconIdle = () => (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 6 10\" height=\"100%\">\n        <g fill=\"none\" fillRule=\"evenodd\" transform=\"translate(-3 -1)\">\n            <rect width=\"12\" height=\"12\" />\n            <polygon fill=\"#A0ADBA\" points=\"6 11 3 7 9 7\" />\n            <polygon fill=\"#A0ADBA\" points=\"3 5 9 5 6 1\" />\n        </g>\n    </svg>\n)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { usePivotTableEngine } from './PivotTableEngineContext'\nimport { SORT_ORDER_ASCENDING } from '../../modules/pivotTable/pivotTableConstants'\nimport { sortIcon as sortIconStyle } from './styles/PivotTable.style'\nimport { SortIconAscending } from './icons/SortIconAscending'\nimport { SortIconDescending } from './icons/SortIconDescending'\nimport { SortIconIdle } from './icons/SortIconIdle'\n\nexport const PivotTableSortIcon = ({ index, sortBy }) => {\n    const engine = usePivotTableEngine()\n\n    const SortIcon =\n        sortBy?.column === index\n            ? sortBy.order === SORT_ORDER_ASCENDING\n                ? SortIconAscending\n                : SortIconDescending\n            : SortIconIdle\n\n    return (\n        <span className={`fontsize-${engine.visualization.fontSize}`}>\n            <style jsx>{sortIconStyle}</style>\n            <SortIcon />\n        </span>\n    )\n}\n\nPivotTableSortIcon.propTypes = {\n    index: PropTypes.number.isRequired,\n    sortBy: PropTypes.object,\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { PivotTableHeaderCell } from './PivotTableHeaderCell'\nimport { cell as cellStyle } from './styles/PivotTable.style'\n\nimport { PivotTableCell } from './PivotTableCell'\nimport { usePivotTableEngine } from './PivotTableEngineContext'\nimport { PivotTableSortIcon } from './PivotTableSortIcon'\n\nexport const PivotTableColumnHeaderCell = ({\n    clippingResult,\n    index,\n    level,\n    onSortByColumn,\n    sortBy,\n}) => {\n    const engine = usePivotTableEngine()\n\n    const width = engine.columnWidths[index]?.width\n\n    return (\n        <PivotTableHeaderCell\n            axisClippingResult={clippingResult.columns}\n            index={index}\n            level={level}\n            getHeader={idx => engine.getColumnHeader(idx)}\n            showHierarchy={engine.visualization.showHierarchy}\n            render={header => {\n                const isSortable =\n                    level === engine.columnDepth - 1 &&\n                    header.span === 1 &&\n                    engine.isSortable(index)\n\n                return (\n                    <PivotTableCell\n                        isColumnHeader\n                        classes={\n                            header.label &&\n                            header.label !== 'Total' &&\n                            header.label !== 'Subtotal' // TODO: Actually look up the column type!\n                                ? 'column-header'\n                                : 'empty-header'\n                        }\n                        colSpan={header.span}\n                        title={header.label}\n                        style={{\n                            cursor: isSortable ? 'pointer' : 'default',\n                            width,\n                            maxWidth: width,\n                            minWidth: width,\n                        }}\n                        onClick={\n                            isSortable ? () => onSortByColumn(index) : undefined\n                        }\n                    >\n                        <style jsx>{cellStyle}</style>\n                        <div className=\"column-header-inner\">\n                            <span className=\"column-header-label\">\n                                {header.label}\n                            </span>\n                            {isSortable ? (\n                                <PivotTableSortIcon\n                                    index={index}\n                                    sortBy={sortBy}\n                                />\n                            ) : null}\n                        </div>\n                    </PivotTableCell>\n                )\n            }}\n        />\n    )\n}\n\nPivotTableColumnHeaderCell.propTypes = {\n    clippingResult: PropTypes.shape({ columns: PropTypes.object.isRequired })\n        .isRequired,\n    index: PropTypes.number.isRequired,\n    level: PropTypes.number.isRequired,\n    onSortByColumn: PropTypes.func.isRequired,\n    sortBy: PropTypes.shape({\n        column: PropTypes.number.isRequired,\n        order: PropTypes.number.isRequired,\n    }),\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { usePivotTableEngine } from './PivotTableEngineContext'\nimport { PivotTableCell } from './PivotTableCell'\n\nexport const PivotTableDimensionLabelCell = ({ rowLevel, columnLevel }) => {\n    const engine = usePivotTableEngine()\n\n    const colCount = engine.rowDepth\n    const rowCount = engine.columnDepth\n\n    let colSpan = 1,\n        rowSpan = 1,\n        label\n\n    if (!engine.visualization.showDimensionLabels) {\n        if (rowLevel > 0 || columnLevel > 0) {\n            colSpan = rowSpan = 0\n        } else {\n            colSpan = colCount\n            rowSpan = rowCount\n        }\n    } else {\n        label = engine.getDimensionLabel(rowLevel, columnLevel)\n        if (!label) {\n            if (rowLevel > 0 || columnLevel > 0) {\n                colSpan = rowSpan = 0\n            } else {\n                colSpan = colCount - 1\n                rowSpan = rowCount - 1\n            }\n        }\n    }\n\n    if (!colSpan || !rowSpan) {\n        return null\n    }\n\n    const width = engine.rowHeaderWidths[rowLevel]\n    return (\n        <PivotTableCell\n            classes={['empty-header', 'column-header']}\n            colSpan={colSpan}\n            rowSpan={rowSpan}\n            title={label}\n            style={{ width, maxWidth: width, minWidth: width }}\n        >\n            {label}\n        </PivotTableCell>\n    )\n}\n\nPivotTableDimensionLabelCell.propTypes = {\n    columnLevel: PropTypes.number.isRequired,\n    rowLevel: PropTypes.number.isRequired,\n}\n","import React from 'react'\nimport { cell as cellStyle } from './styles/PivotTable.style'\nimport { PivotTableCell } from './PivotTableCell'\n\nexport const PivotTableEmptyCell = React.forwardRef(({ ...props }, ref) => {\n    return (\n        <PivotTableCell ref={ref} {...props}>\n            <style jsx>{cellStyle}</style>\n        </PivotTableCell>\n    )\n})\n\nPivotTableEmptyCell.displayName = 'PivotTableEmptyCell'\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { PivotTableClippedAxis } from './PivotTableClippedAxis'\nimport { PivotTableColumnHeaderCell } from './PivotTableColumnHeaderCell'\nimport { PivotTableDimensionLabelCell } from './PivotTableDimensionLabelCell'\nimport { PivotTableEmptyCell } from './PivotTableEmptyCell'\nimport { usePivotTableEngine } from './PivotTableEngineContext'\nimport times from 'lodash/times'\n\nexport const PivotTableColumnHeaders = ({\n    clippingResult,\n    onSortByColumn,\n    sortBy,\n}) => {\n    const engine = usePivotTableEngine()\n\n    const columns = times(engine.columnDepth, x => x)\n    const rows = times(engine.rowDepth, x => x)\n\n    return columns.map(columnLevel => (\n        <tr key={columnLevel}>\n            {rows.map(rowLevel => (\n                <PivotTableDimensionLabelCell\n                    key={rowLevel}\n                    rowLevel={rowLevel}\n                    columnLevel={columnLevel}\n                />\n            ))}\n            <PivotTableClippedAxis\n                axisClippingResult={clippingResult.columns}\n                EmptyComponent={({ size }) => (\n                    <PivotTableEmptyCell\n                        classes=\"column-header\"\n                        style={{ minWidth: size }}\n                    />\n                )}\n                ItemComponent={({ index }) => (\n                    <PivotTableColumnHeaderCell\n                        clippingResult={clippingResult}\n                        index={index}\n                        level={columnLevel}\n                        onSortByColumn={onSortByColumn}\n                        sortBy={sortBy}\n                    />\n                )}\n            />\n        </tr>\n    ))\n}\n\nPivotTableColumnHeaders.propTypes = {\n    clippingResult: PropTypes.shape({\n        columns: PropTypes.object.isRequired,\n    }).isRequired,\n    onSortByColumn: PropTypes.func.isRequired,\n    sortBy: PropTypes.shape({\n        column: PropTypes.number.isRequired,\n        order: PropTypes.number.isRequired,\n    }),\n}\n","import React, { useState, useEffect } from 'react'\nimport PropTypes from 'prop-types'\nimport { cell as cellStyle } from './styles/PivotTable.style'\nimport { usePivotTableEngine } from './PivotTableEngineContext'\nimport { PivotTableCell } from './PivotTableCell'\n\nexport const PivotTableTitleRow = ({\n    title,\n    scrollPosition,\n    containerWidth,\n    totalWidth,\n}) => {\n    const engine = usePivotTableEngine()\n    const columnCount = engine.width + engine.rowDepth\n\n    const [position, setPosition] = useState(scrollPosition.x)\n    useEffect(() => {\n        setPosition(\n            Math.max(0, Math.min(scrollPosition.x, totalWidth - containerWidth))\n        )\n    }, [containerWidth, scrollPosition.x, totalWidth])\n    return (\n        <tr>\n            <style jsx>{cellStyle}</style>\n            <PivotTableCell\n                classes={['column-header', 'title']}\n                colSpan={columnCount}\n            >\n                <div\n                    style={{\n                        marginLeft: position,\n                        maxWidth: containerWidth,\n                        textAlign: 'center',\n                    }}\n                >\n                    {title}\n                </div>\n            </PivotTableCell>\n        </tr>\n    )\n}\n\nPivotTableTitleRow.propTypes = {\n    containerWidth: PropTypes.number.isRequired,\n    scrollPosition: PropTypes.shape({ x: PropTypes.number.isRequired })\n        .isRequired,\n    title: PropTypes.string.isRequired,\n    totalWidth: PropTypes.number.isRequired,\n}\n","import isObject from 'lodash/isObject'\nimport isString from 'lodash/isString'\n\n// Dimension\n\nexport const DIMENSION = {\n    isValid: dimension => isObject(dimension),\n}\n\n// Props\n\nexport const DIMENSION_PROP_ID = {\n    name: 'dimension',\n    defaultValue: '',\n    required: true,\n    isValid: prop => isString(prop),\n}\n\nexport const DIMENSION_PROP_ITEMS = {\n    name: 'items',\n    defaultValue: [],\n    required: false,\n    isValid: prop => Array.isArray(prop),\n}\n\nexport const DIMENSION_PROPS = [DIMENSION_PROP_ID, DIMENSION_PROP_ITEMS]\n","import { DIMENSION_PROP_ID } from './dimension'\n\nexport const dimensionIs = (dimension, dimensionId) =>\n    dimension[DIMENSION_PROP_ID.name] === dimensionId\n","import { DIMENSION, DIMENSION_PROP_ITEMS } from './dimension'\n\nexport const dimensionIsEmpty = dimension =>\n    !(\n        DIMENSION.isValid(dimension) &&\n        DIMENSION_PROP_ITEMS.isValid(dimension[DIMENSION_PROP_ITEMS.name]) &&\n        dimension[DIMENSION_PROP_ITEMS.name].length\n    )\n","import { DIMENSION, DIMENSION_PROPS } from './dimension'\nimport { dimensionIsEmpty } from './dimensionIsEmpty'\n\nexport const dimensionIsValid = (dimension, { requireItems } = {}) => {\n    if (!DIMENSION.isValid(dimension)) {\n        return false\n    }\n\n    const requiredProps = DIMENSION_PROPS.filter(prop => prop.required)\n\n    if (!requiredProps.every(prop => prop.isValid(dimension[prop.name]))) {\n        return false\n    }\n\n    if (requireItems === true && dimensionIsEmpty(dimension)) {\n        return false\n    }\n\n    return true\n}\n","import { DIMENSION_PROP_ITEMS } from './dimension'\nimport { dimensionIsValid } from './dimensionIsValid'\n\nexport const dimensionGetItems = dimension =>\n    dimensionIsValid(dimension, { requireItems: true })\n        ? dimension[DIMENSION_PROP_ITEMS.name]\n        : DIMENSION_PROP_ITEMS.defaultValue\n","import i18n from '@dhis2/d2-i18n'\nimport { ouIdHelper } from './ouIdHelper'\nimport { dimensionIs } from './layout/dimensionIs'\nimport { dimensionGetItems } from './layout/dimensionGetItems'\nimport { DIMENSION_ID_ORGUNIT } from './predefinedDimensions'\n\nexport const getOuLevelAndGroupText = (filter, metaData) => {\n    if (!dimensionIs(DIMENSION_ID_ORGUNIT)) {\n        return ''\n    }\n\n    const items = dimensionGetItems(filter)\n    const hasOuLevel = items.some(item => ouIdHelper.hasLevelPrefix(item.id))\n    const hasOuGroup = items.some(item => ouIdHelper.hasGroupPrefix(item.id))\n\n    const filterFragments = []\n\n    if (hasOuGroup) {\n        filterFragments.push(getLevelAndGroupText(items, metaData, false))\n    }\n\n    if (hasOuLevel) {\n        filterFragments.push(getLevelAndGroupText(items, metaData, true))\n    }\n\n    return filterFragments.join(' - ')\n}\n\nconst getLevelAndGroupText = (items, metaData, isLevel) => {\n    const getNameFromMetadata = id =>\n        metaData.items[id] ? metaData.items[id].name : id\n\n    const dynamicOuItems = items.filter(item =>\n        isLevel\n            ? ouIdHelper.hasLevelPrefix(item.id)\n            : ouIdHelper.hasGroupPrefix(item.id)\n    )\n    const lastItem = dynamicOuItems.length > 1 ? dynamicOuItems.pop() : null\n    const dynamicOuNames = dynamicOuItems\n        .map(item => getNameFromMetadata(ouIdHelper.removePrefix(item.id)))\n        .join(', ')\n\n    let allDynamicOuNames\n\n    if (lastItem) {\n        const lastOuName = getNameFromMetadata(\n            ouIdHelper.removePrefix(lastItem.id)\n        )\n        allDynamicOuNames = i18n.t('{{dynamicOuNames}} and {{lastOuName}}', {\n            dynamicOuNames,\n            lastOuName,\n        })\n    } else {\n        allDynamicOuNames = dynamicOuNames\n    }\n\n    const staticOuNames = items\n        .filter(\n            item =>\n                !ouIdHelper.hasGroupPrefix(item.id) &&\n                !ouIdHelper.hasLevelPrefix(item.id)\n        )\n        .map(item => getNameFromMetadata(item.id))\n        .join(', ')\n\n    let ouLevelAndGroupText = ''\n    if (!staticOuNames) {\n        if (isLevel) {\n            ouLevelAndGroupText = i18n.t('{{allDynamicOuNames}} levels', {\n                allDynamicOuNames,\n            })\n        } else {\n            ouLevelAndGroupText = i18n.t('{{allDynamicOuNames}} groups', {\n                allDynamicOuNames,\n            })\n        }\n    } else {\n        if (isLevel) {\n            ouLevelAndGroupText = i18n.t(\n                '{{allDynamicOuNames}} levels in {{staticOuNames}}',\n                {\n                    allDynamicOuNames,\n                    staticOuNames,\n                }\n            )\n        } else {\n            ouLevelAndGroupText = i18n.t(\n                '{{allDynamicOuNames}} groups in {{staticOuNames}}',\n                {\n                    allDynamicOuNames,\n                    staticOuNames,\n                }\n            )\n        }\n    }\n\n    return ouLevelAndGroupText\n}\n","import { ouIdHelper } from '../../modules/ouIdHelper'\nimport { dimensionIs } from '../../modules/layout/dimensionIs'\nimport {\n    DIMENSION_ID_ORGUNIT,\n    DIMENSION_ID_PERIOD,\n} from '../../modules/predefinedDimensions'\nimport { dimensionGetItems } from '../../modules/layout/dimensionGetItems'\nimport { getOuLevelAndGroupText } from '../../modules/getOuLevelAndGroupText'\n\nexport default function(filters, metaData) {\n    if (!Array.isArray(filters) || !filters.length) {\n        return ''\n    }\n\n    const titleFragments = []\n    let i\n    let l\n\n    filters.forEach(filter => {\n        const items = dimensionGetItems(filter)\n\n        if (\n            dimensionIs(filter, DIMENSION_ID_ORGUNIT) &&\n            items.some(\n                ({ id }) =>\n                    ouIdHelper.hasGroupPrefix(id) ||\n                    ouIdHelper.hasLevelPrefix(id)\n            )\n        ) {\n            titleFragments.push(getOuLevelAndGroupText(filter, metaData))\n        } else {\n            let filterItems = []\n\n            if (dimensionIs(filter, DIMENSION_ID_PERIOD)) {\n                filterItems = items.map(({ id }) => id)\n            } else {\n                filterItems = metaData.dimensions[filter.dimension]\n            }\n\n            if (Array.isArray(filterItems)) {\n                l = filterItems.length\n                let id\n                const sectionParts = []\n\n                for (i = 0; i < l; i++) {\n                    id = filterItems[i]\n\n                    // if the value is present in items take the name to show from there\n                    if (metaData.items[id]) {\n                        sectionParts.push(metaData.items[id].name)\n                    }\n                    // otherwise use the values directly\n                    // this is a temporary fix to avoid app crashing when using filters with data items in EV\n                    else {\n                        sectionParts.push(\n                            metaData.items[filter.dimension].name +\n                                ': ' +\n                                filterItems.join(', ')\n                        )\n\n                        break\n                    }\n                }\n\n                titleFragments.push(sectionParts.join(', '))\n            }\n        }\n    })\n\n    return titleFragments.join(' - ')\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { usePivotTableEngine } from './PivotTableEngineContext'\nimport { PivotTableTitleRow } from './PivotTableTitleRow'\nimport getFilterText from '../../visualizations/util/getFilterText'\n\nexport const PivotTableTitleRows = ({ clippingResult, width }) => {\n    const engine = usePivotTableEngine()\n    return (\n        <>\n            {engine.options.title ? (\n                <PivotTableTitleRow\n                    title={engine.options.title}\n                    scrollPosition={clippingResult.scrollPosition}\n                    containerWidth={width}\n                    totalWidth={\n                        engine.dataPixelWidth + engine.rowHeaderPixelWidth\n                    }\n                />\n            ) : null}\n            {engine.options.subtitle ? (\n                <PivotTableTitleRow\n                    title={engine.options.subtitle}\n                    scrollPosition={clippingResult.scrollPosition}\n                    containerWidth={width}\n                    totalWidth={\n                        engine.dataPixelWidth + engine.rowHeaderPixelWidth\n                    }\n                />\n            ) : null}\n            {engine.visualization.filters?.length ? (\n                <PivotTableTitleRow\n                    title={getFilterText(\n                        engine.visualization.filters,\n                        engine.rawData.metaData\n                    )}\n                    scrollPosition={clippingResult.scrollPosition}\n                    containerWidth={width}\n                    totalWidth={\n                        engine.dataPixelWidth + engine.rowHeaderPixelWidth\n                    }\n                />\n            ) : null}\n        </>\n    )\n}\n\nPivotTableTitleRows.propTypes = {\n    clippingResult: PropTypes.object.isRequired,\n    width: PropTypes.number.isRequired,\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { PivotTableColumnHeaders } from './PivotTableColumnHeaders'\nimport { PivotTableTitleRows } from './PivotTableTitleRows'\n\nexport const PivotTableHead = ({\n    clippingResult,\n    width,\n    sortBy,\n    onSortByColumn,\n}) => (\n    <thead>\n        <PivotTableTitleRows clippingResult={clippingResult} width={width} />\n        <PivotTableColumnHeaders\n            clippingResult={clippingResult}\n            sortBy={sortBy}\n            onSortByColumn={onSortByColumn}\n        />\n    </thead>\n)\n\nPivotTableHead.propTypes = {\n    clippingResult: PropTypes.object.isRequired,\n    width: PropTypes.number.isRequired,\n    onSortByColumn: PropTypes.func.isRequired,\n    sortBy: PropTypes.object,\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { usePivotTableEngine } from './PivotTableEngineContext'\nimport { PivotTableCell } from './PivotTableCell'\n\nexport const PivotTableEmptyRow = ({ height, columns }) => {\n    const engine = usePivotTableEngine()\n\n    return (\n        <tr>\n            <PivotTableCell\n                colSpan={engine.rowDepth}\n                style={{ height }}\n                classes=\"row-header\"\n            />\n            {columns.map(i => (\n                <PivotTableCell key={i} />\n            ))}\n        </tr>\n    )\n}\n\nPivotTableEmptyRow.propTypes = {\n    columns: PropTypes.array.isRequired,\n    height: PropTypes.number.isRequired,\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { PivotTableHeaderCell } from './PivotTableHeaderCell'\nimport { PivotTableCell } from './PivotTableCell'\nimport { usePivotTableEngine } from './PivotTableEngineContext'\n\nexport const PivotTableRowHeaderCell = ({\n    clippingResult,\n    rowIndex,\n    rowLevel,\n}) => {\n    const engine = usePivotTableEngine()\n    const width = engine.rowHeaderWidths[rowLevel]\n\n    return (\n        <PivotTableHeaderCell\n            axisClippingResult={clippingResult.rows}\n            index={rowIndex}\n            level={rowLevel}\n            getHeader={idx => engine.getRowHeader(idx)}\n            showHierarchy={engine.visualization.showHierarchy}\n            render={header => (\n                <PivotTableCell\n                    classes={[\n                        header.label &&\n                        header.label !== 'Total' &&\n                        header.label !== 'Subtotal'\n                            ? 'row-header'\n                            : 'empty-header',\n                        header.includesHierarchy && 'row-header-hierarchy',\n                    ]}\n                    rowSpan={header.span}\n                    title={header.label}\n                    style={{ width, maxWidth: width, minWidth: width }}\n                >\n                    {header.label}\n                </PivotTableCell>\n            )}\n        />\n    )\n}\n\nPivotTableRowHeaderCell.propTypes = {\n    clippingResult: PropTypes.shape({ rows: PropTypes.object.isRequired })\n        .isRequired,\n    rowIndex: PropTypes.number.isRequired,\n    rowLevel: PropTypes.number.isRequired,\n}\n","const calculateColorBrightness = function(rgb) {\n    return Math.round(\n        (parseInt(rgb[0]) * 299 +\n            parseInt(rgb[1]) * 587 +\n            parseInt(rgb[2]) * 114) /\n            1000\n    )\n}\n\nconst isHex = color => {\n    return typeof color === 'string' && color.charAt(0) === '#'\n}\n\nconst hexToRgb = hex => {\n    const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex)\n\n    return result\n        ? [\n              parseInt(result[1], 16),\n              parseInt(result[2], 16),\n              parseInt(result[3], 16),\n          ]\n        : null\n}\n\nexport const isColorBright = color => {\n    if (isHex(color)) {\n        color = hexToRgb(color)\n    }\n\n    return calculateColorBrightness(color) > 125\n}\n","export const LEGEND_DISPLAY_STRATEGY_BY_DATA_ITEM = 'BY_DATA_ITEM'\nexport const LEGEND_DISPLAY_STRATEGY_FIXED = 'FIXED'\n\nexport const LEGEND_DISPLAY_STYLE_FILL = 'FILL'\nexport const LEGEND_DISPLAY_STYLE_TEXT = 'TEXT'\n\nexport const getColorByValueFromLegendSet = (legendSet, value) => {\n    const legend = legendSet.legends.find(\n        legend => value >= legend.startValue && value < legend.endValue // TODO: Confirm inclusive/exclusive bounds\n    )\n    return legend && legend.color\n}\n","import { isColorBright } from './isColorBright'\nimport { colors } from '@dhis2/ui-core'\nimport {\n    getColorByValueFromLegendSet,\n    LEGEND_DISPLAY_STRATEGY_BY_DATA_ITEM,\n    LEGEND_DISPLAY_STRATEGY_FIXED,\n    LEGEND_DISPLAY_STYLE_TEXT,\n    LEGEND_DISPLAY_STYLE_FILL,\n} from '../legends'\n\nconst getLegendSet = (engine, dxDimension) => {\n    let legendSetId\n    switch (engine.visualization.legendDisplayStrategy) {\n        case LEGEND_DISPLAY_STRATEGY_BY_DATA_ITEM:\n            if (dxDimension && dxDimension.legendSet) {\n                legendSetId = dxDimension.legendSet\n            }\n            break\n        case LEGEND_DISPLAY_STRATEGY_FIXED:\n        default:\n            legendSetId = engine.visualization.legendSet\n                ? engine.visualization.legendSet.id\n                : undefined\n            break\n    }\n\n    return engine.legendSets[legendSetId]\n}\n\nconst buildStyleObject = (legendColor, engine) => {\n    const style = {}\n    switch (engine.visualization.legendDisplayStyle) {\n        case LEGEND_DISPLAY_STYLE_TEXT:\n            style.color = legendColor\n            break\n        case LEGEND_DISPLAY_STYLE_FILL:\n        default:\n            style.backgroundColor = legendColor\n            if (isColorBright(legendColor)) {\n                style.color = colors.grey900\n            } else {\n                style.color = colors.white\n            }\n            break\n    }\n    return style\n}\n\nexport const applyLegendSet = (value, dxDimension, engine) => {\n    if (isNaN(value) || !engine.legendSets) {\n        return {}\n    }\n\n    const legendSet = getLegendSet(engine, dxDimension)\n    if (!legendSet) {\n        return {}\n    }\n\n    const legendColor = getColorByValueFromLegendSet(legendSet, value)\n    if (!legendColor) {\n        return {}\n    }\n\n    return buildStyleObject(legendColor, engine)\n}\n","import React, { useRef } from 'react'\nimport PropTypes from 'prop-types'\n\nimport { applyLegendSet } from '../../modules/pivotTable/applyLegendSet'\nimport { PivotTableCell } from './PivotTableCell'\nimport { usePivotTableEngine } from './PivotTableEngineContext'\nimport {\n    VALUE_TYPE_NUMBER,\n    CELL_TYPE_VALUE,\n} from '../../modules/pivotTable/pivotTableConstants'\nimport { PivotTableEmptyCell } from './PivotTableEmptyCell'\n\nexport const PivotTableValueCell = ({\n    row,\n    column,\n    onToggleContextualMenu,\n}) => {\n    const engine = usePivotTableEngine()\n    const cellRef = useRef(undefined)\n\n    const cellContent = engine.get({\n        row,\n        column,\n    })\n\n    const isClickable =\n        onToggleContextualMenu &&\n        cellContent.cellType === CELL_TYPE_VALUE &&\n        cellContent.ouId\n    const classes = [\n        cellContent.cellType,\n        cellContent.valueType,\n        isClickable && 'clickable',\n    ]\n    const onClick = () => {\n        onToggleContextualMenu(cellRef, cellContent)\n    }\n\n    if (!cellContent || cellContent.empty) {\n        return (\n            <PivotTableEmptyCell\n                onClick={isClickable ? onClick : undefined}\n                ref={cellRef}\n                classes={[cellContent.cellType, isClickable && 'clickable']}\n            />\n        )\n    }\n\n    // TODO: Add support for 'INTEGER' type (requires server changes)\n    const legendStyle =\n        cellContent.cellType === CELL_TYPE_VALUE &&\n        cellContent.valueType === VALUE_TYPE_NUMBER\n            ? applyLegendSet(\n                  cellContent.rawValue,\n                  cellContent.dxDimension,\n                  engine\n              )\n            : undefined\n\n    const width = engine.columnWidths[engine.columnMap[column]].width\n    const style = {\n        ...legendStyle,\n        width,\n        minWidth: width,\n        maxWidth: width,\n    }\n\n    return (\n        <PivotTableCell\n            key={column}\n            classes={classes}\n            title={cellContent.renderedValue}\n            style={style}\n            onClick={isClickable ? onClick : undefined}\n            ref={cellRef}\n        >\n            {cellContent.renderedValue ?? null}\n        </PivotTableCell>\n    )\n}\n\nPivotTableValueCell.propTypes = {\n    column: PropTypes.number.isRequired,\n    row: PropTypes.number.isRequired,\n    onToggleContextualMenu: PropTypes.func,\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { PivotTableClippedAxis } from './PivotTableClippedAxis'\nimport { PivotTableRowHeaderCell } from './PivotTableRowHeaderCell'\nimport { PivotTableValueCell } from './PivotTableValueCell'\nimport { PivotTableEmptyCell } from './PivotTableEmptyCell'\nimport { usePivotTableEngine } from './PivotTableEngineContext'\nimport times from 'lodash/times'\n\nexport const PivotTableRow = ({\n    clippingResult,\n    rowIndex,\n    onToggleContextualMenu,\n}) => {\n    const engine = usePivotTableEngine()\n    return (\n        <tr>\n            {times(engine.rowDepth, x => x).map(rowLevel => (\n                <PivotTableRowHeaderCell\n                    key={rowLevel}\n                    clippingResult={clippingResult}\n                    rowIndex={rowIndex}\n                    rowLevel={rowLevel}\n                />\n            ))}\n            <PivotTableClippedAxis\n                axisClippingResult={clippingResult.columns}\n                EmptyComponent={() => <PivotTableEmptyCell classes=\"value\" />}\n                ItemComponent={({ index: columnIndex }) => (\n                    <PivotTableValueCell\n                        row={rowIndex}\n                        column={columnIndex}\n                        onToggleContextualMenu={onToggleContextualMenu}\n                    />\n                )}\n            />\n        </tr>\n    )\n}\n\nPivotTableRow.propTypes = {\n    clippingResult: PropTypes.shape({\n        columns: PropTypes.object.isRequired,\n        rows: PropTypes.object.isRequired,\n    }).isRequired,\n    rowIndex: PropTypes.number.isRequired,\n    onToggleContextualMenu: PropTypes.func,\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { PivotTableClippedAxis } from './PivotTableClippedAxis'\nimport { PivotTableEmptyRow } from './PivotTableEmptyRow'\nimport { PivotTableRow } from './PivotTableRow'\n\nexport const PivotTableBody = ({ clippingResult, onToggleContextualMenu }) => (\n    <tbody>\n        <PivotTableClippedAxis\n            axisClippingResult={clippingResult.rows}\n            EmptyComponent={({ size }) => (\n                <PivotTableEmptyRow\n                    height={size}\n                    columns={clippingResult.columns.indices}\n                />\n            )}\n            ItemComponent={({ index }) => (\n                <PivotTableRow\n                    key={index}\n                    clippingResult={clippingResult}\n                    rowIndex={index}\n                    onToggleContextualMenu={onToggleContextualMenu}\n                />\n            )}\n        />\n    </tbody>\n)\n\nPivotTableBody.propTypes = {\n    clippingResult: PropTypes.object.isRequired,\n    onToggleContextualMenu: PropTypes.func,\n}\n","import { useState } from 'react'\nimport {\n    SORT_ORDER_ASCENDING,\n    SORT_ORDER_DESCENDING,\n} from './pivotTableConstants'\n\nexport const useSortableColumns = engine => {\n    const [sortBy, setSortBy] = useState(null)\n\n    const onSortByColumn = column => {\n        let order = SORT_ORDER_ASCENDING\n        if (sortBy && sortBy.column === column) {\n            if (sortBy.order === SORT_ORDER_ASCENDING) {\n                order = SORT_ORDER_DESCENDING\n            } else if (sortBy.order === SORT_ORDER_DESCENDING) {\n                engine.clearSort()\n                setSortBy(null)\n                return\n            }\n        }\n        engine.sort(column, order)\n        setSortBy({ column, order }) // Force a re-render\n    }\n\n    return {\n        sortBy,\n        onSortByColumn,\n    }\n}\n","import React, { useRef, useMemo } from 'react'\nimport PropTypes from 'prop-types'\n\nimport { PivotTableEngine } from '../../modules/pivotTable/PivotTableEngine'\nimport { useParentSize } from '../../modules/pivotTable/useParentSize'\nimport { useTableClipping } from '../../modules/pivotTable/useTableClipping'\nimport { Provider } from './PivotTableEngineContext'\nimport { PivotTableContainer } from './PivotTableContainer'\nimport { PivotTableHead } from './PivotTableHead'\nimport { PivotTableBody } from './PivotTableBody'\nimport { useSortableColumns } from '../../modules/pivotTable/useSortableColumns'\n\nconst PivotTable = ({\n    visualization,\n    data,\n    legendSets,\n    renderCounter,\n    onToggleContextualMenu,\n}) => {\n    const containerRef = useRef(undefined)\n    const { width, height } = useParentSize(containerRef, renderCounter)\n\n    const engine = useMemo(\n        () => new PivotTableEngine(visualization, data, legendSets),\n        [visualization, data, legendSets]\n    )\n\n    const { sortBy, onSortByColumn } = useSortableColumns(engine)\n\n    const clippingResult = useTableClipping({\n        containerRef,\n        width,\n        height,\n        engine,\n        visualization,\n    })\n\n    return (\n        <Provider engine={engine}>\n            <PivotTableContainer\n                ref={containerRef}\n                width={width}\n                height={height}\n            >\n                <PivotTableHead\n                    clippingResult={clippingResult}\n                    width={width}\n                    sortBy={sortBy}\n                    onSortByColumn={onSortByColumn}\n                />\n                <PivotTableBody\n                    clippingResult={clippingResult}\n                    onToggleContextualMenu={onToggleContextualMenu}\n                />\n            </PivotTableContainer>\n        </Provider>\n    )\n}\n\nPivotTable.propTypes = {\n    data: PropTypes.object.isRequired,\n    visualization: PropTypes.object.isRequired,\n    legendSets: PropTypes.arrayOf(PropTypes.object),\n    renderCounter: PropTypes.number,\n    onToggleContextualMenu: PropTypes.func,\n}\n\nexport default PivotTable\n","import isObject from 'lodash/isObject'\n\nexport const LAYOUT = {\n    isValid: layout => isObject(layout),\n}\n","import { DIMENSION_PROP_ID } from './dimension'\n\nexport const dimensionGetId = dimension => dimension[DIMENSION_PROP_ID.name]\n","import { AXIS, DEFAULT_AXIS_IDS } from './axis'\nimport { dimensionGetId } from './dimensionGetId'\n\nexport const layoutFilterDimensions = (layout, dimensionIds) => {\n    const idArray = Array.isArray(dimensionIds) ? dimensionIds : [dimensionIds]\n    const filteredLayout = Object.assign({}, layout)\n\n    DEFAULT_AXIS_IDS.forEach(axisId => {\n        if (AXIS.isValid(filteredLayout[axisId])) {\n            filteredLayout[axisId] = filteredLayout[axisId].filter(\n                dimension => !idArray.includes(dimensionGetId(dimension))\n            )\n        }\n    })\n\n    return filteredLayout\n}\n","import { AXIS_ID_COLUMNS, AXIS_ID_ROWS, AXIS_ID_FILTERS } from './axis'\n\nexport const layoutGetAllAxes = layout => [\n    layout[AXIS_ID_COLUMNS],\n    layout[AXIS_ID_ROWS],\n    layout[AXIS_ID_FILTERS],\n]\n","import { layoutGetAllAxes } from './layoutGetAllAxes'\n\nexport const layoutGetAllDimensions = layout =>\n    layoutGetAllAxes(layout).reduce((allDimensions, axis) => {\n        allDimensions.push(...axis)\n        return allDimensions\n    }, [])\n","import { dimensionGetItems } from './dimensionGetItems'\n\nexport const axisGetAllItems = axis =>\n    axis.reduce((allItems, dimension) => {\n        allItems.push(...dimensionGetItems(dimension))\n        return allItems\n    }, [])\n","import { layoutGetAllAxes } from './layoutGetAllAxes'\nimport { axisGetAllItems } from './axisGetAllItems'\n\nexport const layoutGetAllItems = layout =>\n    layoutGetAllAxes(layout).reduce((allItems, axis) => {\n        allItems.push(...axisGetAllItems(axis))\n        return allItems\n    }, [])\n","import isObject from 'lodash/isObject'\nimport isString from 'lodash/isString'\n\n// Item\n\nexport const ITEM = {\n    isValid: item => isObject(item),\n}\n\n// Props\n\nexport const ITEM_PROP_ID = {\n    name: 'id',\n    defaultValue: '',\n    required: true,\n    isValid: prop => isString(prop),\n}\n\nexport const ITEM_PROPS = [ITEM_PROP_ID]\n","import { ITEM_PROP_ID } from './item'\n\nexport const itemGetId = item =>\n    ITEM_PROP_ID.isValid(item[ITEM_PROP_ID.name])\n        ? item[ITEM_PROP_ID.name]\n        : ITEM_PROP_ID.defaultValue\n","import { layoutGetAllItems } from './layoutGetAllItems'\nimport { itemGetId } from './itemGetId'\n\nexport const layoutGetAllItemIds = layout =>\n    layoutGetAllItems(layout).map(item => itemGetId(item))\n","import { AXIS } from './axis'\nimport { dimensionGetId } from './dimensionGetId'\n\nexport const axisGetDimensionIds = axis =>\n    AXIS.isValid(axis)\n        ? axis.map(dimension => dimensionGetId(dimension))\n        : AXIS.defaultValue\n","import { AXIS, DEFAULT_AXIS_IDS } from './axis'\nimport { axisGetDimensionIds } from './axisGetDimensionIds'\n\nexport const layoutGetAxisIdDimensionIdsObject = layout =>\n    DEFAULT_AXIS_IDS.reduce((obj, axisId) => {\n        if (AXIS.isValid(layout[axisId])) {\n            obj[axisId] = axisGetDimensionIds(layout[axisId])\n        }\n\n        return obj\n    }, {})\n","import { layoutGetAllDimensions } from './layoutGetAllDimensions'\nimport { dimensionIs } from './dimensionIs'\n\nexport const layoutGetDimension = (layout, dimensionId) =>\n    layoutGetAllDimensions(layout).find(dimension =>\n        dimensionIs(dimension, dimensionId)\n    )\n","import { layoutGetDimension } from './layoutGetDimension'\nimport { dimensionGetItems } from './dimensionGetItems'\n\nexport const layoutGetDimensionItems = (layout, dimensionId) =>\n    dimensionGetItems(layoutGetDimension(layout, dimensionId))\n","import { dimensionIs } from './dimensionIs'\nimport { AXIS } from './axis'\n\nexport const axisGetDimension = (axis, dimensionId) =>\n    AXIS.isValid(axis) &&\n    axis.find(dimension => dimensionIs(dimension, dimensionId))\n","import { axisGetDimension } from './axisGetDimension'\n\nexport const axisHasDimension = (axis, dimensionId) =>\n    Boolean(axisGetDimension(axis, dimensionId))\n","import { DEFAULT_AXIS_IDS } from './axis'\nimport { axisHasDimension } from './axisHasDimension'\nimport { dimensionIs } from './dimensionIs'\n\nexport const layoutReplaceDimension = (layout, dimensionId, items) => {\n    const axisId = DEFAULT_AXIS_IDS.find(a =>\n        axisHasDimension(layout[a], dimensionId)\n    )\n\n    if (!axisId) {\n        return Object.assign({}, layout)\n    }\n\n    const newAxisDimensions = layout[axisId].map(dimension => {\n        if (dimensionIs(dimension, dimensionId)) {\n            return Object.assign({}, dimension, { items })\n        }\n        return dimension\n    })\n\n    return Object.assign({}, layout, { [axisId]: newAxisDimensions })\n}\n","import { dimensionGetItems } from './dimensionGetItems'\nimport { itemGetId } from './itemGetId'\n\nexport const dimensionGetItemIds = dimension =>\n    dimensionGetItems(dimension).map(item => itemGetId(item))\n","import { layoutGetAllDimensions } from './layoutGetAllDimensions'\nimport { dimensionGetItemIds } from './dimensionGetItemIds'\nimport { dimensionGetId } from './dimensionGetId'\n\nexport const layoutGetDimensionIdItemIdsObject = layout =>\n    layoutGetAllDimensions(layout).reduce((obj, dimension) => {\n        obj[dimensionGetId(dimension)] = dimensionGetItemIds(dimension)\n        return obj\n    }, {})\n","import { DIMENSION_ID_DATA } from '../predefinedDimensions'\nimport { axisHasDimension } from './axisHasDimension'\n\nexport const axisHasDataDimension = axis =>\n    axisHasDimension(axis, DIMENSION_ID_DATA)\n","import { layoutGetAllAxes } from './layoutGetAllAxes'\nimport { axisHasDataDimension } from './axisHasDataDimension'\n\nexport const layoutHasDataDimension = layout =>\n    Boolean(layoutGetAllAxes(layout).find(axis => axisHasDataDimension(axis)))\n","import { layoutGetDimension } from './layoutGetDimension'\n\nexport const layoutHasDimension = (layout, dimensionId) =>\n    Boolean(layoutGetDimension(layout, dimensionId))\n","import { layoutGetAllDimensions } from './layoutGetAllDimensions'\nimport { dimensionGetId } from './dimensionGetId'\nimport { getPredefinedDimensions } from '../predefinedDimensions'\n\nexport const layoutHasDynamicDimension = layout => {\n    const fixedIds = Object.keys(getPredefinedDimensions())\n\n    return Boolean(\n        layoutGetAllDimensions(layout).find(\n            dimension => !fixedIds.includes(dimensionGetId(dimension))\n        )\n    )\n}\n","import { DIMENSION_ID_PERIOD } from '../predefinedDimensions'\nimport { axisHasDimension } from './axisHasDimension'\n\nexport const axisHasPeriodDimension = axis =>\n    axisHasDimension(axis, DIMENSION_ID_PERIOD)\n","import { layoutGetAllAxes } from './layoutGetAllAxes'\nimport { axisHasPeriodDimension } from './axisHasPeriodDimension'\n\nexport const layoutHasPeriodDimension = layout =>\n    Boolean(layoutGetAllAxes(layout).find(axis => axisHasPeriodDimension(axis)))\n","import { DIMENSION_ID_ORGUNIT } from '../predefinedDimensions'\nimport { axisHasDimension } from './axisHasDimension'\n\nexport const axisHasOuDimension = axis =>\n    axisHasDimension(axis, DIMENSION_ID_ORGUNIT)\n","export const axisIsEmpty = axis => !axis.length\n","import { DIMENSION_PROP_ID, DIMENSION_PROP_ITEMS } from './dimension'\n\nexport const dimensionCreate = (dimensionId, itemIds = []) => ({\n    [DIMENSION_PROP_ID.name]: dimensionId,\n    [DIMENSION_PROP_ITEMS.name]: itemIds.map(id => ({ id })),\n})\n","import { ITEM, ITEM_PROPS } from './item'\n\nexport const itemIsValid = item => {\n    if (!ITEM.isValid(item)) {\n        return false\n    }\n\n    const requiredProps = ITEM_PROPS.filter(prop => prop.required)\n\n    return requiredProps.every(prop => prop.isValid(item[prop.name]))\n}\n","import isArray from 'd2-utilizr/lib/isArray'\nimport isObject from 'd2-utilizr/lib/isObject'\nimport isString from 'd2-utilizr/lib/isString'\n\nconst MODULE = 'Data validator: '\n\nfunction getMessage(text) {\n    return MODULE + text\n}\n\nfunction validateHeader(header, error) {\n    if (!isObject(header)) {\n        error(getMessage('Header is not an object'))\n    }\n\n    if (header.meta) {\n        if (!isString(header.name)) {\n            error(getMessage('Header name is not a string'))\n        }\n    }\n}\n\nfunction validateRowValue(rowValue, error) {\n    if (!isString(rowValue)) {\n        error(getMessage('Row value is not a string'))\n    }\n}\n\nfunction validateRow(row, headersLength, error) {\n    if (!isArray(row)) {\n        error(getMessage('Data row is not an array'))\n    }\n\n    if (row.length !== headersLength) {\n        error(getMessage('Data row length is invalid'))\n    }\n\n    row.forEach(rowValue => validateRowValue(rowValue, error))\n}\n\nexport default function({ data, error, warning }) {\n    if (!isObject(data)) {\n        error(getMessage('Data is not an object'))\n    }\n\n    // headers\n\n    if (!isArray(data.headers)) {\n        error(getMessage('Response headers is not an array'))\n    }\n\n    if (!data.headers.length > 1) {\n        error(getMessage('At least two response headers required'))\n    }\n\n    data.headers.forEach(header => validateHeader(header, error))\n\n    // meta data\n\n    if (!isObject(data.metaData)) {\n        error(getMessage('Metadata is not an object'))\n    }\n\n    if (!isObject(data.metaData.items)) {\n        error(getMessage('Metadata items is not an object'))\n    }\n\n    if (!isObject(data.metaData.dimensions)) {\n        error(getMessage('Metadata dimensions is not an object'))\n    }\n\n    // data\n\n    if (!isArray(data.rows)) {\n        warning(getMessage('Data rows is not an array'))\n    }\n\n    if (!data.rows.length) {\n        warning(getMessage('No data rows provided'))\n    }\n\n    data.rows.forEach(row => validateRow(row, data.headers.length, error))\n\n    return data\n}\n","import dhis from './dhis'\n\nconst noValidation = data => data\n\nexport default {\n    dhis,\n    noValidation,\n}\n","export default function(acc, seriesIds, categoryIds, idValueMap, metaData) {\n    const serieData = []\n    let serieLabel\n\n    seriesIds.forEach(seriesId => {\n        serieLabel = metaData.items[seriesId].name\n\n        categoryIds.forEach(categoryId => {\n            const value = idValueMap.get(`${seriesId}-${categoryId}`)\n\n            // DHIS2-1261: 0 is a valid value\n            // undefined value means the key was not found within the rows\n            // in that case null is returned as value in the serie for highcharts\n            serieData.push(value === undefined ? null : parseFloat(value))\n        })\n    })\n\n    acc.push({\n        name: serieLabel,\n        data: serieData,\n    })\n\n    return acc\n}\n","export default function(acc, seriesIds, categoryIds, idValueMap, metaData) {\n    seriesIds.forEach(seriesId => {\n        const value = idValueMap.get(seriesId)\n\n        if (value) {\n            acc.push({\n                name: metaData.items[seriesId].name,\n                y: parseFloat(value),\n            })\n        }\n    })\n}","export default function(acc, seriesIds, categoryIds, idValueMap) {\n    const seriesId = seriesIds[0]\n\n    acc.push({\n        data: [parseFloat(idValueMap.get(seriesId))],\n    })\n}\n","import arrayContains from 'd2-utilizr/lib/arrayContains'\nimport arrayUnique from 'd2-utilizr/lib/arrayUnique'\n\nimport getYearOnYear from './yearOnYear'\nimport getPie from './pie'\nimport getGauge from './gauge'\nimport {\n    VIS_TYPE_YEAR_OVER_YEAR_COLUMN,\n    VIS_TYPE_YEAR_OVER_YEAR_LINE,\n    VIS_TYPE_PIE,\n    VIS_TYPE_GAUGE,\n } from '../../../../modules/visTypes'\n\nconst VALUE_ID = 'value'\n\nfunction arrayNullsOnly(array) {\n    return arrayContains(array, null) && arrayUnique(array).length === 1\n}\n\nfunction getHeaderIdIndexMap(headers) {\n    const map = new Map()\n\n    headers.forEach((header, index) => {\n        map.set(header.name, index)\n    })\n\n    return map\n}\n\nfunction getPrefixedId(row, header) {\n    return (header.isPrefix ? header.name + '_' : '') + row[header.index]\n}\n\nfunction getIdValueMap(rows, seriesHeader, categoryHeader, valueIndex) {\n    const map = new Map()\n\n    let key\n    let value\n\n    rows.forEach(row => {\n        key = [\n            ...(seriesHeader ? [getPrefixedId(row, seriesHeader)] : []),\n            ...(categoryHeader ? [getPrefixedId(row, categoryHeader)] : []),\n        ].join('-')\n\n        value = row[valueIndex]\n\n        map.set(key, value)\n    })\n\n    return map\n}\n\nfunction getDefault(acc, seriesIds, categoryIds, idValueMap, metaData) {\n    seriesIds.forEach(seriesId => {\n        const serieData = []\n\n        categoryIds.forEach(categoryId => {\n            const value = idValueMap.get(`${seriesId}-${categoryId}`)\n\n            // DHIS2-1261: 0 is a valid value\n            // undefined value means the key was not found within the rows\n            // in that case null is returned as value in the serie\n            // this is to keep the correct indexes for the values within the serie array\n            serieData.push(value === undefined ? null : parseFloat(value))\n        })\n\n        // if the whole serie has no data, do not return a list of null values\n        // otherwise Highcharts thinks that data is available and does not show the \"No data to display\" message\n        if (arrayNullsOnly(serieData)) {\n            serieData.length = 0\n        }\n\n        acc.push({\n            id: seriesId,\n            name: metaData.items[seriesId].name,\n            data: serieData,\n        })\n    })\n\n    return acc\n}\n\nfunction getSeriesFunction(type) {\n    switch (type) {\n        case VIS_TYPE_PIE:\n            return getPie\n        case VIS_TYPE_GAUGE:\n            return getGauge\n        case VIS_TYPE_YEAR_OVER_YEAR_COLUMN:\n        case VIS_TYPE_YEAR_OVER_YEAR_LINE:\n            return getYearOnYear\n        default:\n            return getDefault\n    }\n}\n\nexport default function({ type, data, seriesId, categoryId }) {\n    const seriesFunction = getSeriesFunction(type)\n\n    return data.reduce((acc, res) => {\n        const headers = res.headers\n        const metaData = res.metaData\n        const rows = res.rows\n        const headerIdIndexMap = getHeaderIdIndexMap(headers)\n\n        const seriesIndex = headerIdIndexMap.get(seriesId)\n        const categoryIndex = headerIdIndexMap.get(categoryId)\n        const valueIndex = headerIdIndexMap.get(VALUE_ID)\n\n        const seriesHeader = headers[seriesIndex]\n        const categoryHeader = headers[categoryIndex]\n\n        const idValueMap = getIdValueMap(\n            rows,\n            seriesHeader,\n            categoryHeader,\n            valueIndex\n        )\n\n        const seriesIds = metaData.dimensions[seriesId]\n        const categoryIds = metaData.dimensions[categoryId]\n\n        seriesFunction(acc, seriesIds, categoryIds, idValueMap, metaData)\n\n        return acc\n    }, [])\n}\n","export default function(acc, seriesIds, categoryIds, idValueMap) {\n    const seriesId = seriesIds[0]\n\n    acc.push(idValueMap.get(seriesId))\n}\n","import getSingleValue from './singleValue'\nimport { VIS_TYPE_SINGLE_VALUE } from '../../../../modules/visTypes'\n\nconst VALUE_ID = 'value'\n\nfunction getHeaderIdIndexMap(headers) {\n    const map = new Map()\n\n    headers.forEach((header, index) => {\n        map.set(header.name, index)\n    })\n\n    return map\n}\n\nfunction getPrefixedId(row, header) {\n    return (header.isPrefix ? header.name + '_' : '') + row[header.index]\n}\n\nfunction getIdValueMap(rows, seriesHeader, categoryHeader, valueIndex) {\n    const map = new Map()\n\n    let key\n    let value\n\n    rows.forEach(row => {\n        key = [\n            ...(seriesHeader ? [getPrefixedId(row, seriesHeader)] : []),\n            ...(categoryHeader ? [getPrefixedId(row, categoryHeader)] : []),\n        ].join('-')\n\n        value = row[valueIndex]\n\n        map.set(key, value)\n    })\n\n    return map\n}\n\nfunction getDefault(acc, seriesIds, categoryIds, idValueMap, metaData) {\n    seriesIds.forEach(seriesId => {\n        const serieData = []\n\n        categoryIds.forEach(categoryId => {\n            const value = idValueMap.get(`${seriesId}-${categoryId}`)\n\n            // DHIS2-1261: 0 is a valid value\n            // undefined value means the key was not found within the rows\n            // in that case null is returned as value in the serie\n            serieData.push(value === undefined ? null : parseFloat(value))\n        })\n\n        acc.push({\n            id: seriesId,\n            name: metaData.items[seriesId].name,\n            data: serieData,\n        })\n    })\n\n    return acc\n}\n\nfunction getValueFunction(type) {\n    switch (type) {\n        case VIS_TYPE_SINGLE_VALUE:\n            return getSingleValue\n        default:\n            return getDefault\n    }\n}\n\nexport default function({ type, data, seriesId, categoryId }) {\n    const valueFunction = getValueFunction(type)\n\n    return data.reduce((acc, res) => {\n        const headers = res.headers\n        const metaData = res.metaData\n        const rows = res.rows\n        const headerIdIndexMap = getHeaderIdIndexMap(headers)\n\n        const seriesIndex = headerIdIndexMap.get(seriesId)\n        const categoryIndex = headerIdIndexMap.get(categoryId)\n        const valueIndex = headerIdIndexMap.get(VALUE_ID)\n\n        const seriesHeader = headers[seriesIndex]\n        const categoryHeader = headers[categoryIndex]\n\n        const idValueMap = getIdValueMap(\n            rows,\n            seriesHeader,\n            categoryHeader,\n            valueIndex\n        )\n\n        const seriesIds = metaData.dimensions[seriesId]\n        const categoryIds = metaData.dimensions[categoryId]\n\n        valueFunction(acc, seriesIds, categoryIds, idValueMap, metaData)\n\n        return acc\n    }, [])\n}\n","import dhis_highcharts from './dhis_highcharts'\nimport dhis_dhis from './dhis_dhis'\n\nexport default {\n    dhis_highcharts,\n    dhis_dhis,\n}\n","import validators from './validators'\nimport adapters from './adapters'\n\nexport default function({\n    data,\n    inputFormat = 'dhis',\n    outputFormat = 'highcharts',\n    seriesId: initialSeriesId,\n    categoryId: initialCategoryId,\n    error,\n    warning,\n}) {\n    const _validator = validators[inputFormat] || validators.noValidation\n    const _adapter = adapters[inputFormat + '_' + outputFormat]\n\n    if (_validator === validators.noValidation) {\n        warning(\n            `Validation not supported for data input format \"${inputFormat}\"`\n        )\n    }\n\n    if (!_adapter) {\n        error(\n            `Data tranformation from \"${inputFormat}\" to \"${outputFormat}\" is not supported`\n        )\n    }\n\n    this.data = data\n\n    this.generateData = ({\n        type,\n        seriesId = initialSeriesId,\n        categoryId = initialCategoryId,\n    }) => {\n        return _adapter({\n            type,\n            data: data.map(d => _validator({ data: d, error, warning })),\n            seriesId,\n            categoryId,\n        })\n    }\n}\n","export default function({ layout }) {\n    return layout\n}\n","import dhis from './dhis'\n\nconst noValidation = data => data\n\nexport default {\n    dhis,\n    noValidation,\n}\n","import {\n    VIS_TYPE_BAR,\n    VIS_TYPE_STACKED_BAR,\n    VIS_TYPE_LINE,\n    VIS_TYPE_YEAR_OVER_YEAR_LINE,\n    VIS_TYPE_AREA,\n    VIS_TYPE_PIE,\n    VIS_TYPE_RADAR,\n    VIS_TYPE_GAUGE,\n    VIS_TYPE_COLUMN,\n    VIS_TYPE_STACKED_COLUMN,\n    VIS_TYPE_YEAR_OVER_YEAR_COLUMN,\n} from '../../../../modules/visTypes'\n\nexport default function(type) {\n    switch (type) {\n        case VIS_TYPE_BAR:\n        case VIS_TYPE_STACKED_BAR:\n            return { type: 'bar' }\n        case VIS_TYPE_LINE:\n        case VIS_TYPE_YEAR_OVER_YEAR_LINE:\n            return { type: 'line' }\n        case VIS_TYPE_AREA:\n            return { type: 'area' }\n        case VIS_TYPE_PIE:\n            return { type: 'pie' }\n        case VIS_TYPE_RADAR:\n            return { type: 'line', polar: true }\n        case VIS_TYPE_GAUGE:\n            return { type: 'solidgauge' }\n        case VIS_TYPE_COLUMN:\n        case VIS_TYPE_STACKED_COLUMN:\n        case VIS_TYPE_YEAR_OVER_YEAR_COLUMN:\n        default:\n            return { type: 'column' }\n    }\n}\n","import getType from './type'\n\nconst DEFAULT_CHART = {\n    spacingTop: 20,\n    style: {\n        fontFamily: 'Roboto,Helvetica Neue,Helvetica,Arial,sans-serif',\n    },\n}\n\nconst DASHBOARD_CHART = {\n    spacingTop: 0,\n    spacingRight: 5,\n    spacingBottom: 2,\n    spacingLeft: 5,\n}\n\nexport default function(layout, el, dashboard) {\n    return Object.assign(\n        {},\n        getType(layout.type),\n        { renderTo: el || layout.el },\n        DEFAULT_CHART,\n        dashboard ? DASHBOARD_CHART : undefined\n    )\n}\n","import isString from 'd2-utilizr/lib/isString'\n\nconst DEFAULT_AXIS_TITLE = {\n    align: 'low',\n    margin: 15,\n    style: {\n        color: '#222',\n        textShadow: '0 0 #999',\n        fontSize: '13px',\n    },\n}\n\nexport default function(title) {\n    return isString(title)\n        ? Object.assign({}, DEFAULT_AXIS_TITLE, {\n              text: title,\n          })\n        : {\n              text: null,\n          }\n}\n","import isArray from 'd2-utilizr/lib/isArray'\n\nexport default function(metaData, layout) {\n    const dimensionName = layout.rows[0].dimension\n\n    const dimensionIds = isArray(metaData.dimensions[dimensionName])\n        ? metaData.dimensions[dimensionName]\n        : []\n\n    return dimensionIds.map(id => metaData.items[id].name)\n}\n","export default function(store, layout, extraOptions) {\n    let categories\n\n    if (extraOptions.xAxisLabels) {\n        categories = extraOptions.xAxisLabels\n    } else {\n        // look for the response with the longer list of periods.\n        // in some cases (ie. weeks per year) responses might have a different number of periods in metadata\n        const res = store.data.reduce((out, r) => {\n            if (out) {\n                if (\n                    r.metaData.dimensions.pe.length >\n                    out.metaData.dimensions.pe.length\n                ) {\n                    out = r\n                }\n            } else {\n                out = r\n            }\n\n            return out\n        }, {})\n\n        const metaData = res.metaData\n\n        categories = metaData.dimensions.pe.reduce((categories, periodId) => {\n            // TODO use shortName or pass extra option to the request for getting short names in name prop\n            categories.push(metaData.items[periodId].name)\n            return categories\n        }, [])\n    }\n\n    return {\n        categories,\n    }\n}\n","import objectClean from 'd2-utilizr/lib/objectClean'\nimport getAxisTitle from '../getAxisTitle'\nimport getCategories from '../getCategories'\nimport getYearOnYear from './yearOnYear'\nimport {\n    VIS_TYPE_GAUGE,\n    VIS_TYPE_YEAR_OVER_YEAR_LINE,\n    VIS_TYPE_YEAR_OVER_YEAR_COLUMN,\n    VIS_TYPE_PIE,\n} from '../../../../../modules/visTypes'\n\nfunction noAxis() {\n    return null\n}\n\nfunction getDefault(store, layout) {\n    return objectClean({\n        categories: getCategories(store.data[0].metaData, layout),\n        title: getAxisTitle(layout.domainAxisLabel),\n        labels: {\n            style: {\n                color: '#666',\n                textShadow: '0 0 #ccc',\n            },\n        },\n    })\n}\n\nexport default function(store, layout, extraOptions) {\n    let xAxis\n\n    switch (layout.type) {\n        case VIS_TYPE_PIE:\n        case VIS_TYPE_GAUGE:\n            xAxis = noAxis()\n            break\n        case VIS_TYPE_YEAR_OVER_YEAR_LINE:\n        case VIS_TYPE_YEAR_OVER_YEAR_COLUMN:\n            xAxis = getYearOnYear(store, layout, extraOptions)\n            break\n        default:\n            xAxis = getDefault(store, layout)\n    }\n\n    return xAxis\n}\n","import arrayClean from 'd2-utilizr/lib/arrayClean'\nimport isNumber from 'd2-utilizr/lib/isNumber'\nimport objectClean from 'd2-utilizr/lib/objectClean'\nimport i18n from '@dhis2/d2-i18n'\nimport { getColorByValueFromLegendSet, LEGEND_DISPLAY_STYLE_FILL } from '../../../../../modules/legends'\n\nconst DEFAULT_MAX_VALUE = 100\n\nconst DEFAULT_PLOT_LINE_STYLE = {\n    zIndex: 5,\n    width: 1,\n    color: '#000',\n}\n\nconst DEFAULT_TARGET_LINE_LABEL = i18n.t('Target')\nconst DEFAULT_BASE_LINE_LABEL = i18n.t('Base')\n\nfunction getPlotLine(value, label) {\n    return {\n        value,\n        ...DEFAULT_PLOT_LINE_STYLE,\n        ...(label && {\n            label: {\n                text: `${label}: ${value}`,\n            }\n        })\n    }\n}\n\nexport default function(layout, series, legendSet) {\n    const plotLines = arrayClean([\n        isNumber(layout.baseLineValue) ? getPlotLine(layout.baseLineValue, layout.baseLineLabel || DEFAULT_BASE_LINE_LABEL) : null,\n        isNumber(layout.targetLineValue) ? getPlotLine(layout.targetLineValue, layout.targetLineLabel || DEFAULT_TARGET_LINE_LABEL) : null\n    ])\n    const fillColor = (layout.legendDisplayStyle === LEGEND_DISPLAY_STYLE_FILL && legendSet) ? getColorByValueFromLegendSet(legendSet, series[0].data) : undefined\n    return objectClean({\n        min: isNumber(layout.rangeAxisMinValue) ? layout.rangeAxisMinValue : 0,\n        max: isNumber(layout.rangeAxisMaxValue) ? layout.rangeAxisMaxValue : DEFAULT_MAX_VALUE,\n        lineWidth: 0,\n        minorTickInterval: null,\n        tickLength: 0,\n        tickAmount: 0,\n        tickPositioner: function() {\n            return [this.min, this.max];\n        }, \n        minColor: fillColor,\n        maxColor: fillColor,\n        labels: {\n            y: 18,\n            style: {\n                fontSize: '13px',\n            },\n        },\n        title: {\n            text: series[0].name,\n        },\n        ...(plotLines.length && {\n            plotLines\n        })\n    })\n}\n","export const OPTIONAL_AXES_DIMENSIONAL_ITEM = 'dimensionalItem'\nexport const OPTIONAL_AXES_AXIS = 'axis'\n\n// returns:\n// {\n//     a: 1,\n//     b: 1,\n// }\nexport function getIdAxisMap(optionalAxes) {\n    return optionalAxes.reduce((map, item) => {\n        map[item[OPTIONAL_AXES_DIMENSIONAL_ITEM]] = item[OPTIONAL_AXES_AXIS]\n        return map\n    }, {})\n}\n\nexport function getFullIdAxisMap(optionalAxes, series) {\n    const idAxisMap = getIdAxisMap(optionalAxes)\n\n    // adds first axis ids to seriesAxisMap\n    series.forEach(s => {\n        if (!(s.id in idAxisMap)) {\n            idAxisMap[s.id] = 0\n        }\n    })\n\n    return idAxisMap\n}\n\n// returns: true or false\nexport function hasOptionalAxis(optionalAxes) {\n    return Boolean(optionalAxes.length)\n}\n\n// returns: true or false\nexport function hasOptionalAxisItems(optionalAxes, columns) {\n    const axisIds = Object.keys(getIdAxisMap(optionalAxes))\n    const seriesIds = columns.reduce((all, dim) => {\n        all.push(...dim.items.map(item => item.id))\n        return all\n    }, [])\n\n    return axisIds.find(id => seriesIds.includes(id))\n}\n\n// returns:\n// {\n//     0: ['a', 'b'],\n//     1: ['c'],\n// }\nexport function getAxisIdsMap(optionalAxes, series) {\n    const fullIdAxisMap = getFullIdAxisMap(optionalAxes, series)\n\n    return Object.entries(fullIdAxisMap).reduce((map, [id, axis]) => {\n        if (!(axis in map)) {\n            map[axis] = []\n        }\n\n        map[axis].push(id)\n        return map\n    }, {})\n}\n","import arrayClean from 'd2-utilizr/lib/arrayClean'\nimport objectClean from 'd2-utilizr/lib/objectClean'\nimport isNumeric from 'd2-utilizr/lib/isNumeric'\nimport isString from 'd2-utilizr/lib/isString'\nimport getAxisTitle from '../getAxisTitle'\nimport getGauge from './gauge'\nimport { isStacked, VIS_TYPE_GAUGE } from '../../../../../modules/visTypes'\nimport { hasOptionalAxis } from '../optionalAxes'\n\nconst DEFAULT_MIN_VALUE = 0\n\nconst DEFAULT_GRIDLINE_COLOR = '#E1E1E1'\n\nconst DEFAULT_PLOTLINE = {\n    color: '#000',\n    width: 2,\n    zIndex: 4,\n}\n\nconst DEFAULT_PLOTLINE_LABEL = {\n    y: -7,\n    style: {\n        fontSize: 13,\n        textShadow: '0 0 6px #FFF',\n    },\n}\n\nfunction getMinValue(layout) {\n    return isNumeric(layout.rangeAxisMinValue)\n        ? layout.rangeAxisMinValue\n        : DEFAULT_MIN_VALUE\n}\n\nfunction getMaxValue(layout) {\n    return isNumeric(layout.rangeAxisMaxValue)\n        ? layout.rangeAxisMaxValue\n        : undefined\n}\n\nfunction getSteps(layout) {\n    return isNumeric(layout.rangeAxisSteps) ? layout.rangeAxisSteps : undefined\n}\n\nfunction getTargetLine(layout) {\n    return isNumeric(layout.targetLineValue)\n        ? Object.assign(\n              {},\n              DEFAULT_PLOTLINE,\n              objectClean({\n                  value: layout.targetLineValue,\n                  label: isString(layout.targetLineLabel)\n                      ? Object.assign({}, DEFAULT_PLOTLINE_LABEL, {\n                            text: layout.targetLineLabel,\n                        })\n                      : undefined,\n              })\n          )\n        : undefined\n}\n\nfunction getBaseLine(layout) {\n    return isNumeric(layout.baseLineValue)\n        ? Object.assign(\n              {},\n              DEFAULT_PLOTLINE,\n              objectClean({\n                  value: layout.baseLineValue,\n                  label: isString(layout.baseLineLabel)\n                      ? Object.assign({}, DEFAULT_PLOTLINE_LABEL, {\n                            text: layout.baseLineLabel,\n                        })\n                      : undefined,\n              })\n          )\n        : undefined\n}\n\nfunction getFormatter(layout) {\n    return {\n        formatter: function() {\n            return this.value.toFixed(layout.rangeAxisDecimals)\n        },\n    }\n}\n\nfunction getLabels(layout) {\n    return isNumeric(layout.rangeAxisDecimals)\n        ? getFormatter(layout)\n        : undefined\n}\n\nfunction getDualAxes(theme) {\n    return [\n        {\n            title: {\n                text: 'Axis 1',\n                style: {\n                    color: theme[0].mainColor,\n                    'font-weight': 700,\n                },\n            },\n        },\n        {\n            title: {\n                text: 'Axis 2',\n                style: {\n                    color: theme[1].mainColor,\n                    'font-weight': 700,\n                },\n            },\n            opposite: true,\n        },\n    ]\n}\n\nfunction getDefault(layout, extraOptions) {\n    const axes = []\n\n    if (hasOptionalAxis(layout.optionalAxes)) {\n        const dualAxes = getDualAxes(extraOptions.multiAxisTheme)\n        axes.push(dualAxes[0], dualAxes[1])\n    } else {\n        axes.push(\n            objectClean({\n                min: getMinValue(layout),\n                max: getMaxValue(layout),\n                tickAmount: getSteps(layout),\n                title: getAxisTitle(layout.rangeAxisLabel),\n                plotLines: arrayClean([\n                    getTargetLine(layout),\n                    getBaseLine(layout),\n                ]),\n                gridLineColor: DEFAULT_GRIDLINE_COLOR,\n                labels: getLabels(layout),\n\n                // DHIS2-649: put first serie at the bottom of the stack\n                // in this way the legend sequence matches the serie sequence\n                reversedStacks: isStacked(layout.type) ? false : true,\n            })\n        )\n    }\n\n    return axes\n}\n\nexport default function(layout, series, extraOptions) {\n    let yAxis\n    switch (layout.type) {\n        case VIS_TYPE_GAUGE:\n            yAxis = getGauge(layout, series, extraOptions.legendSets[0])\n            break\n        default:\n            yAxis = getDefault(layout, extraOptions)\n    }\n\n    return yAxis\n}\n","import numberDecimals from 'd2-utilizr/lib/numberDecimals'\n\nexport default function(series) {\n    let decimals = 0\n    let cumulativeValues = []\n\n    series.forEach(seriesObj => {\n        cumulativeValues = seriesObj.data.reduce(\n            (accumulator, value, index) => {\n                decimals = Math.max(decimals, numberDecimals(value))\n\n                if (index > 0) {\n                    value += accumulator[index - 1]\n                }\n\n                accumulator.push(value)\n\n                return accumulator\n            },\n            []\n        )\n\n        // round values to the largest number of decimals found in the serie\n        // this is to avoid the floating-point problems in JavaScript\n        // the condition in the return statement is because sometimes value can be null\n        seriesObj.data = cumulativeValues.map(value => {\n            return value ? parseFloat(value.toFixed(decimals)) : value\n        })\n\n        decimals = 0\n    })\n\n    return series\n}\n","export default function(series, store, layout, isStacked, colors) {\n    return [\n        {\n            colorByPoint: true,\n            allowPointSelect: true,\n            cursor: 'pointer',\n            data: series,\n            colors: colors,\n            dataLabels: {\n                enabled: true,\n                formatter: function() {\n                    return (\n                        '<span style=\"font-weight:normal\">' +\n                        this.point.name +\n                        '</span><br/>' +\n                        this.y +\n                        '<span style=\"font-weight:normal\"> (' +\n                        this.percentage.toFixed(1) +\n                        ' %)</span>'\n                    )\n                },\n            },\n            tooltip: {\n                headerFormat: '',\n                pointFormat:\n                    '<span style=\"color:{point.color}\">\\u25CF</span> {point.name}: <b>{point.y}</b><br/>',\n            },\n        },\n    ]\n}\n","import {\n    getColorByValueFromLegendSet,\n    LEGEND_DISPLAY_STYLE_TEXT,\n} from '../../../../../modules/legends'\n\nconst DEFAULT_FONT_SIZE = '28px'\n\nexport default function(series, layout, legendSet) {\n    return [\n        {\n            name: series[0].name,\n            data: series[0].data,\n            enableMouseTracking: false,\n            dataLabels: {\n                y: 0,\n                borderWidth: 0,\n                verticalAlign: 'bottom',\n                style: {\n                    fontSize: DEFAULT_FONT_SIZE,\n                    color:\n                        layout.legendDisplayStyle ===\n                            LEGEND_DISPLAY_STYLE_TEXT && legendSet\n                            ? getColorByValueFromLegendSet(\n                                  legendSet,\n                                  series[0].data\n                              )\n                            : undefined,\n                },\n            },\n        },\n    ]\n}\n","function hex(c) {\n    var s = '0123456789abcdef'\n    var i = parseInt(c)\n    if (i === 0 || isNaN(c)) {\n        return '00'\n    }\n    i = Math.round(Math.min(Math.max(0, i), 255))\n    return s.charAt((i - (i % 16)) / 16) + s.charAt(i % 16)\n}\n\n/* Convert an RGB triplet to a hex string */\nfunction convertToHex(rgb) {\n    return hex(rgb[0]) + hex(rgb[1]) + hex(rgb[2])\n}\n\n/* Remove '#' in color hex string */\nfunction trim(s) {\n    return s.charAt(0) === '#' ? s.substring(1, 7) : s\n}\n\n/* Convert a hex string to an RGB triplet */\nfunction convertToRGB(hex) {\n    var color = []\n    color[0] = parseInt(trim(hex).substring(0, 2), 16)\n    color[1] = parseInt(trim(hex).substring(2, 4), 16)\n    color[2] = parseInt(trim(hex).substring(4, 6), 16)\n    return color\n}\n\nexport function generateColors(colorStart, colorEnd, colorCount, addHash) {\n    // The beginning of your gradient\n    var start = convertToRGB(colorStart)\n\n    // The end of your gradient\n    var end = convertToRGB(colorEnd)\n\n    // The number of colors to compute\n    var len = colorCount\n\n    //Alpha blending amount\n    var alpha = 0.0\n\n    var saida = []\n\n    var i\n\n    for (i = 0; i < len; i++) {\n        var c = []\n        alpha += 1.0 / len\n\n        c[0] = start[0] * alpha + (1 - alpha) * end[0]\n        c[1] = start[1] * alpha + (1 - alpha) * end[1]\n        c[2] = start[2] * alpha + (1 - alpha) * end[2]\n\n        saida.push((addHash ? '#' : '') + convertToHex(c))\n    }\n\n    return saida\n}\n","import getCumulativeData from './../getCumulativeData'\nimport getPie from './pie'\nimport getGauge from './gauge'\nimport getType from '../type'\nimport {\n    getFullIdAxisMap,\n    getAxisIdsMap,\n    hasOptionalAxis,\n} from '../optionalAxes'\nimport { generateColors } from '../../../../util/colors/gradientColorGenerator'\nimport {\n    VIS_TYPE_PIE,\n    VIS_TYPE_GAUGE,\n    isDualAxisType,\n    isYearOverYear,\n} from '../../../../../modules/visTypes'\n\nconst DEFAULT_ANIMATION_DURATION = 200\n\nconst HIGHCHARTS_TYPE_COLUMN = 'column'\nconst HIGHCHARTS_TYPE_BAR = 'bar'\nconst HIGHCHARTS_TYPE_PERCENT = 'percent'\nconst HIGHCHARTS_TYPE_NORMAL = 'normal'\n\nconst epiCurveTypes = [HIGHCHARTS_TYPE_COLUMN, HIGHCHARTS_TYPE_BAR]\n\nfunction getAnimation(option, fallback) {\n    return typeof option === 'number' ? option : fallback\n}\n\nfunction getColor(colors, index) {\n    return colors[index] || getColor(colors, index - colors.length)\n}\n\nfunction getIdColorMap(series, layout, extraOptions) {\n    if (hasOptionalAxis(layout.optionalAxes)) {\n        const axisIdsMap = getAxisIdsMap(layout.optionalAxes, series)\n        const theme = extraOptions.multiAxisTheme\n\n        const colorsByAxis = Object.keys(axisIdsMap).reduce((map, axis) => {\n            const numberOfIds = axisIdsMap[axis].length\n            map[axis] = generateColors(\n                theme[axis].startColor,\n                theme[axis].endColor,\n                numberOfIds,\n                true\n            )\n            return map\n        }, {})\n\n        return Object.keys(colorsByAxis).reduce((map, axis) => {\n            const colors = colorsByAxis[axis]\n            const ids = axisIdsMap[axis]\n\n            ids.forEach((id, index) => {\n                map[id] = colors[index]\n            })\n\n            return map\n        }, {})\n    } else {\n        const colors = extraOptions.colors\n\n        return series.reduce((map, s, index) => {\n            map[s.id] = getColor(colors, index)\n            return map\n        }, {})\n    }\n}\n\nfunction getDefault(series, layout, isStacked, extraOptions) {\n    const fullIdAxisMap = getFullIdAxisMap(layout.optionalAxes, series)\n    const idColorMap = getIdColorMap(series, layout, extraOptions)\n\n    series.forEach((seriesObj, index) => {\n        // show values\n        if (layout.showValues || layout.showData) {\n            seriesObj.dataLabels = {\n                enabled: true,\n            }\n        }\n\n        // stacked\n        if (isStacked) {\n            // DHIS2-1060: stacked charts can optionally be shown as 100% stacked charts\n            seriesObj.stacking =\n                layout.percentStackedValues === true\n                    ? HIGHCHARTS_TYPE_PERCENT\n                    : HIGHCHARTS_TYPE_NORMAL\n        }\n\n        // DHIS2-2101\n        // show bar/column chart as EPI curve (basically remove spacing between bars/columns)\n        if (layout.noSpaceBetweenColumns) {\n            const seriesType = getType(layout.type).type\n\n            if (epiCurveTypes.includes(seriesType)) {\n                seriesObj.pointPadding = 0\n                seriesObj.groupPadding = 0\n            }\n        }\n\n        // color\n        seriesObj.color = isYearOverYear(layout.type)\n            ? extraOptions.colors[index]\n            : idColorMap[seriesObj.id]\n\n        // axis number\n        seriesObj.yAxis = isDualAxisType(layout.type)\n            ? fullIdAxisMap[seriesObj.id]\n            : 0\n\n        // custom names for \"year over year\" series\n        if (extraOptions.yearlySeries) {\n            seriesObj.name = extraOptions.yearlySeries[index]\n        }\n    })\n\n    // DHIS2-701: use cumulative values\n    if (layout.cumulativeValues === true) {\n        series = getCumulativeData(series)\n    }\n\n    return series\n}\n\nexport default function(series, store, layout, isStacked, extraOptions) {\n    switch (layout.type) {\n        case VIS_TYPE_PIE:\n            series = getPie(\n                series,\n                store,\n                layout,\n                isStacked,\n                extraOptions.colors\n            )\n            break\n        case VIS_TYPE_GAUGE:\n            series = getGauge(series, layout, extraOptions.legendSets[0])\n            break\n        default:\n            series = getDefault(series, layout, isStacked, extraOptions)\n    }\n\n    series.forEach(seriesObj => {\n        // animation\n        seriesObj.animation = {\n            duration: getAnimation(\n                extraOptions.animation,\n                DEFAULT_ANIMATION_DURATION\n            ),\n        }\n    })\n\n    return series\n}\n","import getFilterText from '../../../../util/getFilterText'\n\nexport default function(layout, metaData, dashboard) {\n    const titleFragments = []\n\n    if (layout.columns && layout.columns.length && !dashboard) {\n        titleFragments.push(getFilterText(layout.columns, metaData))\n    }\n\n    if (layout.filters && layout.filters.length && !dashboard) {\n        titleFragments.push(getFilterText(layout.filters, metaData))\n    }\n\n    return titleFragments.length ? titleFragments.join(' - ') : null\n}\n","import isString from 'd2-utilizr/lib/isString'\nimport getFilterText from '../../../../util/getFilterText'\nimport {\n    VIS_TYPE_YEAR_OVER_YEAR_LINE,\n    VIS_TYPE_YEAR_OVER_YEAR_COLUMN,\n    VIS_TYPE_GAUGE,\n} from '../../../../../modules/visTypes'\nimport getYearOverYearTitle from './yearOverYear'\n\nconst DEFAULT_TITLE_STYLE = {\n    margin: 30,\n    y: 18,\n    style: {\n        color: '#111',\n        whiteSpace: 'nowrap',\n        overflow: 'hidden',\n        textOverflow: 'ellipsis',\n    },\n}\n\nconst DASHBOARD_TITLE_STYLE = {\n    margin: 15,\n    y: 12,\n    style: {\n        fontSize: '13px',\n        fontWeight: 'bold',\n        whiteSpace: 'nowrap',\n        overflow: 'hidden',\n        textOverflow: 'ellipsis',\n    },\n}\n\nfunction getDefault(layout, metaData, dashboard) {\n    // filters\n    if (layout.filters && !dashboard) {\n        return getFilterText(layout.filters, metaData)\n    }\n\n    return null\n}\n\nexport default function(layout, metaData, dashboard) {\n    const title = {\n        text: undefined,\n    }\n\n    if (layout.hideTitle) {\n        return title\n    }\n\n    if (isString(layout.title) && layout.title.length) {\n        title.text = layout.title\n    } else {\n        switch (layout.type) {\n            case VIS_TYPE_GAUGE:\n            case VIS_TYPE_YEAR_OVER_YEAR_LINE:\n            case VIS_TYPE_YEAR_OVER_YEAR_COLUMN:\n                title.text = getYearOverYearTitle(layout, metaData, dashboard)\n                break\n            default:\n                title.text = getDefault(layout, metaData, dashboard)\n                break\n        }\n    }\n\n    return Object.assign(\n        {},\n        DEFAULT_TITLE_STYLE,\n        dashboard ? DASHBOARD_TITLE_STYLE : undefined,\n        title\n    )\n}\n","import isString from 'd2-utilizr/lib/isString'\nimport getFilterText from '../../../../util/getFilterText'\nimport {\n    VIS_TYPE_YEAR_OVER_YEAR_LINE,\n    VIS_TYPE_YEAR_OVER_YEAR_COLUMN,\n} from '../../../../../modules/visTypes'\nimport getYearOverYearTitle from '../title/yearOverYear'\n\nconst DEFAULT_SUBTITLE = {\n    style: {\n        // DHIS2-578: dynamically truncate subtitle when it's taking more than 1 line\n        whiteSpace: 'nowrap',\n        overflow: 'hidden',\n        textOverflow: 'ellipsis',\n\n        fontSize: '14px',\n        color: '#555',\n        textShadow: '0 0 #999',\n    },\n}\n\nconst DASHBOARD_SUBTITLE = {\n    style: {\n        // DHIS2-578: dynamically truncate subtitle when it's taking more than 1 line\n        whiteSpace: 'nowrap',\n        overflow: 'hidden',\n        textOverflow: 'ellipsis',\n\n        fontSize: '12px',\n    },\n}\n\nfunction getDefault(layout, dashboard, filterTitle) {\n    return {\n        text: dashboard || isString(layout.title) ? filterTitle : undefined,\n    }\n}\n\nexport default function(series, layout, metaData, dashboard) {\n    let subtitle = {\n        text: undefined,\n    }\n\n    if (layout.hideSubtitle) {\n        return null\n    }\n\n    // DHIS2-578: allow for optional custom subtitle\n    if (isString(layout.subtitle)) {\n        subtitle.text = layout.subtitle\n    } else {\n        const filterTitle = getFilterText(layout.filters, metaData)\n\n        switch (layout.type) {\n            case VIS_TYPE_YEAR_OVER_YEAR_LINE:\n            case VIS_TYPE_YEAR_OVER_YEAR_COLUMN:\n                subtitle.text = getYearOverYearTitle(\n                    layout,\n                    metaData,\n                    Boolean(!dashboard)\n                )\n                break\n            default:\n                subtitle = getDefault(layout, dashboard, filterTitle)\n        }\n    }\n\n    return subtitle\n        ? Object.assign(\n              {},\n              DEFAULT_SUBTITLE,\n              dashboard ? DASHBOARD_SUBTITLE : undefined,\n              subtitle\n          )\n        : subtitle\n}\n","const DEFAULT_ITEM_STYLE = {\n    fontSize: '13px',\n    fontWeight: 'normal',\n}\n\nconst DASHBOARD_ITEM_STYLE = {\n    fontSize: '11px',\n    fontWeight: 500,\n}\n\nconst DEFAULT_LEGEND = {\n    symbolWidth: 11,\n    symbolHeight: 11,\n    itemMarginBottom: 2,\n}\n\nconst DASHBOARD_LEGEND = {\n    symbolPadding: 3,\n    itemDistance: 10,\n}\n\nfunction getItemStyle(dashboard) {\n    return {\n        itemStyle: Object.assign(\n            {},\n            DEFAULT_ITEM_STYLE,\n            dashboard ? DASHBOARD_ITEM_STYLE : null\n        ),\n    }\n}\n\nfunction getLegend(dashboard) {\n    return Object.assign(\n        {},\n        DEFAULT_LEGEND,\n        dashboard ? DASHBOARD_LEGEND : null\n    )\n}\n\nexport default function(layout, dashboard) {\n    return layout.hideLegend\n        ? {\n              enabled: false,\n          }\n        : Object.assign({}, getLegend(dashboard), getItemStyle(dashboard))\n}\n","const DEFAULT_PANE_SIZE = '100%'\n\nexport default function() {\n    return {\n        center: ['50%', '85%'],\n        size: DEFAULT_PANE_SIZE,\n        startAngle: -90,\n        endAngle: 90,\n        background: {\n            backgroundColor: '#F1F1F1',\n            innerRadius: '60%',\n            outerRadius: '100%',\n            shape: 'arc',\n        },\n    }\n}\n","import getGauge from './gauge'\nimport { VIS_TYPE_GAUGE } from '../../../../../modules/visTypes'\n\nexport default function(type) {\n    switch (type) {\n        case VIS_TYPE_GAUGE:\n            return getGauge()\n        default:\n            return undefined\n    }\n}\n","export default function() {\n    return {\n        style: {\n            fontSize: '13px',\n            fontWeight: 'normal',\n        },\n    }\n}\n","export default function(series, isZeroAsNull) {\n    return series[0].data\n        .map((value, index) => {\n            return series.reduce((total, obj) => {\n                return total + obj.data[index]\n            }, 0)\n        })\n        .map(value => (isZeroAsNull && value === 0 ? null : value))\n}\n","import arrayPluck from 'd2-utilizr/lib/arrayPluck'\nimport arraySort from 'd2-utilizr/lib/arraySort'\nimport getStackedData from './getStackedData'\n\nconst sortOrderMap = new Map([[-1, 'ASC'], [1, 'DESC']])\n\nfunction getIndexOrder(config, isStacked, direction) {\n    const dataToBeSorted = isStacked\n        ? getStackedData(config.series)\n        : config.series[0].data.slice()\n\n    const dataObjectsToBeSorted = dataToBeSorted.map((value, index) => ({\n        index,\n        value,\n    }))\n\n    arraySort(dataObjectsToBeSorted, direction, 'value')\n\n    return arrayPluck(dataObjectsToBeSorted, 'index')\n}\n\nfunction getSortedConfig(config, isStacked, direction) {\n    const categories = config.xAxis.categories\n    const series = config.series\n    const indexOrder = getIndexOrder(config, isStacked, direction)\n    const sortedConfig = Object.assign({}, config)\n\n    sortedConfig.xAxis.categories = indexOrder.map(index => categories[index])\n    sortedConfig.series = series.map(seriesObj => ({\n        ...seriesObj,\n        data: seriesObj.data.map(\n            (value, index) => seriesObj.data[indexOrder[index]]\n        ),\n    }))\n\n    return sortedConfig\n}\n\nexport default function(config, layout, isStacked) {\n    const direction = sortOrderMap.get(parseInt(layout.sortOrder))\n\n    return getSortedConfig(config, isStacked, direction)\n}\n","import arrayContains from 'd2-utilizr/lib/arrayContains'\nimport arrayUnique from 'd2-utilizr/lib/arrayUnique'\n\nfunction arrayCleanUndefined(array) {\n    return array.filter(item => item !== undefined)\n}\n\nfunction arrayNullsOnly(array) {\n    return arrayContains(array, null) && arrayUnique(array).length === 1\n}\n\nfunction getEmptySeriesIndexes(series) {\n    const emptyIndexes = []\n    let seriesValues\n\n    series[0].data.forEach((value, index) => {\n        seriesValues = []\n\n        series.forEach(seriesObj => {\n            seriesValues.push(seriesObj.data[index])\n        })\n\n        if (arrayNullsOnly(seriesValues)) {\n            emptyIndexes.push(index)\n        }\n    })\n\n    return emptyIndexes\n}\n\nfunction getFirstLastValueIndexes(series) {\n    let firstValueIndex = undefined\n    let lastValueIndex = 0\n    let data\n    let i\n\n    series.forEach(seriesObj => {\n        // make a copy of the array so we can reverse it\n        // without affecting the original\n        data = seriesObj.data.slice()\n\n        i = data.findIndex(value => value !== undefined)\n\n        if (i > -1) {\n            firstValueIndex =\n                firstValueIndex !== undefined ? Math.min(firstValueIndex, i) : i\n        }\n\n        i = data.reverse().findIndex(value => value !== undefined)\n\n        if (i > -1) {\n            lastValueIndex = Math.max(lastValueIndex, data.length - 1 - i)\n        }\n    })\n\n    return { firstValueIndex, lastValueIndex }\n}\n\nfunction cleanData(\n    data,\n    emptySeriesIndexes,\n    firstValueIndex,\n    lastValueIndex,\n    hideEmptyRowItems\n) {\n    let cleanedData\n\n    switch (hideEmptyRowItems) {\n        case 'ALL':\n            cleanedData = arrayCleanUndefined(\n                data.map((value, index) =>\n                    arrayContains(emptySeriesIndexes, index) ? undefined : value\n                )\n            )\n            break\n        case 'BEFORE_FIRST':\n            cleanedData = data.slice(firstValueIndex)\n            break\n        case 'AFTER_LAST':\n            cleanedData = data.slice(0, lastValueIndex + 1)\n            break\n        case 'BEFORE_FIRST_AFTER_LAST':\n            cleanedData = data.slice(firstValueIndex, lastValueIndex + 1)\n            break\n        default:\n            cleanedData = data\n    }\n\n    return cleanedData\n}\n\nfunction getTrimmedXAxisObject(\n    xAxis,\n    emptySeriesIndexes,\n    firstValueIndex,\n    lastValueIndex,\n    hideEmptyRowItems\n) {\n    return {\n        xAxis: {\n            ...xAxis,\n            categories: cleanData(\n                xAxis.categories,\n                emptySeriesIndexes,\n                firstValueIndex,\n                lastValueIndex,\n                hideEmptyRowItems\n            ),\n        },\n    }\n}\n\nfunction getTrimmedSeriesObject(\n    series,\n    emptySeriesIndexes,\n    firstValueIndex,\n    lastValueIndex,\n    hideEmptyRowItems\n) {\n    return {\n        series: series.map(seriesObj => ({\n            ...seriesObj,\n            data: cleanData(\n                seriesObj.data,\n                emptySeriesIndexes,\n                firstValueIndex,\n                lastValueIndex,\n                hideEmptyRowItems\n            ),\n        })),\n    }\n}\n\nexport default function(config, hideEmptyRowItems) {\n    const emptySeriesIndexes = getEmptySeriesIndexes(config.series)\n\n    const { firstValueIndex, lastValueIndex } = getFirstLastValueIndexes(\n        config.series\n    )\n\n    return emptySeriesIndexes.length && config.xAxis && config.series\n        ? Object.assign(\n              {},\n              config,\n              getTrimmedXAxisObject(\n                  config.xAxis,\n                  emptySeriesIndexes,\n                  firstValueIndex,\n                  lastValueIndex,\n                  hideEmptyRowItems\n              ),\n              getTrimmedSeriesObject(\n                  config.series,\n                  emptySeriesIndexes,\n                  firstValueIndex,\n                  lastValueIndex,\n                  hideEmptyRowItems\n              )\n          )\n        : config\n}\n","import arrayContains from 'd2-utilizr/lib/arrayContains'\nimport { rgb } from 'd3-color'\n\nimport getStackedData from './getStackedData'\nimport { VIS_TYPE_GAUGE, VIS_TYPE_PIE } from '../../../../modules/visTypes'\n\nconst DEFAULT_TRENDLINE = {\n    type: 'spline',\n    name: 'Trend',\n    dashStyle: 'solid',\n    color: '#333',\n    lineWidth: 1,\n    marker: {\n        enabled: false,\n        symbol: 'circle',\n        radius: 2,\n    },\n}\n\nexport const isRegressionIneligible = type =>\n    arrayContains([VIS_TYPE_GAUGE, VIS_TYPE_PIE], type)\n\nexport default function(regressionType, series, isStacked) {\n    const newSeries = []\n\n    if (isStacked) {\n        newSeries.push(\n            ...series,\n            Object.assign(\n                {},\n                getRegressionObj(getStackedData(series), regressionType)\n            )\n        )\n    } else {\n        series.forEach(seriesObj => {\n            newSeries.push(\n                seriesObj,\n                Object.assign(\n                    {},\n                    getRegressionObj(seriesObj.data, regressionType),\n                    {\n                        name: seriesObj.name + ' (trend)',\n                        color: getDarkerColor(seriesObj.color),\n                    }\n                )\n            )\n        })\n    }\n\n    return newSeries\n}\n\nfunction getDarkerColor(color) {\n    return rgb(color)\n        .darker(0.5)\n        .toString()\n}\n\nfunction getRegressionData(data) {\n    return data.map((value, index) => {\n        return [index, value]\n    })\n}\n\nfunction getRegressionObj(data, regressionType) {\n    // LINEAR:\n    // - decimalPlaces (default = 2)\n    // LOESS:\n    // - loessSmooth (default = 25)\n    // POLYNOMIAL:\n    // - order (default = 2)\n    // - extrapolate (default = 0)\n    // - decimalPlaces (default = 2)\n\n    let regression\n    const regressionTypeOptions = {}\n\n    switch (regressionType) {\n        case 'POLYNOMIAL':\n            // polynomial(data, order, extrapolate)\n            regression = polynomial(getRegressionData(data))\n            break\n        case 'LOESS':\n            // loess(data, smoothing)\n            regression = loess(getRegressionData(data), 0.25)\n            break\n        case 'LINEAR':\n        default:\n            // linear(data, decimalPlaces)\n            regression = linear(getRegressionData(data))\n            regressionTypeOptions.type = 'line'\n            break\n    }\n\n    return Object.assign({}, DEFAULT_TRENDLINE, regressionTypeOptions, {\n        data: regression.points,\n    })\n}\n\n// Code extracted from https://github.com/Tom-Alexander/regression-js/\nfunction gaussianElimination(a, o) {\n    let maxrow = 0,\n        tmp = 0\n    const n = a.length - 1,\n        x = new Array(o)\n\n    for (let i = 0; i < n; i++) {\n        maxrow = i\n\n        for (let j = i + 1; j < n; j++) {\n            if (Math.abs(a[i][j]) > Math.abs(a[i][maxrow])) {\n                maxrow = j\n            }\n        }\n\n        for (let k = i; k < n + 1; k++) {\n            tmp = a[k][i]\n            a[k][i] = a[k][maxrow]\n            a[k][maxrow] = tmp\n        }\n\n        for (let j = i + 1; j < n; j++) {\n            for (let k = n; k >= i; k--) {\n                a[k][j] -= (a[k][i] * a[i][j]) / a[i][i]\n            }\n        }\n    }\n\n    for (let j = n - 1; j >= 0; j--) {\n        tmp = 0\n\n        for (let k = j + 1; k < n; k++) {\n            tmp += a[k][j] * x[k]\n        }\n\n        x[j] = (a[n][j] - tmp) / a[j][j]\n    }\n\n    return x\n}\n\n// Code extracted from https://github.com/Tom-Alexander/regression-js/\n// Human readable formulas:\n//\n//              N * Σ(XY) - Σ(X)\n// intercept = ---------------------\n//              N * Σ(X^2) - Σ(X)^2\n//\n// correlation = N * Σ(XY) - Σ(X) * Σ (Y) / √ (  N * Σ(X^2) - Σ(X) ) * ( N * Σ(Y^2) - Σ(Y)^2 ) ) )\nfunction linear(data, decimalPlaces = 2) {\n    const sum = [0, 0, 0, 0, 0],\n        results = []\n    let N = data.length\n\n    for (let n = 0, len = data.length; n < len; n++) {\n        if (data[n]['x'] != null) {\n            data[n][0] = data[n].x\n            data[n][1] = data[n].y\n        }\n        if (data[n][1] != null) {\n            sum[0] += data[n][0] // Σ(X)\n            sum[1] += data[n][1] // Σ(Y)\n            sum[2] += data[n][0] * data[n][0] // Σ(X^2)\n            sum[3] += data[n][0] * data[n][1] // Σ(XY)\n            sum[4] += data[n][1] * data[n][1] // Σ(Y^2)\n        } else {\n            N -= 1\n        }\n    }\n\n    const gradient =\n        (N * sum[3] - sum[0] * sum[1]) / (N * sum[2] - sum[0] * sum[0])\n    const intercept = sum[1] / N - (gradient * sum[0]) / N\n    // let correlation = (N * sum[3] - sum[0] * sum[1]) / Math.sqrt((N * sum[2] - sum[0] * sum[0]) * (N * sum[4] - sum[1] * sum[1]));\n\n    for (let i = 0, len = data.length; i < len; i++) {\n        let coorY = data[i][0] * gradient + intercept\n\n        if (decimalPlaces) {\n            coorY = parseFloat(coorY.toFixed(decimalPlaces))\n        }\n\n        const coordinate = [data[i][0], coorY]\n        results.push(coordinate)\n    }\n\n    results.sort((a, b) => {\n        if (a[0] > b[0]) {\n            return 1\n        }\n        if (a[0] < b[0]) {\n            return -1\n        }\n\n        return 0\n    })\n\n    const string =\n        'y = ' +\n        Math.round(gradient * 100) / 100 +\n        'x + ' +\n        Math.round(intercept * 100) / 100\n\n    return {\n        equation: [gradient, intercept],\n        points: results,\n        string: string,\n    }\n}\n\n// Code extracted from https://github.com/Tom-Alexander/regression-js/\nfunction polynomial(data, order = 2, extrapolate = 0, decimalPlaces = 2) {\n    const lhs = [],\n        rhs = [],\n        results = [],\n        k = order + 1\n    let a = 0,\n        b = 0\n\n    for (let i = 0; i < k; i++) {\n        for (let l = 0, len = data.length; l < len; l++) {\n            if (data[l].x != null) {\n                data[l][0] = data[l].x\n                data[l][1] = data[l].y\n            }\n            if (data[l][1] != null) {\n                a += Math.pow(data[l][0], i) * data[l][1]\n            }\n        }\n\n        lhs.push(a)\n\n        a = 0\n\n        const c = []\n\n        for (let j = 0; j < k; j++) {\n            for (let l = 0, len = data.length; l < len; l++) {\n                if (data[l][1]) {\n                    b += Math.pow(data[l][0], i + j)\n                }\n            }\n\n            c.push(b)\n\n            b = 0\n        }\n\n        rhs.push(c)\n    }\n\n    rhs.push(lhs)\n\n    const equation = gaussianElimination(rhs, k)\n\n    const resultLength = data.length + extrapolate\n    const step = data[data.length - 1][0] - data[data.length - 2][0]\n\n    for (let i = 0, len = resultLength; i < len; i++) {\n        let answer = 0,\n            x = 0\n\n        if (typeof data[i] !== 'undefined') {\n            x = data[i][0]\n        } else {\n            x = data[data.length - 1][0] + (i - data.length) * step\n        }\n\n        for (let w = 0; w < equation.length; w++) {\n            answer += equation[w] * Math.pow(x, w)\n\n            if (decimalPlaces) {\n                answer = parseFloat(answer.toFixed(decimalPlaces))\n            }\n        }\n\n        results.push([x, answer])\n    }\n\n    results.sort((a, b) => {\n        if (a[0] > b[0]) {\n            return 1\n        }\n        if (a[0] < b[0]) {\n            return -1\n        }\n\n        return 0\n    })\n\n    let string = 'y = '\n\n    for (let i = equation.length - 1; i >= 0; i--) {\n        if (i > 1) {\n            string += Math.round(equation[i] * 100) / 100 + 'x^' + i + ' + '\n        } else if (i === 1) {\n            string += Math.round(equation[i] * 100) / 100 + 'x + '\n        } else {\n            string += Math.round(equation[i] * 100) / 100\n        }\n    }\n\n    return {\n        equation: equation,\n        points: results,\n        string: string,\n    }\n}\n\n// @author: Ignacio Vazquez\n// Based on\n// - http://commons.apache.org/proper/commons-math/download_math.cgi LoesInterpolator.java\n// - https://gist.github.com/avibryant/1151823\nfunction loess(data, bandwidth = 0.25) {\n    const xval = data.map(pair => {\n        return pair[0]\n    })\n\n    const distinctX = array_unique(xval)\n\n    if (2 / distinctX.length > bandwidth) {\n        bandwidth = Math.min(2 / distinctX.length, 1)\n    }\n\n    const yval = data.map(pair => {\n        return pair[1]\n    })\n\n    function array_unique(values) {\n        const o = {},\n            l = values.length,\n            r = []\n\n        for (let i = 0; i < l; i += 1) {\n            o[values[i]] = values[i]\n        }\n\n        for (const i in o) {\n            r.push(o[i])\n        }\n\n        return r\n    }\n\n    function tricube(x) {\n        const tmp = 1 - x * x * x\n\n        return tmp * tmp * tmp\n    }\n\n    const res = []\n\n    let left = 0\n    let right = Math.floor(bandwidth * xval.length) - 1\n\n    for (const i in xval) {\n        const x = xval[i]\n\n        if (i > 0) {\n            if (\n                right < xval.length - 1 &&\n                xval[right + 1] - xval[i] < xval[i] - xval[left]\n            ) {\n                left++\n                right++\n            }\n        }\n\n        let edge\n\n        if (xval[i] - xval[left] > xval[right] - xval[i]) {\n            edge = left\n        } else {\n            edge = right\n        }\n\n        const denom = Math.abs(1.0 / (xval[edge] - x))\n        let sumWeights = 0\n        let sumX = 0,\n            sumXSquared = 0,\n            sumY = 0,\n            sumXY = 0\n\n        let k = left\n\n        while (k <= right) {\n            const xk = xval[k]\n            const yk = yval[k]\n            let dist\n\n            if (k < i) {\n                dist = x - xk\n            } else {\n                dist = xk - x\n            }\n\n            const w = tricube(dist * denom)\n            const xkw = xk * w\n\n            sumWeights += w\n            sumX += xkw\n            sumXSquared += xk * xkw\n            sumY += yk * w\n            sumXY += yk * xkw\n            k++\n        }\n\n        const meanX = sumX / sumWeights\n\n        const meanY = sumY / sumWeights\n        const meanXY = sumXY / sumWeights\n        const meanXSquared = sumXSquared / sumWeights\n        let beta\n\n        if (meanXSquared === meanX * meanX) {\n            beta = 0\n        } else {\n            beta = (meanXY - meanX * meanY) / (meanXSquared - meanX * meanX)\n        }\n\n        const alpha = meanY - beta * meanX\n        res[i] = beta * x + alpha\n    }\n\n    return {\n        equation: '',\n        points: xval.map((x, i) => {\n            return [x, res[i]]\n        }),\n        string: '',\n    }\n}\n","export const theme1 = '#a9be3b|#558cc0|#d34957|#ff9f3a|#968f8f|#b7409f|#ffda64|#4fbdae|#b78040|#676767|#6a33cf|#4a7833|#454545'.split(\n    '|'\n)\n\nexport const defaultMultiAxisTheme1 = {\n    0: {\n        startColor: '#6cb8ff',\n        endColor: '#3f6a92',\n        mainColor: '#558cc0',\n    },\n    1: {\n        startColor: '#9e3640',\n        endColor: '#ff5666',\n        mainColor: '#d34957',\n    },\n}\n","import objectClean from 'd2-utilizr/lib/objectClean'\nimport isString from 'd2-utilizr/lib/isString'\nimport getChart from './chart'\nimport getXAxis from './xAxis'\nimport getYAxis from './yAxis'\nimport getSeries from './series'\nimport getTitle from './title'\nimport getSubtitle from './subtitle'\nimport getLegend from './legend'\nimport getPane from './pane'\nimport getNoData from './noData'\nimport { isStacked } from '../../../../modules/visTypes'\nimport getSortedConfig from './getSortedConfig'\nimport getTrimmedConfig from './getTrimmedConfig'\nimport addTrendLines, { isRegressionIneligible } from './addTrendLines'\nimport { defaultMultiAxisTheme1 } from '../../../util/colors/themes'\n\nconst getTransformedLayout = layout => ({\n    ...layout,\n    type: String(layout.type).toUpperCase(),\n    rangeAxisLabel: layout.rangeAxisLabel || layout.rangeAxisTitle,\n    domainAxisLabel: layout.domainAxisLabel || layout.domainAxisTitle,\n    targetLineLabel: layout.targetLineLabel || layout.targetLineTitle,\n    baseLineLabel: layout.baseLineLabel || layout.baseLineTitle,\n    // DHIS2-6774: make sure optionalAxes is initialized as Array when switching\n    // visualization type in dashboards app\n    optionalAxes: layout.optionalAxes || [],\n})\n\nconst getTransformedExtraOptions = extraOptions => ({\n    ...extraOptions,\n    multiAxisTheme: extraOptions.multiAxisTheme || defaultMultiAxisTheme1,\n})\n\nexport default function({ store, layout, el, extraConfig, extraOptions }) {\n    const _layout = getTransformedLayout(layout)\n    const _extraOptions = getTransformedExtraOptions(extraOptions)\n\n    const series = store.generateData({\n        type: _layout.type,\n        seriesId:\n            _layout.columns && _layout.columns.length\n                ? _layout.columns[0].dimension\n                : null,\n        categoryId:\n            _layout.rows && _layout.rows.length\n                ? _layout.rows[0].dimension\n                : null,\n    })\n\n    const stacked = isStacked(_layout.type)\n\n    let config = {\n        // type etc\n        chart: getChart(_layout, el, _extraOptions.dashboard),\n\n        // title\n        title: getTitle(\n            _layout,\n            store.data[0].metaData,\n            _extraOptions.dashboard\n        ),\n\n        // subtitle\n        subtitle: getSubtitle(\n            series,\n            _layout,\n            store.data[0].metaData,\n            _extraOptions.dashboard\n        ),\n\n        // x-axis\n        xAxis: getXAxis(store, _layout, _extraOptions),\n\n        // y-axis\n        yAxis: getYAxis(_layout, series, _extraOptions),\n\n        // series\n        series: getSeries(\n            series.slice(),\n            store,\n            _layout,\n            stacked,\n            _extraOptions\n        ),\n\n        // legend\n        legend: getLegend(_layout, _extraOptions.dashboard),\n\n        // pane\n        pane: getPane(_layout.type),\n\n        // no data\n        lang: {\n            noData: _extraOptions.noData.text,\n        },\n        noData: getNoData(),\n\n        // credits\n        credits: {\n            enabled: false,\n        },\n\n        // exporting\n        exporting: {\n            // disable exporting context menu\n            enabled: false,\n        },\n    }\n\n    // hide empty categories\n    if (_layout.hideEmptyRowItems !== 'NONE') {\n        config = getTrimmedConfig(config, _layout.hideEmptyRowItems)\n    }\n\n    // sorting\n    if (_layout.sortOrder) {\n        config = getSortedConfig(config, _layout, stacked)\n    }\n\n    // DHIS2-1243 add trend lines after sorting\n    // trend line on pie and gauge does not make sense\n    if (\n        isString(_layout.regressionType) &&\n        _layout.regressionType !== 'NONE' &&\n        !isRegressionIneligible(_layout.type)\n    ) {\n        config.series = addTrendLines(\n            _layout.regressionType,\n            config.series,\n            stacked\n        )\n    }\n\n    // force apply extra config\n    Object.assign(config, extraConfig)\n    return objectClean(config)\n}\n","import getFilterText from '../../../../util/getFilterText'\n\nexport default function(layout, metaData) {\n    if (layout.columns) {\n        const firstItem = layout.columns[0].items[0]\n\n        const column = Object.assign({}, layout.columns[0], {\n            items: [firstItem],\n        })\n\n        return getFilterText([column], metaData)\n    }\n\n    return ''\n}\n","import getFilterText from '../../../../util/getFilterText'\nimport { VIS_TYPE_SINGLE_VALUE } from '../../../../../modules/visTypes'\nimport getSingleValueTitle from './singleValue'\n\nfunction getDefault(layout, metaData, dashboard) {\n    return layout.filters && !dashboard\n        ? getFilterText(layout.filters, metaData)\n        : ''\n}\n\nexport default function(layout, metaData, dashboard) {\n    if (layout.hideTitle) {\n        return ''\n    }\n\n    if (typeof layout.title === 'string' && layout.title.length) {\n        return layout.title\n    } else {\n        let title\n        switch (layout.type) {\n            case VIS_TYPE_SINGLE_VALUE:\n                title = getSingleValueTitle(layout, metaData)\n\n                break\n            default:\n                title = getDefault(layout, metaData, dashboard)\n        }\n        return title\n    }\n}\n","import getFilterText from '../../../../util/getFilterText'\n\nexport default function(layout, metaData) {\n    return layout.filters ? getFilterText(layout.filters, metaData) : ''\n}\n","import getFilterText from '../../../../util/getFilterText'\nimport getSingleValueTitle from './singleValue'\nimport { VIS_TYPE_SINGLE_VALUE } from '../../../../../modules/visTypes'\n\nfunction getDefault(layout, dashboard, metaData) {\n    if (dashboard || typeof layout.title === 'string') {\n        return getFilterText(layout.filters, metaData)\n    }\n\n    return ''\n}\n\nexport default function(layout, metaData, dashboard) {\n    if (layout.hideSubtitle) {\n        return ''\n    }\n\n    if (typeof layout.subtitle === 'string' && layout.subtitle.length) {\n        return layout.subtitle\n    } else {\n        let subtitle\n        switch (layout.type) {\n            case VIS_TYPE_SINGLE_VALUE:\n                subtitle = getSingleValueTitle(layout, metaData)\n\n                break\n            default:\n                subtitle = getDefault(layout, dashboard, metaData)\n        }\n\n        return subtitle\n    }\n}\n","import getTitle from './title'\nimport getSubtitle from './subtitle'\n\nexport default function({ store, layout, extraOptions }) {\n    const data = store.generateData({\n        type: layout.type,\n        seriesId:\n            layout.columns && layout.columns.length\n                ? layout.columns[0].dimension\n                : null,\n        categoryId:\n            layout.rows && layout.rows.length ? layout.rows[0].dimension : null,\n    })\n\n    const value = data[0] === undefined ? extraOptions.noData.text : data[0]\n\n    const config = {\n        value: value,\n        title: getTitle(layout, store.data[0].metaData, extraOptions.dashboard),\n        subtitle: getSubtitle(\n            layout,\n            store.data[0].metaData,\n            extraOptions.dashboard\n        ),\n    }\n\n    return config\n}\n","import dhis_highcharts from './dhis_highcharts'\nimport dhis_dhis from './dhis_dhis'\n\nexport default {\n    dhis_highcharts,\n    dhis_dhis,\n}\n","import H from 'highcharts'\nimport HM from 'highcharts/highcharts-more'\nimport HSG from 'highcharts/modules/solid-gauge'\nimport HNDTD from 'highcharts/modules/no-data-to-display'\nimport HE from 'highcharts/modules/exporting'\n\n// apply\nHM(H)\nHSG(H)\nHNDTD(H)\nHE(H)\n\nexport default function(config, el) {\n    if (config) {\n        config.chart.renderTo = el || config.chart.renderTo\n\n        return new H.Chart(config)\n    }\n}\n","import { getColorByValueFromLegendSet } from '../../../../modules/legends'\n\nconst svgNS = 'http://www.w3.org/2000/svg'\n\nconst generateValueSVG = (value, legendSet, y) => {\n    const textSize = 300\n    const defaultFillColor = '#000000'\n\n    const svgValue = document.createElementNS(svgNS, 'svg')\n    svgValue.setAttribute('xmlns', svgNS)\n    svgValue.setAttribute(\n        'viewBox',\n        `0 -${textSize + 50} ${textSize * 0.75 * value.length} ${textSize +\n            200}`\n    )\n\n    if (y) {\n        svgValue.setAttribute('y', y)\n    }\n\n    const fillColor = legendSet ? getColorByValueFromLegendSet(legendSet, value) : defaultFillColor\n\n    const text = document.createElementNS(svgNS, 'text')\n    text.setAttribute('text-anchor', 'middle')\n    text.setAttribute('font-size', textSize)\n    text.setAttribute('font-weight', '300')\n    text.setAttribute('letter-spacing', '-5')\n    text.setAttribute('x', '50%')\n    text.setAttribute('fill', fillColor)\n    text.appendChild(document.createTextNode(value))\n\n    svgValue.appendChild(text)\n\n    return svgValue\n}\n\nconst generateDashboardItem = (config, legendSet) => {\n    const container = document.createElement('div')\n    container.setAttribute(\n        'style',\n        'display: flex; flex-direction: column; align-items: center; justify-content: center; width: 100%; height: 100%'\n    )\n\n    const titleStyle = 'font-size: 12px; color: #666;'\n\n    const title = document.createElement('span')\n    title.setAttribute('style', titleStyle)\n    if (config.title) {\n        title.appendChild(document.createTextNode(config.title))\n\n        container.appendChild(title)\n    }\n\n    const subtitle = document.createElement('span')\n    subtitle.setAttribute('style', titleStyle + ' margin-top: 4px')\n    if (config.subtitle) {\n        subtitle.appendChild(document.createTextNode(config.subtitle))\n\n        container.appendChild(subtitle)\n    }\n\n    container.appendChild(generateValueSVG(config.value, legendSet))\n\n    return container\n}\n\nconst generateDVItem = (config, legendSet, parentEl) => {\n    const parentElBBox = parentEl.getBoundingClientRect()\n\n    const width = parentElBBox.width\n    const height = parentElBBox.height\n\n    const svgNS = 'http://www.w3.org/2000/svg'\n\n    const svg = document.createElementNS(svgNS, 'svg')\n    svg.setAttribute('xmlns', svgNS)\n    svg.setAttribute('viewBox', `0 0 ${width} ${height}`)\n    svg.setAttribute('width', '100%')\n    svg.setAttribute('height', '100%')\n\n    const title = document.createElementNS(svgNS, 'text')\n    title.setAttribute('x', '50%')\n    title.setAttribute('y', 28)\n    title.setAttribute('text-anchor', 'middle')\n    title.setAttribute('font-size', '18px')\n    title.setAttribute('fill', '#111')\n    if (config.title) {\n        title.appendChild(document.createTextNode(config.title))\n\n        svg.appendChild(title)\n    }\n\n    const subtitle = document.createElementNS(svgNS, 'text')\n    subtitle.setAttribute('x', '50%')\n    subtitle.setAttribute('y', 28)\n    subtitle.setAttribute('dy', 22)\n    subtitle.setAttribute('text-anchor', 'middle')\n    subtitle.setAttribute('font-size', '14px')\n    subtitle.setAttribute('fill', '#111')\n    if (config.subtitle) {\n        subtitle.appendChild(document.createTextNode(config.subtitle))\n\n        svg.appendChild(subtitle)\n    }\n\n    svg.appendChild(generateValueSVG(config.value, legendSet, 20))\n\n    return svg\n}\n\nexport default function(config, parentEl, { dashboard, legendSets }) {\n    const legendSet = legendSets[0]\n    parentEl.style.overflow = 'hidden'\n    parentEl.style.display = 'flex'\n    parentEl.style.justifyContent = 'center'\n\n    return dashboard\n        ? generateDashboardItem(config, legendSet)\n        : generateDVItem(config, legendSet, parentEl)\n}\n","import getSingleValueGenerator from './singleValue'\nimport { VIS_TYPE_SINGLE_VALUE } from '../../../../modules/visTypes'\n\nexport default function(config, parentEl, extraOptions) {\n    if (config) {\n        const node =\n            typeof parentEl === 'object'\n                ? parentEl\n                : typeof parentEl === 'string'\n                ? document.querySelector(parentEl)\n                : null\n\n        if (node) {\n            if (node.lastChild) {\n                node.removeChild(node.lastChild)\n            }\n\n            let content\n\n            switch (config.type) {\n                case VIS_TYPE_SINGLE_VALUE:\n                    content = getSingleValueGenerator(\n                        config,\n                        node,\n                        extraOptions\n                    )\n                    break\n                default:\n                    content = getSingleValueGenerator(\n                        config,\n                        node,\n                        extraOptions\n                    )\n            }\n\n            node.appendChild(content)\n\n            return node.innerHTML\n        }\n    }\n}\n","import highcharts from './highcharts'\nimport dhis from './dhis'\n\nexport default {\n    highcharts,\n    dhis,\n}\n","import i18n from '@dhis2/d2-i18n'\nimport validators from './validators'\nimport adapters from './adapters'\nimport generators from './generators'\nimport { theme1 } from '../util/colors'\n\nexport default function({\n    store,\n    layout,\n    el,\n    inputFormat = 'dhis',\n    outputFormat = 'highcharts',\n    extraLayout,\n    extraOptions,\n    onError,\n    onWarning,\n}) {\n    const _validator = validators[inputFormat] || validators.noValidation\n    const _adapter = adapters[inputFormat + '_' + outputFormat]\n    const _generator = generators[outputFormat]\n\n    if (_validator === validators.noValidation) {\n        onWarning(\n            `No validation implementation for config input format \"${inputFormat}\"`\n        )\n    }\n\n    if (!_adapter) {\n        onError(\n            `No config tranformation implementation for format \"${inputFormat}\" to format \"${outputFormat}\"`\n        )\n    }\n\n    if (!_generator) {\n        onError(`No visualization implementation for format ${outputFormat}`)\n    }\n\n    this.getConfig = () => {\n        const DEFAULT_EXTRA_OPTIONS = {\n            colors: theme1,\n            noData: {\n                text: i18n.t('No data'),\n            },\n        }\n\n        return _adapter({\n            layout: _validator({ layout, onError, onWarning }),\n            extraOptions: Object.assign(\n                {},\n                DEFAULT_EXTRA_OPTIONS,\n                extraOptions\n            ),\n            store,\n            el,\n            extraLayout,\n        })\n    }\n\n    this.createVisualization = () =>\n        _generator(this.getConfig(), el, extraOptions)\n}\n","import isArray from 'd2-utilizr/lib/isArray'\nimport 'core-js/fn/array/find-index'\n\nimport Store from './store'\nimport Config from './config'\n\nconst defaultError = error => {\n    throw new Error(error)\n}\n\nconst defaultWarning = warning => {\n    console.log(warning)\n}\n\nfunction createVisualization(\n    data,\n    layout,\n    el,\n    extraOptions,\n    error = defaultError,\n    warning = defaultWarning,\n    outputFormat\n) {\n    const _data = isArray(data) ? data : [data]\n    const store = new Store({ data: _data, error, warning, outputFormat })\n    const config = new Config({\n        store,\n        layout,\n        el,\n        outputFormat,\n        extraOptions,\n        error,\n        warning,\n    })\n\n    return {\n        store,\n        config,\n        visualization: config.createVisualization(),\n    }\n}\n\nexport { Store, Config, createVisualization }\n\nexport default createVisualization\n"],"names":["namespace","i18n","addResources","arTranslations","ar_IQTranslations","daTranslations","enTranslations","esTranslations","frTranslations","idTranslations","kmTranslations","loTranslations","myTranslations","nbTranslations","prsTranslations","psTranslations","ptTranslations","pt_BRTranslations","ruTranslations","svTranslations","tetTranslations","tgTranslations","ukTranslations","urTranslations","viTranslations","zhTranslations","zh_CNTranslations","ItemIcon","backgroundColor","React","propTypes","PropTypes","string","colors","white","theme","secondary800","onClickWrapper","id","index","onClick","event","isCtrlPressed","metaKey","ctrlKey","isShiftPressed","shiftKey","Item","name","highlighted","rest","cx","grey500","defualtProps","bool","isRequired","number","func","grey700","ArrowButton","iconType","toggler","lastClickedIndex","highlightedIds","items","ids","newIndex","minIndex","getMinIndex","maxIndex","getMaxIndex","mergeIds","newArr","updateArray","orderedIds","filter","item","includes","length","slice","concat","idIndex","findIndex","highlightedId","UnselectedItems","Component","constructor","props","onSelect","state","setState","map","i","dataDimId","displayName","toLowerCase","filterText","filterTextContains","renderListItem","newState","dataDim","onDoubleClickItem","toggleHighlight","throttle","node","scrolElRef","current","bottom","scrollHeight","scrollTop","clientHeight","requestMoreItems","listItems","filterItems","Fragment","Button","onSelectAllClick","t","AssignButton","onSelectClick","createRef","arrayOf","shape","defaultProps","DeselectIconButton","fill","iconStyle","height","width","e","stopPropagation","secondary600","secondary200","ghost","active","onRemoveItem","reorderList","highlightedItemIds","destinationIndex","sourceIndex","draggableId","isMultiDrag","list","Array","from","indexedItemsToMove","sortBy","highlightedItemId","idx","indexOf","highlightedAboveDestination","newDestinationIndex","forEach","indexed","splice","grey300","grey900","Subtitle","InfoBox","message","fontSize","color","grey600","ItemsList","innerRef","children","CLONE_INDEX","SelectedItems","draggingId","onDeselect","start","selected","find","itemId","destination","source","newList","onReorder","isActive","Draggable","provided","snapshot","isDraggedItem","isDragging","Boolean","itemText","onDeselectOne","draggableProps","dragHandleProps","cloneId","push","clone","itemList","getItemListWithClone","renderCloneItem","infoBoxMessage","DragDropContext","onDragStart","onDragEnd","Droppable","droppableProps","placeholder","onDeselectAll","UnAssignButton","onDeselectHighlighted","array","ItemSelector","render","unselected","filterZone","object","dialogId","REPORTING_RATE","REPORTING_RATE_ON_TIME","ACTUAL_REPORTS","ACTUAL_REPORTS_ON_TIME","EXPECTED_REPORTS","DATA_SETS_CONSTANTS","getName","CHART_AGGREGATE_AGGREGATABLE_TYPES","ALL_ID","INDICATORS","DATA_ELEMENTS","DATA_SETS","EVENT_DATA_ITEMS","PROGRAM_INDICATORS","TOTALS","DETAIL","getProgramText","getSelectProgramText","dataTypes","getGroupLabel","defaultGroup","groupDetail","default","augmentAlternatives","alternatives","groupId","getReportingRates","getPlaceholder","defaultGroupId","dataType","defaultGroupDetail","DEFAULT_DATATYPE_ID","contents","groupSetId","dataSets","reportingRate","dataSet","concatReportingRate","reportingRateIndex","DataTypes","currentDataType","onChange","SingleSelectField","value","label","ref","Object","values","type","SingleSelectOption","getOptions","Detail","currentValue","options","currentLabel","entries","option","Groups","detailValue","groups","onDetailChange","onGroupChange","optionItems","Filter","text","onClear","InputField","FilterField","onFilterTextChange","onClearFilter","onError","error","console","log","selectFromResponse","response","entity","selectorFn","request","d2","paramString","url","Api","getApi","get","then","catch","requestWithPaging","page","paging","dimensionItems","nextPage","pager","apiFetchDimensions","nameProp","fields","order","params","apiFetchRecommendedIds","dxIds","ouIds","dimensions","join","Promise","resolve","apiFetchItemsByDimension","dimensionId","apiFetchGroups","dataSetGroups","apiFetchAlternatives","args","queryParams","fetchIndicators","fetchDataElementOperands","fetchDataElements","fetchDataSets","getEventDataItems","fetchProgramIndicators","idField","textFilter","fetchProgramDataElements","program","fetchTrackedEntityAttributes","r","isArray","programTrackedEntityAttributes","a","trackedEntityAttribute","dataElementsObj","attributes","all","filterInvalidTypes","valueType","programFilter","DataIcon","PeriodIcon","OrgUnitIcon","AssignedCategoriesIcon","DIMENSION_ID_DATA","DIMENSION_ID_PERIOD","DIMENSION_ID_ORGUNIT","DIMENSION_ID_ASSIGNED_CATEGORIES","DIMENSION_PROP_NO_ITEMS","getFixedDimensions","iconName","icon","getDynamicDimensions","getPredefinedDimensions","filterOutPredefinedDimensions","dimensionIds","keys","getPredefinedDimensionProp","propName","getDimensionById","FIRST_PAGE","DEFAULT_ALTERNATIVES","DataDimension","indicators","dataElements","dataElementOperands","eventDataItems","programIndicators","itemsCopy","dataTypeGroups","displayNameProp","assign","updateAlternatives","currentFilter","updateGroups","concatItems","augmentFn","di","selectedDimensions","debounce","selectedIds","itemsToAdd","itemIdsToRemove","itemIds","onDataTypeChange","getUnselectedItems","selectItems","deselectItems","reorderItems","componentDidMount","componentDidUpdate","prevProps","prevItems","currentItems","isEqual","Function","prototype","DAILY","WEEKLY","BIWEEKLY","WEEKLYWED","WEEKLYTHU","WEEKLYSAT","WEEKLYSUN","MONTHLY","BIMONTHLY","QUARTERLY","SIXMONTHLY","SIXMONTHLYAPR","YEARLY","FYNOV","FYOCT","FYJUL","FYAPR","getMonthName","key","monthNames","dailyPeriodType","formatYyyyMmDd","fnFilter","config","periods","offset","parseInt","isFilter","filterFuturePeriods","isReverse","reversePeriods","year","Date","now","getFullYear","date","period","startDate","endDate","iso","replace","setDate","getDate","reverse","weeklyPeriodType","weekObj","getEpiWeekStartDay","startDayOfWeek","jan4","jan4DayOfWeek","getDay","dayDiff","startDay","week","shortName","weekNumber","biWeeklyPeriodType","day","biWeek","biWeekNumber","monthlyPeriodType","formatIso","y","m","String","getMonth","monthName","biMonthlyPeriodType","monthStart","monthEnd","fullYear","quarterlyPeriodType","quarter","sixMonthlyPeriodType","sixMonthlyAprilPeriodType","yearlyPeriodType","setMonth","dateString","toString","financialOctoberPeriodType","setYear","yearStart","yearEnd","financialNovemberPeriodType","financialJulyPeriodType","financialAprilPeriodType","d","getPeriods","getFixedPeriodsOptionsById","getFixedPeriodsOptions","spacers","dp8","FixedPeriodFilter","currentPeriodType","currentYear","onSelectPeriodType","onSelectYear","DAYS","WEEKS","BIWEEKS","MONTHS","BIMONTHS","QUARTERS","SIXMONTHS","FINACIALYEARS","YEARS","daysPeriodType","weeksPeriodType","biWeeksPeriodType","monthsPeriodType","biMonthsPeriodType","quartersPeriodType","sixMonthsPeriodType","financialYearsPeriodType","yearsPeriodType","getRelativePeriodsOptionsById","getRelativePeriodsOptions","RelativePeriodFilter","onSelectFilter","dp12","dp24","dp4","grey200","DOUBLE_CLICK_MAX_DELAY","TransferOption","disabled","onDoubleClick","doubleClickTimeout","useRef","clearTimeout","setTimeout","TRANSFER_OPTIONS_WIDTH","TRANSFER_SELECTED_WIDTH","TRANSFER_HEIGHT","defaultRelativePeriodType","defaultFixedPeriodType","defaultFixedPeriodYear","fixedPeriodConfig","PeriodSelector","allPeriods","selectedPeriods","isRelative","relativeFilter","periodType","fixedFilter","Number","TabBar","Tab","onIsRelativeClick","onSelectFixedPeriods","Transfer","renderHeader","renderEmptySelection","rightFooter","initialSelectedPeriods","PeriodDimension","selectPeriods","formattedPeriods","apiFetchOrganisationUnits","displayNameProperty","models","organisationUnits","level","userDataViewFallback","apiFetchOrganisationUnitGroups","endPoint","organisationUnitGroups","apiFetchOrganisationUnitLevels","organisationUnitLevels","LEVEL_ID_PREFIX","GROUP_ID_PREFIX","hasGroupPrefix","substr","hasLevelPrefix","stripLevelPrefix","stripGroupPrefix","removePrefix","ouIdHelper","freeze","addLevelPrefix","addGroupPrefix","defaultState","root","undefined","roots","ouLevels","ouGroups","showOrgUnitsTree","OrgUnitDimension","userOrgUnits","ou","levelIds","target","ouItems","levelOu","groupIds","groupOu","rootLevel","toArray","orgUnit","some","path","checked","userOrgUnitIds","orgUnits","reduce","obj","getUserOrgUnitsFromIds","group","OrgUnitSelector","onLevelChange","onDeselectAllClick","handleUserOrgUnitClick","handleOrgUnitClick","handleMultipleOrgUnitsSelect","CircularLoader","loadOrgUnitTree","loadOrgUnitGroups","loadOrgUnitLevels","previousId","currentId","hideOrgUnitsTree","allItems","initialSelectedItems","leftHeader","selectedItems","setSelectedItems","useState","GenericIcon","DynamicDimension","context","setItems","useEffect","getItems","formattedItems","styles","display","outline","DimensionLabel","isDeactivated","onLabelClick","onKeyPress","toolTip","boxShadow","borderRadius","position","top","padding","recommendedIcon","secondary300","marginLeft","cursor","RecommendedIcon","anchorEl","currentTarget","TooltipOnHover","showTooltip","isRecommended","onMouseOver","onMouseExit","MoreHorizontalIcon","style","OptionsButton","DynamicDimensionIcon","labelWrapper","userSelect","wordBreak","textDeactivated","minHeight","marginTop","marginBottom","alignItems","secondary100","fontWeight","fixedDimensionIcon","paddingLeft","paddingBottom","dynamicDimensionIcon","paddingRight","iconWrapper","flexDirection","lockIcon","optionsWrapper","minWidth","left","alignSelf","optionsButton","border","background","DimensionItem","mouseOver","onOptionsClick","Icon","isSelected","isLocked","getDimensionIcon","Label","getDimensionType","itemStyle","container","flex","wrapper","overflow","margin","header","textTransform","letterSpacing","section","DimensionList","dimension","disabledDimension","recommendedDimension","lockedDimension","isDisabled","onDimensionClick","onDimensionOptionsClick","onDimensionDragStart","nameContainsFilterText","renderItem","classes","fixedDimensions","getDimensionItemsByFilter","fixedDim","nonPredefinedDimensions","predefDim","withStyles","divContainer","grey050","textField","grey400","DimensionsPanel","AXIS","defaultValue","isValid","axis","AXIS_ID_COLUMNS","AXIS_ID_ROWS","AXIS_ID_FILTERS","DEFAULT_AXIS_IDS","VIS_TYPE_COLUMN","VIS_TYPE_STACKED_COLUMN","VIS_TYPE_BAR","VIS_TYPE_STACKED_BAR","VIS_TYPE_LINE","VIS_TYPE_AREA","VIS_TYPE_PIE","VIS_TYPE_RADAR","VIS_TYPE_GAUGE","VIS_TYPE_BUBBLE","VIS_TYPE_YEAR_OVER_YEAR_LINE","VIS_TYPE_YEAR_OVER_YEAR_COLUMN","VIS_TYPE_SINGLE_VALUE","VIS_TYPE_PIVOT_TABLE","visTypeDisplayNames","visTypeIcons","BarIcon","StackedBarIcon","ColumnIcon","StackedColumnIcon","LineIcon","AreaIcon","PieIcon","RadarIcon","GaugeIcon","YearOverYearLineIcon","YearOverYearColumnIcon","SingleValueIcon","PivotTableIcon","getDisplayNameByVisType","visType","Error","stackedTypes","yearOverYearTypes","dualAxisTypes","defaultVisType","isStacked","isYearOverYear","isDualAxisType","isSingleValue","RULE_PROP_AVAILABLE_AXES","RULE_PROP_MAX_DIMS_PER_AXIS","RULE_PROP_MIN_DIMS_PER_AXIS","RULE_PROP_MAX_ITEMS_PER_AXIS","RULE_PROP_DISALLOWED_DIMS","RULE_PROP_LOCKED_DIMS","defaultRules","pieRules","singleValueRules","yearOverYearRules","pivotTableRules","visTypeToRules","getRulesByVisType","rules","getAvailableAxesByVisType","getMaxNumberOfDimsPerAxisByVisType","getMinNumberOfDimsPerAxisByVisType","getMaxNumberOfItemsPerAxisByVisType","getDisallowedDimsByVisType","getLockedDimsByVisType","testResourceRules","Set","getAxisMaxNumberOfItemsByVisType","axisId","getAxisMaxNumberOfDimsByVisType","getAxisMinNumberOfDimsByVisType","getAxisPerLockedDimByVisType","getAllLockedDimIdsByVisType","hasAxisTooManyItemsByVisType","numberOfItems","maxNumberOfItemsPerAxis","isDimensionLockedByVisType","isAxisFullByVisType","axisDimensionsCount","canDimensionBeAddedToAxisByVisType","axisIsFull","transferableDimension","getTransferableDimensionPerAxisByVisType","lockedDimsByVisType","lockedDimIdsByAxis","dimId","pop","LAYOUT_TYPE_DEFAULT","LAYOUT_TYPE_PIE","LAYOUT_TYPE_SINGLE_VALUE","LAYOUT_TYPE_YEAR_OVER_YEAR","LAYOUT_TYPE_PIVOT_TABLE","getAxisNamesByLayoutType","layoutType","getAxisNameByLayoutType","getAxisName","visTypeToLayoutType","getLayoutTypeByVisType","getAxisItemLabel","axisName","isDimensionInLayout","getRemoveMenuItem","getDividerItem","getUnavailableLabel","visualizationType","getDualAxisMenuItemLabel","currentAxisId","numberOfDimensionItems","DimensionMenu","submenuAnchorEl","assignedCategoriesItemHandler","isAssignedCategoriesInLayout","dualAxisItemHandler","axisItemHandler","removeItemHandler","onClose","menuItems","availableAxisIds","getAvailableAxes","applicableAxisIds","assignedCategoriesAvailableDestinations","assignedCategoriesItemLabel","closeSubMenu","closeWholeMenu","getDualAxisMenuItem","vertical","horizontal","requireItems","enter","exit","Zoom","parseValue","valueString","parsedValue","parseFloat","isNaN","SORT_ORDER_ASCENDING","SORT_ORDER_DESCENDING","CELL_TYPE_VALUE","CELL_TYPE_SUBTOTAL","CELL_TYPE_TOTAL","AGGREGATE_TYPE_SUM","AGGREGATE_TYPE_AVERAGE","AGGREGATE_TYPE_NA","VALUE_TYPE_TEXT","VALUE_TYPE_NUMBER","NUMBER_TYPE_VALUE","NUMBER_TYPE_ROW_PERCENTAGE","NUMBER_TYPE_COLUMN_PERCENTAGE","FONT_SIZE_OPTION_SMALL","FONT_SIZE_SMALL","FONT_SIZE_OPTION_NORMAL","FONT_SIZE_NORMAL","FONT_SIZE_OPTION_LARGE","FONT_SIZE_LARGE","DISPLAY_DENSITY_OPTION_COMPACT","DISPLAY_DENSITY_PADDING_COMPACT","DISPLAY_DENSITY_OPTION_NORMAL","DISPLAY_DENSITY_PADDING_NORMAL","DISPLAY_DENSITY_OPTION_COMFORTABLE","DISPLAY_DENSITY_PADDING_COMFORTABLE","CLIPPED_CELL_MAX_WIDTH","COLUMN_PARTITION_SIZE_PX","DIMENSION_TYPE_DATA_ELEMENT_GROUP_SET","DIMENSION_TYPE_DATA","DIMENSION_TYPE_PERIOD","DIMENSION_TYPE_ORGUNIT","trimTrailingZeros","stringValue","defaultDecimalSeparator","separateDigitGroups","decimalSeparator","integer","remainder","split","unshift","substring","trimmedRemainder","getSeparator","visualization","digitGroupSeparator","toFixedPrecisionString","skipRounding","precision","toFixed","renderValue","numberType","digitGroups","canvas","getContext","document","createElement","ctx","font","measureText","textMetrics","dataFields","defaultOptions","hideEmptyColumns","hideEmptyRows","showRowTotals","showColumnTotals","showRowSubtotals","showColumnSubtotals","isDxDimension","dimensionItem","dimensionType","countFromDisaggregates","count","x","addSize","reversedList","lastLevel","size","listByDimension","sortByHierarchy","sort","b","hierarchy","localeCompare","buildDimensionLookup","metadata","headers","rows","row","meta","columns","column","allByDimension","headerDimensions","rowHeaders","_","columnHeaders","dataHeaders","out","field","ouDimension","showHierarchy","ouNameHierarchy","uid","lookup","dataRow","dimensionLookup","doColumnSubtotals","doRowSubtotals","headerIndex","Math","floor","applyTotalAggregationType","totalAggregationType","numerator","denominator","multiplier","divisor","overrideTotalAggregationType","PivotTableEngine","data","legendSets","sets","set","rawData","colTotals","rowTotals","colSubTotals","rowSubTotals","title","hideTitle","subtitle","hideSubtitle","metaData","singularRow","firstColumnIsSortable","columnDepth","showDimensionLabels","rowDepth","buildMatrix","getRaw","cellType","getRawCellType","dxDimension","getRawCellDxDimension","getRawRowHeader","getRawColumnHeader","peId","dimensionItemType","ouId","empty","rawValue","renderedValue","percentageTotals","mappedRow","rowMap","mappedColumn","columnMap","isRowTotal","doRowTotals","dataWidth","isColumnTotal","doColumnTotals","dataHeight","isRowSubtotal","isColumnSubtotal","getCellType","getDimensionLabel","rowLevel","columnLevel","lastRowLevel","lastColumnLevel","getCellDxDimension","cellValue","legendSet","dxRowIndex","dim","dxColumnIndex","rowIsEmpty","columnIsEmpty","columnWidths","times","itemIndex","getColumnHeader","getRowHeader","getDependantTotalCells","rowSubtotalSize","rowSubtotal","ceil","rowSubtotalColumnTotal","rawDataHeight","columnSubtotalSize","columnSubtotal","columnSubtotalRowTotal","rawDataWidth","combinedSubtotal","rowTotal","columnTotal","combinedTotal","addCellValueToTotals","pos","totals","totalItem","totalCount","totalCell","currentAggType","previousAggType","currentValueType","previousValueType","percentageTotal","finalizeTotal","addCellForAdaptiveClipping","finalizeTotals","n","max","finalizeAdaptiveClipping","dataPixelWidth","rowHeaderPixelWidth","nextPartitionPx","columnPartitions","getColumnWidth","contentWidth","min","cellPadding","headerSize","isSortable","scrollIconBuffer","colWidth","pre","maxWidth","columnWidth","rowHeaderWidths","rawColumn","resetRowMap","resetColumnMap","displayDensity","getColumnType","warn","rowA","rowB","valueA","valueB","clearSort","initialState","useParentSize","elementRef","renderCounter","initialSize","setSize","el","parentElement","onResize","clientWidth","observer","ResizeObserver","observe","disconnect","useScrollPosition","containerRef","debounceWait","scrollPosition","setScrollPosition","onScroll","useCallback","scroll","scrollLeft","currentRef","addEventListener","removeEventListener","clipAxis","step","headerCount","post","indices","clipPartitionedAxis","partitionSize","partitions","axisMap","widthMap","viewportWidth","viewportPosition","totalWidth","partition","end","useTableClipping","engine","useMemo","PivotTableEngineContext","createContext","Provider","usePivotTableEngine","useContext","table","cell","sortIcon","PivotTableContainer","forwardRef","PivotTableClippedAxis","axisClippingResult","EmptyComponent","ItemComponent","headerStacksAreEqual","limit","getHeaderForDisplay","dimensionLevel","getHeader","showHeader","span","currentHeader","includesHierarchy","PivotTableHeaderCell","PivotTableCell","isColumnHeader","maxHeight","className","classnames","oneOfType","SortIconAscending","SortIconDescending","SortIconIdle","PivotTableSortIcon","SortIcon","PivotTableColumnHeaderCell","clippingResult","onSortByColumn","PivotTableDimensionLabelCell","colCount","rowCount","colSpan","rowSpan","PivotTableEmptyCell","PivotTableColumnHeaders","PivotTableTitleRow","containerWidth","columnCount","setPosition","textAlign","DIMENSION","isObject","DIMENSION_PROP_ID","required","prop","isString","DIMENSION_PROP_ITEMS","DIMENSION_PROPS","dimensionIs","dimensionIsEmpty","dimensionIsValid","requiredProps","every","dimensionGetItems","getOuLevelAndGroupText","hasOuLevel","hasOuGroup","filterFragments","getLevelAndGroupText","isLevel","getNameFromMetadata","dynamicOuItems","lastItem","dynamicOuNames","allDynamicOuNames","lastOuName","staticOuNames","ouLevelAndGroupText","filters","titleFragments","l","sectionParts","PivotTableTitleRows","getFilterText","PivotTableHead","PivotTableEmptyRow","PivotTableRowHeaderCell","rowIndex","calculateColorBrightness","rgb","round","isHex","charAt","hexToRgb","hex","result","exec","isColorBright","LEGEND_DISPLAY_STRATEGY_BY_DATA_ITEM","LEGEND_DISPLAY_STRATEGY_FIXED","LEGEND_DISPLAY_STYLE_FILL","LEGEND_DISPLAY_STYLE_TEXT","getColorByValueFromLegendSet","legend","legends","startValue","endValue","getLegendSet","legendSetId","legendDisplayStrategy","buildStyleObject","legendColor","legendDisplayStyle","applyLegendSet","PivotTableValueCell","onToggleContextualMenu","cellRef","cellContent","isClickable","legendStyle","PivotTableRow","columnIndex","PivotTableBody","useSortableColumns","setSortBy","PivotTable","LAYOUT","layout","dimensionGetId","layoutFilterDimensions","idArray","filteredLayout","layoutGetAllAxes","layoutGetAllDimensions","allDimensions","axisGetAllItems","layoutGetAllItems","ITEM","ITEM_PROP_ID","ITEM_PROPS","itemGetId","layoutGetAllItemIds","axisGetDimensionIds","layoutGetAxisIdDimensionIdsObject","layoutGetDimension","layoutGetDimensionItems","axisGetDimension","axisHasDimension","layoutReplaceDimension","newAxisDimensions","dimensionGetItemIds","layoutGetDimensionIdItemIdsObject","axisHasDataDimension","layoutHasDataDimension","layoutHasDimension","layoutHasDynamicDimension","fixedIds","axisHasPeriodDimension","layoutHasPeriodDimension","axisHasOuDimension","axisIsEmpty","dimensionCreate","itemIsValid","MODULE","getMessage","validateHeader","validateRowValue","rowValue","validateRow","headersLength","warning","noValidation","dhis","acc","seriesIds","categoryIds","idValueMap","serieData","serieLabel","seriesId","categoryId","VALUE_ID","arrayNullsOnly","arrayContains","arrayUnique","getHeaderIdIndexMap","Map","getPrefixedId","isPrefix","getIdValueMap","seriesHeader","categoryHeader","valueIndex","getDefault","getSeriesFunction","getPie","getGauge","getYearOnYear","seriesFunction","res","headerIdIndexMap","seriesIndex","categoryIndex","getValueFunction","getSingleValue","valueFunction","dhis_highcharts","dhis_dhis","inputFormat","outputFormat","initialSeriesId","initialCategoryId","_validator","validators","_adapter","adapters","generateData","polar","DEFAULT_CHART","spacingTop","fontFamily","DASHBOARD_CHART","spacingRight","spacingBottom","spacingLeft","dashboard","getType","renderTo","DEFAULT_AXIS_TITLE","align","textShadow","dimensionName","store","extraOptions","categories","xAxisLabels","pe","periodId","noAxis","objectClean","getCategories","getAxisTitle","domainAxisLabel","labels","xAxis","DEFAULT_MAX_VALUE","DEFAULT_PLOT_LINE_STYLE","zIndex","DEFAULT_TARGET_LINE_LABEL","DEFAULT_BASE_LINE_LABEL","getPlotLine","series","plotLines","arrayClean","isNumber","baseLineValue","baseLineLabel","targetLineValue","targetLineLabel","fillColor","rangeAxisMinValue","rangeAxisMaxValue","lineWidth","minorTickInterval","tickLength","tickAmount","tickPositioner","minColor","maxColor","OPTIONAL_AXES_DIMENSIONAL_ITEM","OPTIONAL_AXES_AXIS","getIdAxisMap","optionalAxes","getFullIdAxisMap","idAxisMap","s","hasOptionalAxis","getAxisIdsMap","fullIdAxisMap","DEFAULT_MIN_VALUE","DEFAULT_GRIDLINE_COLOR","DEFAULT_PLOTLINE","DEFAULT_PLOTLINE_LABEL","getMinValue","isNumeric","getMaxValue","getSteps","rangeAxisSteps","getTargetLine","getBaseLine","getFormatter","formatter","rangeAxisDecimals","getLabels","getDualAxes","mainColor","opposite","axes","dualAxes","multiAxisTheme","rangeAxisLabel","gridLineColor","reversedStacks","yAxis","decimals","cumulativeValues","seriesObj","accumulator","numberDecimals","colorByPoint","allowPointSelect","dataLabels","enabled","point","percentage","tooltip","headerFormat","pointFormat","DEFAULT_FONT_SIZE","enableMouseTracking","borderWidth","verticalAlign","c","convertToHex","trim","convertToRGB","generateColors","colorStart","colorEnd","colorCount","addHash","len","alpha","saida","DEFAULT_ANIMATION_DURATION","HIGHCHARTS_TYPE_COLUMN","HIGHCHARTS_TYPE_BAR","HIGHCHARTS_TYPE_PERCENT","HIGHCHARTS_TYPE_NORMAL","epiCurveTypes","getAnimation","fallback","getColor","getIdColorMap","axisIdsMap","colorsByAxis","numberOfIds","startColor","endColor","idColorMap","showValues","showData","stacking","percentStackedValues","noSpaceBetweenColumns","seriesType","pointPadding","groupPadding","yearlySeries","getCumulativeData","animation","duration","DEFAULT_TITLE_STYLE","whiteSpace","textOverflow","DASHBOARD_TITLE_STYLE","getYearOverYearTitle","DEFAULT_SUBTITLE","DASHBOARD_SUBTITLE","filterTitle","DEFAULT_ITEM_STYLE","DASHBOARD_ITEM_STYLE","DEFAULT_LEGEND","symbolWidth","symbolHeight","itemMarginBottom","DASHBOARD_LEGEND","symbolPadding","itemDistance","getItemStyle","getLegend","hideLegend","DEFAULT_PANE_SIZE","center","startAngle","endAngle","innerRadius","outerRadius","isZeroAsNull","total","sortOrderMap","getIndexOrder","direction","dataToBeSorted","getStackedData","dataObjectsToBeSorted","arraySort","arrayPluck","getSortedConfig","indexOrder","sortedConfig","sortOrder","arrayCleanUndefined","getEmptySeriesIndexes","emptyIndexes","seriesValues","getFirstLastValueIndexes","firstValueIndex","lastValueIndex","cleanData","emptySeriesIndexes","hideEmptyRowItems","cleanedData","getTrimmedXAxisObject","getTrimmedSeriesObject","DEFAULT_TRENDLINE","dashStyle","marker","symbol","radius","isRegressionIneligible","regressionType","newSeries","getRegressionObj","getDarkerColor","darker","getRegressionData","regression","regressionTypeOptions","polynomial","loess","linear","points","gaussianElimination","o","maxrow","tmp","j","abs","k","decimalPlaces","sum","results","N","gradient","intercept","coorY","coordinate","equation","extrapolate","lhs","rhs","pow","resultLength","answer","w","bandwidth","xval","pair","distinctX","array_unique","yval","tricube","right","edge","denom","sumWeights","sumX","sumXSquared","sumY","sumXY","xk","yk","dist","xkw","meanX","meanY","meanXY","meanXSquared","beta","theme1","defaultMultiAxisTheme1","getTransformedLayout","toUpperCase","rangeAxisTitle","domainAxisTitle","targetLineTitle","baseLineTitle","getTransformedExtraOptions","extraConfig","_layout","_extraOptions","stacked","chart","getChart","getTitle","getSubtitle","getXAxis","getYAxis","getSeries","pane","getPane","lang","noData","getNoData","credits","exporting","getTrimmedConfig","addTrendLines","firstItem","getSingleValueTitle","HM","H","HSG","HNDTD","HE","Chart","svgNS","generateValueSVG","textSize","defaultFillColor","svgValue","createElementNS","setAttribute","appendChild","createTextNode","generateDashboardItem","titleStyle","generateDVItem","parentEl","parentElBBox","getBoundingClientRect","svg","justifyContent","querySelector","lastChild","removeChild","content","getSingleValueGenerator","innerHTML","highcharts","extraLayout","onWarning","_generator","generators","getConfig","DEFAULT_EXTRA_OPTIONS","createVisualization","defaultError","defaultWarning","_data","Store","Config"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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"}